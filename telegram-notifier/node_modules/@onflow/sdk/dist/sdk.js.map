{"version":3,"file":"sdk.js","sources":["../src/interaction/interaction.ts","../src/build/build.ts","../src/response/response.ts","../src/build/build-get-block.ts","../src/build/build-get-account.ts","../src/decode/decode-stream.ts","../src/decode/decode.ts","../src/transport/subscribe/errors.ts","../src/context/get-global-transport.ts","../src/context/global.ts","../src/resolve/resolve-cadence.ts","../src/resolve/resolve-arguments.ts","../src/encode/encode.ts","../src/resolve/voucher.ts","../src/resolve/resolve-accounts.ts","../src/resolve/resolve-signatures.ts","../src/resolve/resolve-validators.ts","../src/resolve/resolve-final-normalization.ts","../src/resolve/resolve-voucher-intercept.ts","../src/resolve/resolve-compute-limit.ts","../src/resolve/resolve.ts","../src/transport/send/send.ts","../src/transport/subscribe/subscribe-raw.ts","../src/transport/subscribe/subscribe.ts","../src/decode/sdk-decode.ts","../src/wallet-utils/encode-signable.ts","../src/build/build-validator.ts","../src/build/build-at-block-height.ts","../src/build/build-at-block-id.ts","../src/build/build-at-latest-block.ts","../src/account/account.ts","../src/block/block.ts","../src/build/build-get-node-version-info.ts","../src/node-version-info/node-version-info.ts","../src/build/build-authorizations.ts","../src/build/build-get-events.ts","../src/build/build-get-events-at-block-height-range.ts","../src/build/build-get-events-at-block-ids.ts","../src/build/build-get-block-header.ts","../src/build/build-get-collection.ts","../src/build/build-get-transaction-status.ts","../src/build/build-get-transaction.ts","../src/build/build-get-network-parameters.ts","../src/build/build-limit.ts","../src/build/build-arguments.ts","../src/build/build-proposer.ts","../src/build/build-payer.ts","../src/build/build-ping.ts","../src/build/build-ref.ts","../src/build/build-script.ts","../src/build/build-transaction.ts","../src/build/build-invariant.js","../src/build/build-voucher-intercept.ts","../src/build/build-subscribe-events.ts","../src/resolve/resolve-proposer-sequence-number.ts","../src/resolve/resolve-ref-block-id.ts","../src/test-utils/mock-send.js","../src/test-utils/authz-fn.ts","../src/test-utils/run.ts","../src/VERSION.ts","../src/constants.ts","../src/context/context.ts","../src/sdk-client.ts","../src/sdk.ts"],"sourcesContent":["import {invariant} from \"@onflow/util-invariant\"\nimport {v4 as uuidv4} from \"uuid\"\nimport {log, LEVELS} from \"@onflow/util-logger\"\n\nimport {\n  TransactionRole,\n  Interaction,\n  InteractionAccount,\n  InteractionResolverKind,\n  InteractionStatus,\n  InteractionTag,\n} from \"@onflow/typedefs\"\nimport {TypeDescriptorInput, TypeDescriptor} from \"@onflow/types\"\n\nexport type AuthorizationFn = (acct: InteractionAccount) => InteractionAccount\nexport type AccountAuthorization =\n  | (AuthorizationFn & Partial<InteractionAccount>)\n  | Partial<InteractionAccount>\n\ntype CadenceArgument<T extends TypeDescriptor<any, any>> = {\n  value: TypeDescriptorInput<T>\n  xform: T\n}\n\nexport {CadenceArgument}\n\nexport type InteractionBuilderFn = (\n  ix: Interaction\n) => Interaction | Promise<Interaction>\n\nconst ACCT = `{\n  \"kind\":\"${InteractionResolverKind.ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst ARG = `{\n  \"kind\":\"${InteractionResolverKind.ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null,\n  \"resolveArgument\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${InteractionTag.UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${InteractionStatus.OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":[],\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"subscribeEvents\": {\n    \"startBlockId\":null,\n    \"startHeight\":null,\n    \"eventTypes\":null,\n    \"addresses\":null,\n    \"contracts\":null,\n    \"heartbeatInterval\":null\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX) as Interaction))\n\n/**\n * Creates a new interaction object with default values.\n *\n * @returns A new interaction object initialized with default values\n */\nexport const initInteraction = (): Interaction => JSON.parse(IX)\n\n/**\n * Creates a new interaction object with default values.\n *\n * @deprecated Use initInteraction() instead. This function will be removed in a future version.\n *\n * @returns A new interaction object initialized with default values\n */\nexport const interaction = () => {\n  log.deprecate({\n    pkg: \"FCL/SDK\",\n    message: `The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead`,\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction\",\n    level: LEVELS.warn,\n  })\n  return initInteraction()\n}\n\n/**\n * Checks if a value is a number.\n *\n * @param d The value to check\n * @returns True if the value is a number, false otherwise\n *\n * @example\n * import { isNumber } from \"@onflow/sdk\"\n *\n * console.log(isNumber(42)); // true\n * console.log(isNumber(\"42\")); // false\n * console.log(isNumber(3.14)); // true\n * console.log(isNumber(null)); // false\n */\nexport const isNumber = (d: any): d is number => typeof d === \"number\"\n\n/**\n * Checks if a value is an array.\n *\n * @param d The value to check\n * @returns True if the value is an array, false otherwise\n *\n * @example\n * import { isArray } from \"@onflow/sdk\"\n *\n * console.log(isArray([1, 2, 3])); // true\n * console.log(isArray(\"hello\")); // false\n * console.log(isArray({})); // false\n * console.log(isArray(null)); // false\n */\nexport const isArray = (d: any): d is any[] => Array.isArray(d)\n\n/**\n * Checks if a value is an object (but not null).\n *\n * @param d The value to check\n * @returns True if the value is an object and not null, false otherwise\n *\n * @example\n * import { isObj } from \"@onflow/sdk\"\n *\n * console.log(isObj({})); // true\n * console.log(isObj({name: \"Alice\"})); // true\n * console.log(isObj(null)); // false\n * console.log(isObj(\"string\")); // false\n * console.log(isObj([])); // true (arrays are objects)\n */\nexport const isObj = (d: any): d is Record<string, any> =>\n  d !== null && typeof d === \"object\"\n\n/**\n * Checks if a value is null or undefined.\n *\n * @param d The value to check\n * @returns True if the value is null or undefined, false otherwise\n *\n * @example\n * import { isNull } from \"@onflow/sdk\"\n *\n * console.log(isNull(null)); // true\n * console.log(isNull(undefined)); // true\n * console.log(isNull(\"\")); // false\n * console.log(isNull(0)); // false\n * console.log(isNull(false)); // false\n */\nexport const isNull = (d: any): d is null => d == null\n\n/**\n * Checks if a value is a function.\n *\n * @param d The value to check\n * @returns True if the value is a function, false otherwise\n *\n * @example\n * import { isFn } from \"@onflow/sdk\"\n *\n * console.log(isFn(() => {})); // true\n * console.log(isFn(function() {})); // true\n * console.log(isFn(\"function\")); // false\n * console.log(isFn({})); // false\n */\nexport const isFn = (d: any): d is Function => typeof d === \"function\"\n\n/**\n * Checks if an object is a valid interaction.\n *\n * @param ix The object to check\n * @returns True if the object is a valid interaction, false otherwise\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { isInteraction, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n * console.log(isInteraction(interaction)); // true\n * console.log(isInteraction({})); // false\n * console.log(isInteraction(null)); // false\n *\n * // Check if a builder result is a valid interaction\n * const built = await fcl.build([fcl.script`access(all) fun main(): Int { return 42 }`]);\n * console.log(isInteraction(built)); // true\n */\nexport const isInteraction = (ix: unknown) => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\n/**\n * Marks an interaction as successful and returns the interaction object.\n *\n * @param ix The interaction to mark as successful\n * @returns The interaction object with status set to OK\n *\n * @example\n * import { Ok, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n * const successfulInteraction = Ok(interaction);\n * console.log(successfulInteraction.status); // \"OK\"\n */\nexport const Ok = (ix: Interaction) => {\n  ix.status = InteractionStatus.OK\n  return ix\n}\n\n/**\n * Marks an interaction as failed with a specific reason and returns the interaction object.\n *\n * @param ix The interaction to mark as failed\n * @param reason The reason for the failure\n * @returns The interaction object with status set to BAD and reason set\n *\n * @example\n * import { Bad, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n * const failedInteraction = Bad(interaction, \"Invalid transaction signature\");\n * console.log(failedInteraction.status); // \"BAD\"\n * console.log(failedInteraction.reason); // \"Invalid transaction signature\"\n */\nexport const Bad = (ix: Interaction, reason: string) => {\n  ix.status = InteractionStatus.BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = (wat: InteractionTag) => (ix: Interaction) => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nconst prepAccountKeyId = (acct: AccountAuthorization): AccountAuthorization => {\n  if (acct.keyId == null) return acct\n\n  invariant(\n    !isNaN(parseInt(acct.keyId.toString())),\n    \"account.keyId must be an integer\"\n  )\n\n  return {\n    ...acct,\n    keyId: parseInt(acct.keyId.toString()),\n  } as AccountAuthorization\n}\n\ninterface IPrepAccountOpts {\n  role?: TransactionRole | null\n}\n\n/**\n * Creates a new account object with default values.\n *\n * @returns A new account object initialized with default values\n *\n * @example\n * import { initAccount } from \"@onflow/sdk\"\n *\n * const account = initAccount();\n * console.log(account.addr); // null\n * console.log(account.keyId); // null\n * console.log(account.role.proposer); // false\n *\n * // Typically used internally by other functions\n * // You'll more commonly use authorization() or prepAccount()\n */\nexport const initAccount = (): InteractionAccount => JSON.parse(ACCT)\n\n/**\n * Prepares and configures an account for use in an interaction with a specific role.\n *\n * @param acct The account authorization function or account object\n * @param opts Configuration options including the role for the account\n * @returns A function that adds the prepared account to an interaction\n */\nexport const prepAccount =\n  (acct: AccountAuthorization, opts: IPrepAccountOpts = {}) =>\n  (ix: Interaction) => {\n    invariant(\n      typeof acct === \"function\" || typeof acct === \"object\",\n      \"prepAccount must be passed an authorization function or an account object\"\n    )\n    invariant(opts.role != null, \"Account must have a role\")\n\n    const ACCOUNT = initAccount()\n    const role = opts.role\n    const tempId = uuidv4()\n    let account: Partial<InteractionAccount> = {...acct}\n\n    if (acct.authorization && isFn(acct.authorization))\n      account = {resolve: acct.authorization}\n    if (!acct.authorization && isFn(acct)) account = {resolve: acct}\n\n    const resolve = account.resolve\n    if (resolve) {\n      account.resolve = (acct: InteractionAccount, ...rest: any[]) =>\n        [resolve, prepAccountKeyId].reduce(\n          async (d, fn) => fn(await d, ...rest),\n          acct\n        )\n    }\n    account = prepAccountKeyId(account)\n\n    ix.accounts[tempId] = {\n      ...ACCOUNT,\n      tempId,\n      ...account,\n      role: {\n        ...ACCOUNT.role,\n        ...(typeof acct.role === \"object\" ? acct.role : {}),\n        ...(role ? {[role]: true} : {}),\n      },\n    }\n\n    if (role === TransactionRole.AUTHORIZER) {\n      ix.authorizations.push(tempId)\n    } else if (role === TransactionRole.PAYER) {\n      ix.payer.push(tempId)\n    } else if (role) {\n      ix[role] = tempId\n    }\n\n    return ix\n  }\n\n/**\n * Creates an argument resolver and adds it to an interaction.\n *\n * This function is typically used internally by the SDK to handle arguments in scripts and transactions.\n * For most use cases, you should use `fcl.arg()` instead of this function directly.\n *\n * @param arg The argument configuration object\n * @returns A function that adds the argument to an interaction\n *\n * @example\n * import { makeArgument, initInteraction } from \"@onflow/sdk\"\n * import * as fcl from \"@onflow/fcl\";\n *\n * const interaction = initInteraction();\n *\n * // Create an argument resolver (usually you'd use fcl.arg instead)\n * const argResolver = {\n *   value: 42,\n *   xform: fcl.t.Int,\n *   resolve: (value, xform) => ({ value, xform })\n * };\n *\n * // Add the argument to the interaction\n * makeArgument(argResolver)(interaction);\n *\n * console.log(interaction.message.arguments.length); // 1\n *\n * // Preferred way - use fcl.arg instead:\n * // fcl.args([fcl.arg(42, fcl.t.Int)])\n */\nexport const makeArgument = (arg: Record<string, any>) => (ix: Interaction) => {\n  let tempId = uuidv4()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  ix.arguments[tempId].resolveArgument = isFn(arg.resolveArgument)\n    ? arg.resolveArgument.bind(arg)\n    : arg.resolveArgument\n\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(InteractionTag.UNKNOWN)\nexport const makeScript /*                  */ = makeIx(InteractionTag.SCRIPT)\nexport const makeTransaction /*             */ = makeIx(\n  InteractionTag.TRANSACTION\n)\nexport const makeGetTransactionStatus /*    */ = makeIx(\n  InteractionTag.GET_TRANSACTION_STATUS\n)\nexport const makeGetTransaction /*          */ = makeIx(\n  InteractionTag.GET_TRANSACTION\n)\nexport const makeGetAccount /*              */ = makeIx(\n  InteractionTag.GET_ACCOUNT\n)\nexport const makeGetEvents /*               */ = makeIx(\n  InteractionTag.GET_EVENTS\n)\nexport const makePing /*                    */ = makeIx(InteractionTag.PING)\nexport const makeGetBlock /*                */ = makeIx(\n  InteractionTag.GET_BLOCK\n)\nexport const makeGetBlockHeader /*          */ = makeIx(\n  InteractionTag.GET_BLOCK_HEADER\n)\nexport const makeGetCollection /*           */ = makeIx(\n  InteractionTag.GET_COLLECTION\n)\nexport const makeGetNetworkParameters /*    */ = makeIx(\n  InteractionTag.GET_NETWORK_PARAMETERS\n)\nexport const makeSubscribeEvents /*         */ = makeIx(\n  InteractionTag.SUBSCRIBE_EVENTS\n)\nexport const makeGetNodeVerionInfo /*       */ = makeIx(\n  InteractionTag.GET_NODE_VERSION_INFO\n)\n\nconst is = (wat: InteractionTag) => (ix: Interaction) => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(InteractionTag.UNKNOWN)\nexport const isScript /*                  */ = is(InteractionTag.SCRIPT)\nexport const isTransaction /*             */ = is(InteractionTag.TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(\n  InteractionTag.GET_TRANSACTION_STATUS\n)\nexport const isGetTransaction /*          */ = is(\n  InteractionTag.GET_TRANSACTION\n)\nexport const isGetAccount /*              */ = is(InteractionTag.GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(InteractionTag.GET_EVENTS)\nexport const isPing /*                    */ = is(InteractionTag.PING)\nexport const isGetBlock /*                */ = is(InteractionTag.GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(\n  InteractionTag.GET_BLOCK_HEADER\n)\nexport const isGetCollection /*           */ = is(InteractionTag.GET_COLLECTION)\nexport const isGetNetworkParameters /*    */ = is(\n  InteractionTag.GET_NETWORK_PARAMETERS\n)\nexport const isGetNodeVersionInfo /*      */ = is(\n  InteractionTag.GET_NODE_VERSION_INFO\n)\nexport const isSubscribeEvents /*         */ = is(\n  InteractionTag.SUBSCRIBE_EVENTS\n)\n\n/**\n * Checks if an interaction has a successful status.\n *\n * @param ix The interaction to check\n * @returns True if the interaction status is OK, false otherwise\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { isOk } from \"@onflow/sdk\"\n *\n * // Check if a transaction was successful\n * const response = await fcl.send([\n *   fcl.transaction`transaction { prepare(account: AuthAccount) {} }`\n * ]);\n *\n * if (isOk(response)) {\n *   console.log(\"Transaction was successful\");\n * } else {\n *   console.log(\"Transaction failed\");\n * }\n */\nexport const isOk /*  */ = (ix: Interaction) =>\n  ix.status === InteractionStatus.OK\n\n/**\n * Checks if an interaction has a failed status.\n *\n * @param ix The interaction to check\n * @returns True if the interaction status is BAD, false otherwise\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { isBad, why } from \"@onflow/sdk\"\n *\n * const response = await fcl.send([\n *   fcl.transaction`transaction { prepare(account: AuthAccount) {} }`\n * ]);\n *\n * if (isBad(response)) {\n *   console.log(\"Transaction failed:\", why(response));\n * }\n */\nexport const isBad /* */ = (ix: Interaction) =>\n  ix.status === InteractionStatus.BAD\n\n/**\n * Returns the reason for an interaction failure.\n *\n * @param ix The interaction to get the failure reason from\n * @returns The reason string or undefined if no reason is set\n *\n * @example\n * import { Bad, why, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = Bad(initInteraction(), \"Network timeout\");\n * console.log(why(interaction)); // \"Network timeout\"\n *\n * // Used with error handling\n * if (isBad(response)) {\n *   console.error(\"Error occurred:\", why(response));\n * }\n */\nexport const why /*   */ = (ix: Interaction) => ix.reason\n\n/**\n * Checks if an object is an account resolver.\n *\n * @param account The object to check\n * @returns True if the object is an account resolver, false otherwise\n *\n * @example\n * import { isAccount, authorization } from \"@onflow/sdk\"\n *\n * const authz = authorization(\"0x123\", signingFunction);\n * const accountResolver = { kind: \"ACCOUNT\", addr: \"0x123\" };\n * const regularObject = { name: \"test\" };\n *\n * console.log(isAccount(accountResolver)); // true\n * console.log(isAccount(regularObject)); // false\n */\nexport const isAccount /*  */ = (account: Record<string, any>) =>\n  account.kind === InteractionResolverKind.ACCOUNT\n\n/**\n * Checks if an object is an argument resolver.\n *\n * @param argument The object to check\n * @returns True if the object is an argument resolver, false otherwise\n *\n * @example\n * import { isArgument, arg } from \"@onflow/sdk\"\n *\n * const argumentResolver = { kind: \"ARGUMENT\", value: 42 };\n * const regularObject = { value: 42 };\n *\n * console.log(isArgument(argumentResolver)); // true\n * console.log(isArgument(regularObject)); // false\n *\n * // Check arguments in a script\n * const scriptArgs = [arg(10, t.Int), arg(\"hello\", t.String)];\n * scriptArgs.forEach(arg => {\n *   if (isArgument(arg)) {\n *     console.log(\"Valid argument:\", arg.value);\n *   }\n * });\n */\nexport const isArgument /* */ = (argument: Record<string, any>) =>\n  argument.kind === InteractionResolverKind.ARGUMENT\n\nconst hardMode = (ix: Interaction) => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\ntype MaybePromise<T> = T | Promise<T>\n\nconst recPipe = async (\n  ix: MaybePromise<Interaction>,\n  fns: (InteractionBuilderFn | false | MaybePromise<Interaction>)[] = []\n): Promise<Interaction> => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\n/**\n * Async pipe function to compose interactions.\n *\n * The pipe function is the foundation for composing multiple interaction builder functions together.\n * It sequentially applies builder functions to an interaction, allowing for complex interaction construction.\n * Each function in the pipe receives the result of the previous function and can modify or validate the interaction.\n *\n * Pipe has two main forms:\n * 1. `pipe(builderFunctions)`: Returns a builder function\n * 2. `pipe(interaction, builderFunctions)`: Directly executes the pipe on an interaction\n *\n * @param fns Array of builder functions to apply\n * @returns An interaction builder function when called with just functions, or a Promise<Interaction> when called with an interaction and functions\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Using pipe to create a reusable builder\n * const myTransactionBuilder = fcl.pipe([\n *   fcl.transaction`\n *     transaction(amount: UFix64) {\n *       prepare(account: AuthAccount) {\n *         log(amount)\n *       }\n *     }\n *   `,\n *   fcl.args([fcl.arg(\"10.0\", fcl.t.UFix64)]),\n *   fcl.proposer(fcl.authz),\n *   fcl.payer(fcl.authz),\n *   fcl.authorizations([fcl.authz]),\n *   fcl.limit(100)\n * ]);\n *\n * // Use the builder\n * const interaction = await fcl.build([myTransactionBuilder]);\n *\n * // Pipe is used internally by build() and send()\n * await fcl.send([\n *   fcl.script`access(all) fun main(): Int { return 42 }`\n * ]); // This uses pipe internally\n */\nfunction pipe(fns: (InteractionBuilderFn | false)[]): InteractionBuilderFn\nfunction pipe(\n  ix: MaybePromise<Interaction>,\n  fns: (InteractionBuilderFn | false)[]\n): Promise<Interaction>\nfunction pipe(\n  ...args:\n    | [(InteractionBuilderFn | false)[]]\n    | [MaybePromise<Interaction>, (InteractionBuilderFn | false)[]]\n): Promise<Interaction> | InteractionBuilderFn {\n  const [arg1, arg2] = args\n  if (isArray(arg1)) return (d: Interaction) => pipe(d, arg1)\n\n  const ix = arg1 as MaybePromise<Interaction>\n  const fns = arg2 as ((x: Interaction) => Interaction)[]\n  return recPipe(ix, fns)\n}\nexport {pipe}\n\nconst identity = <T>(v: T, ..._: any[]) => v\n\n/**\n * Gets a value from an interaction object using a dot-notation key path.\n *\n * @param ix The interaction object\n * @param key The dot-notation key path (e.g., \"message.arguments\")\n * @param fallback The fallback value if the key is not found\n * @returns The value at the key path or the fallback value\n *\n * @example\n * import { get, put, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n *\n * // Set a value first\n * put(\"user.name\", \"Alice\")(interaction);\n *\n * // Get the value\n * const userName = get(interaction, \"user.name\"); // \"Alice\"\n * const userAge = get(interaction, \"user.age\", 25); // 25 (fallback)\n *\n * // Get nested values\n * put(\"config.network.url\", \"https://access.mainnet.onflow.org\")(interaction);\n * const networkUrl = get(interaction, \"config.network.url\");\n */\nexport const get = (\n  ix: Interaction,\n  key: string,\n  fallback: any = undefined\n) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\n/**\n * Sets a value in an interaction object using a dot-notation key path.\n *\n * @param key The dot-notation key path (e.g., \"message.arguments\")\n * @param value The value to set\n * @returns A function that takes an interaction and sets the value\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { put } from \"@onflow/sdk\"\n *\n * // Using put in a custom builder function\n * const setCustomData = (data) => put(\"custom.data\", data);\n *\n * await fcl.send([\n *   fcl.script`access(all) fun main(): String { return \"Hello\" }`,\n *   setCustomData({ userId: 123, timestamp: Date.now() })\n * ]);\n *\n * // Direct usage\n * const interaction = initInteraction();\n * put(\"network.endpoint\", \"https://access.mainnet.onflow.org\")(interaction);\n */\nexport const put = (key: string, value: any) => (ix: Interaction) => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\n/**\n * Updates a value in an interaction object using a transformation function.\n *\n * @param key The dot-notation key path to update\n * @param fn The transformation function to apply to the existing value\n * @returns A function that takes an interaction and updates the value\n *\n * @example\n * import { update, put, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n *\n * // Set initial value\n * put(\"counter\", 0)(interaction);\n *\n * // Increment counter\n * const increment = update(\"counter\", (current) => (current || 0) + 1);\n * increment(interaction); // counter becomes 1\n * increment(interaction); // counter becomes 2\n *\n * // Update array\n * put(\"tags\", [\"flow\", \"blockchain\"])(interaction);\n * const addTag = update(\"tags\", (tags) => [...(tags || []), \"web3\"]);\n * addTag(interaction); // tags becomes [\"flow\", \"blockchain\", \"web3\"]\n */\nexport const update =\n  <T>(key: string, fn: (v: T | T[], ...args: any[]) => T | T[] = identity) =>\n  (ix: Interaction) => {\n    ix.assigns[key] = fn(ix.assigns[key], ix)\n    return Ok(ix)\n  }\n\n/**\n * Removes a property from an interaction object using a dot-notation key path.\n *\n * @param key The dot-notation key path to remove\n * @returns A function that takes an interaction and removes the property\n *\n * @example\n * import { destroy, put, get, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n *\n * // Set some values\n * put(\"user.name\", \"Alice\")(interaction);\n * put(\"user.email\", \"alice@example.com\")(interaction);\n * put(\"user.temp\", \"temporary data\")(interaction);\n *\n * console.log(get(interaction, \"user.temp\")); // \"temporary data\"\n *\n * // Remove temporary data\n * destroy(\"user.temp\")(interaction);\n *\n * console.log(get(interaction, \"user.temp\")); // undefined\n * console.log(get(interaction, \"user.name\")); // \"Alice\" (still exists)\n */\nexport const destroy = (key: string) => (ix: Interaction) => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {\n  pipe,\n  initInteraction,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\n\n/**\n * A builder function that creates an interaction from an array of builder functions.\n *\n * The build function takes an array of builder functions and applies them to create a complete interaction object. This is the foundation for constructing all interactions in Flow, whether they're scripts, transactions, or queries.\n *\n * Each builder function modifies specific parts of the interaction object, such as adding Cadence code, arguments, authorization details, or other configuration.\n *\n * @param fns The functions to apply to the interaction\n * @returns A promise of an interaction\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Build a script interaction\n * const scriptInteraction = await fcl.build([\n *   fcl.script`\n *     access(all) fun main(a: Int, b: Int): Int {\n *       return a + b\n *     }\n *   `,\n *   fcl.args([\n *     fcl.arg(1, fcl.t.Int),\n *     fcl.arg(2, fcl.t.Int)\n *   ])\n * ]);\n *\n * // Build a transaction interaction\n * const txInteraction = await fcl.build([\n *   fcl.transaction`\n *     transaction(name: String) {\n *       prepare(account: AuthAccount) {\n *         log(\"Hello, \" + name)\n *       }\n *     }\n *   `,\n *   fcl.args([fcl.arg(\"World\", fcl.t.String)]),\n *   fcl.proposer(proposerAuthz),\n *   fcl.payer(payerAuthz),\n *   fcl.authorizations([authorizerAuthz]),\n *   fcl.limit(100)\n * ]);\n */\nexport function build(\n  fns: (InteractionBuilderFn | false)[] = []\n): Promise<Interaction> {\n  return pipe(initInteraction(), fns)\n}\n","const DEFAULT_RESPONSE = {\n  tag: null,\n  transaction: null,\n  transactionStatus: null,\n  transactionId: null,\n  encodedData: null,\n  events: null,\n  event: null,\n  accountStatusEvent: null,\n  account: null,\n  block: null,\n  blockHeader: null,\n  blockDigest: null,\n  latestBlock: null,\n  collection: null,\n  networkParameters: null,\n  streamConnection: null,\n  heartbeat: null,\n  nodeVersionInfo: null,\n}\n\n/**\n * Creates a default response object\n *\n * @returns A default response object\n *\n * @example\n * import { response } from \"@onflow/sdk\"\n *\n * // Create a default response object\n * const defaultResponse = response();\n * console.log(defaultResponse.transaction); // null\n * console.log(defaultResponse.account); // null\n * console.log(defaultResponse.block); // null\n *\n * // Typically used internally by the SDK to initialize responses\n * // You'll rarely need to use this directly in application code\n */\nexport const response = () => ({...DEFAULT_RESPONSE})\n","import {\n  pipe,\n  Ok,\n  makeGetBlock,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the interaction to get the latest block.\n *\n * Use with 'fcl.atBlockId()' and 'fcl.atBlockHeight()' when building the interaction to get information for older blocks.\n *\n * Consider using the pre-built interaction 'fcl.block(options)' if you do not need to pair with any other builders.\n *\n * Block ID is SHA3-256 hash of the entire block payload. This hash is stored as an ID field on any block response object (ie. response from 'GetLatestBlock').\n *\n * Block height expresses the height of the block on the chain. The latest block height increases by one for every valid block produced.\n *\n * @param isSealed If the latest block should be sealed or not. See block states\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * const latestSealedBlock = await fcl.send([\n *   fcl.getBlock(true) // isSealed = true\n * ]).then(fcl.decode);\n */\nexport function getBlock(\n  isSealed: boolean | null = null\n): InteractionBuilderFn {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    },\n  ])\n}\n","import {sansPrefix} from \"@onflow/util-address\"\nimport {\n  InteractionBuilderFn,\n  makeGetAccount,\n  Ok,\n  pipe,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the interaction to get an account by address.\n *\n * Consider using the pre-built interaction 'fcl.account(address)' if you do not need to pair with any other builders.\n *\n * Account address is a unique account identifier. Be mindful about the '0x' prefix, you should use the prefix as a default representation but be careful and safely handle user inputs without the prefix.\n *\n * @param address Address of the user account with or without a prefix (both formats are supported)\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // somewhere in an async function\n * // fcl.account is the same as this function\n * const getAccount = async (address) => {\n *   const account = await fcl.send([fcl.getAccount(address)]).then(fcl.decode);\n *   return account;\n * };\n */\nexport function getAccount(addr: string): InteractionBuilderFn {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    },\n  ])\n}\n","import EventEmitter from \"events\"\nimport {StreamConnection} from \"@onflow/typedefs\"\n\ntype DecodeResponseFn = (\n  response: Record<string, any>,\n  customDecoders?: Record<string, any>\n) => Promise<any>\n\n/**\n * Pipes a generic stream of data into a granular stream of decoded data.\n *\n * The data is decoded per channel and emitted in order. This function is particularly useful\n * for handling streaming responses from Flow Access API, such as event subscriptions or\n * real-time block updates. It ensures that data is properly decoded and emitted in the\n * correct order while maintaining the stream's event-driven nature.\n *\n * All topics for a given message will be emitted synchronously before moving on to the next\n * message. The internal queue ensures that data is emitted in order and avoids race conditions\n * when decoding.\n *\n * @param stream The raw stream connection to decode\n * @param decodeResponse Function to decode response data\n * @param customDecoders Optional custom decoders for specific data types\n * @returns A new stream connection with decoded data\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Create a subscription stream\n * const rawStream = await fcl.send([\n *   fcl.subscribeEvents({\n *     eventTypes: [\"flow.AccountCreated\"],\n *     startHeight: 0\n *   })\n * ]);\n *\n * // Decode the stream data\n * const decodedStream = fcl.decodeStream(\n *   rawStream,\n *   fcl.decodeResponse,\n *   {}\n * );\n *\n * // Listen for decoded events\n * decodedStream.on(\"events\", (events) => {\n *   events.forEach(event => {\n *     console.log(\"Decoded event:\", event);\n *   });\n * });\n *\n * decodedStream.on(\"error\", (error) => {\n *   console.error(\"Stream error:\", error);\n * });\n *\n * decodedStream.on(\"close\", () => {\n *   console.log(\"Stream closed\");\n * });\n */\nexport const decodeStream = (\n  stream: StreamConnection<{data: any}>,\n  decodeResponse: DecodeResponseFn,\n  customDecoders?: Record<string, any>\n): StreamConnection<any> => {\n  const newStream = new EventEmitter()\n  let queue = taskQueue()\n\n  // Data is separated by topic & the decoded data is emitted in order\n  // All topics for a given message will be emitted synchronously before moving on to the next message\n  // The streamReady promise ensures that the data is emitted in order and avoids race conditions when decoding\n  stream.on(\"data\", async data => {\n    const topics = Object.keys(data).filter(\n      key => data[key] != null && key !== \"tag\"\n    )\n\n    let newDataPromise = Promise.all(\n      topics.map(async channel => {\n        const partialResponse = {\n          [channel]: data[channel],\n        }\n        const message = await decodeResponse(partialResponse, customDecoders)\n        return {\n          channel,\n          message,\n        }\n      })\n    )\n\n    queue.push(async () => {\n      // Emit the new data\n      const newData = await newDataPromise\n      newData.forEach(({channel, message}) => {\n        newStream.emit(channel, message)\n      })\n    })\n  })\n\n  // Relay events from the original stream\n  // These events are delivered in order as well so that the stream will\n  // not emit more data after it has announced a contradictory state\n  function relayEvent(event: any) {\n    stream.on(event, (message: any) => {\n      queue.push(async () => {\n        newStream.emit(event, message)\n      })\n    })\n  }\n  relayEvent(\"close\")\n  relayEvent(\"error\")\n\n  return {\n    on(channel: string, callback: any) {\n      newStream.on(channel, callback)\n      return this\n    },\n    off(channel: string, callback: any) {\n      newStream.off(channel, callback)\n      return this\n    },\n    close: () => {\n      stream.close()\n    },\n  }\n}\n\nfunction taskQueue() {\n  let queue: (() => Promise<any>)[] = [] as any as (() => Promise<any>)[]\n  let running = false\n\n  async function run() {\n    if (running) return\n    running = true\n    while (queue.length > 0) {\n      const task = queue.shift()\n      await task?.()\n    }\n    running = false\n  }\n\n  return {\n    push: (task: () => Promise<any>) => {\n      queue.push(task)\n      run()\n    },\n  }\n}\n","import {log} from \"@onflow/util-logger\"\nimport {decodeStream} from \"./decode-stream\"\n\ntype DecoderFunction = (\n  value: any,\n  decoders: DecoderMap,\n  stack: any[]\n) => Promise<any>\n\ninterface DecoderMap {\n  [key: string]: DecoderFunction\n}\n\ninterface DecodeInstructions {\n  type: string\n  value?: any\n}\n\ninterface CompositeField {\n  name: string\n  value: DecodeInstructions\n}\n\ninterface CompositeInstruction {\n  id?: string\n  fields: CompositeField[]\n}\n\ninterface KeyValuePair {\n  key: DecodeInstructions\n  value: DecodeInstructions\n}\n\ninterface InclusiveRangeValue {\n  start?: DecodeInstructions\n  end?: DecodeInstructions\n  step?: DecodeInstructions\n  [key: string]: any\n}\n\ninterface FlowEvent {\n  type: string\n  transactionId: string\n  transactionIndex: number\n  eventIndex: number\n  payload: DecodeInstructions\n}\n\ninterface FlowBlockEvent extends FlowEvent {\n  blockId: string\n  blockHeight: number\n  blockTimestamp: string\n}\n\ninterface FlowTransactionStatus {\n  blockId: string\n  status: number\n  statusCode: number\n  errorMessage: string\n  events: FlowEvent[]\n}\n\ninterface FlowResponse {\n  encodedData?: DecodeInstructions\n  transactionStatus?: FlowTransactionStatus\n  transaction?: any\n  events?: FlowBlockEvent[]\n  account?: any\n  block?: any\n  blockHeader?: any\n  blockDigest?: any\n  event?: any\n  accountStatusEvent?: any\n  latestBlock?: any\n  transactionId?: string\n  collection?: any\n  networkParameters?: {\n    chainId: string\n  }\n  streamConnection?: any\n  heartbeat?: any\n  nodeVersionInfo?: any\n}\n\nconst latestBlockDeprecationNotice = (): void => {\n  log.deprecate({\n    pkg: \"@onflow/decode\",\n    subject:\n      \"Operating upon data of the latestBlock field of the response object\",\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\",\n  })\n}\n\nconst decodeNumber = async (\n  num: any,\n  _: DecoderMap,\n  stack: any[]\n): Promise<number> => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async <T>(i: T): Promise<T> => i\n\nconst decodeVoid = async (): Promise<null> => null\n\nconst decodeType = async (type: any): Promise<any> => {\n  return type.staticType\n}\n\nconst decodeOptional = async (\n  optional: any,\n  decoders: DecoderMap,\n  stack: any[]\n): Promise<any> =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeArray = async (\n  array: DecodeInstructions[],\n  decoders: DecoderMap,\n  stack: any[]\n): Promise<any[]> =>\n  await Promise.all(\n    array.map(\n      v =>\n        new Promise(async res =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (\n  dictionary: KeyValuePair[],\n  decoders: DecoderMap,\n  stack: any[]\n): Promise<Record<string, any>> =>\n  await dictionary.reduce(\n    async (acc, v) => {\n      acc = await acc\n      acc[await recurseDecode(v.key, decoders, [...stack, v.key])] =\n        await recurseDecode(v.value, decoders, [...stack, v.key])\n      return acc\n    },\n    Promise.resolve({}) as any\n  )\n\nconst decodeComposite = async (\n  composite: CompositeInstruction,\n  decoders: DecoderMap,\n  stack: any[]\n): Promise<any> => {\n  const decoded = await composite.fields.reduce(\n    async (acc, v) => {\n      acc = await acc\n      acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n      return acc\n    },\n    Promise.resolve({}) as any\n  )\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst decodeInclusiveRange = async (\n  range: InclusiveRangeValue,\n  decoders: DecoderMap,\n  stack: any[]\n): Promise<Record<string, any>> => {\n  // Recursive decode for start, end, and step\n  // We don't do all fields just in case there are future API changes\n  // where fields added and are not Cadence values\n  const keys = [\"start\", \"end\", \"step\"]\n  const decoded = await Object.keys(range).reduce(\n    async (acc, key) => {\n      acc = await acc\n      if (keys.includes(key)) {\n        acc[key] = await recurseDecode(range[key], decoders, [...stack, key])\n      }\n      return acc\n    },\n    Promise.resolve({}) as any\n  )\n  return decoded\n}\n\nconst defaultDecoders: DecoderMap = {\n  UInt: decodeImplicit,\n  Int: decodeImplicit,\n  UInt8: decodeImplicit,\n  Int8: decodeImplicit,\n  UInt16: decodeImplicit,\n  Int16: decodeImplicit,\n  UInt32: decodeImplicit,\n  Int32: decodeImplicit,\n  UInt64: decodeImplicit,\n  Int64: decodeImplicit,\n  UInt128: decodeImplicit,\n  Int128: decodeImplicit,\n  UInt256: decodeImplicit,\n  Int256: decodeImplicit,\n  Word8: decodeImplicit,\n  Word16: decodeImplicit,\n  Word32: decodeImplicit,\n  Word64: decodeImplicit,\n  Word128: decodeImplicit,\n  Word256: decodeImplicit,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeImplicit,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodeImplicit,\n  Capability: decodeImplicit,\n  InclusiveRange: decodeInclusiveRange,\n}\n\nconst decoderLookup = (decoders: DecoderMap, lookup: any): any => {\n  const found = Object.keys(decoders).find(decoder => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (\n  decodeInstructions: DecodeInstructions,\n  decoders: DecoderMap,\n  stack: any[]\n): Promise<any> => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\n/**\n * @description - Decodes a response from Flow into JSON\n * @param decodeInstructions - The response object from Flow\n * @param customDecoders - An object of custom decoders\n * @param stack - The stack of the current decoding\n * @returns - The decoded response\n */\nexport const decode = async (\n  decodeInstructions: DecodeInstructions,\n  customDecoders: DecoderMap = {},\n  stack: any[] = []\n): Promise<any> => {\n  // Filter out all default decoders which are overridden by a custom decoder regex\n  const filteredDecoders = Object.keys(defaultDecoders)\n    .filter(\n      decoder =>\n        !Object.keys(customDecoders).find(customDecoder =>\n          new RegExp(customDecoder).test(decoder)\n        )\n    )\n    .reduce((decoders, decoderKey) => {\n      decoders[decoderKey] = defaultDecoders[decoderKey]\n      return decoders\n    }, customDecoders)\n\n  const decoders = {\n    ...filteredDecoders,\n    ...customDecoders,\n  }\n  return recurseDecode(decodeInstructions, decoders, stack)\n}\n\n/**\n * Decodes a response from Flow into JSON\n *\n * @param response The response object from Flow\n * @param customDecoders An object of custom decoders\n * @returns The decoded response\n */\nexport const decodeResponse = async (\n  response: FlowResponse,\n  customDecoders: DecoderMap = {}\n): Promise<any> => {\n  if (response.encodedData) {\n    return decode(response.encodedData, customDecoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, customDecoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, customDecoders),\n        }\n      })\n    )\n  } else if (response.event) {\n    const {payload, ...rest} = response.event\n    return {\n      ...rest,\n      data: await decode(payload, customDecoders),\n    }\n  } else if (response.accountStatusEvent) {\n    const {payload, ...rest} = response.accountStatusEvent\n    return {\n      ...rest,\n      data: await decode(payload, customDecoders),\n    }\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.blockDigest) {\n    return response.blockDigest\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  } else if (response.collection) {\n    return response.collection\n  } else if (response.networkParameters) {\n    const prefixRegex = /^flow-/\n    const rawChainId = response.networkParameters.chainId\n    let formattedChainId: string\n\n    if (rawChainId === \"flow-emulator\") {\n      formattedChainId = \"local\"\n    } else if (prefixRegex.test(rawChainId)) {\n      formattedChainId = rawChainId.replace(prefixRegex, \"\")\n    } else {\n      formattedChainId = rawChainId\n    }\n\n    return {\n      chainId: formattedChainId,\n    }\n  } else if (response.streamConnection) {\n    return decodeStream(\n      response.streamConnection,\n      decodeResponse,\n      customDecoders\n    )\n  } else if (response.heartbeat) {\n    return response.heartbeat\n  } else if (response.nodeVersionInfo) {\n    return response.nodeVersionInfo\n  }\n\n  return null\n}\n","export class SubscriptionsNotSupportedError extends Error {\n  constructor() {\n    super(\n      `The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via \\`sdk.transport\\` configuration), ensure that it implements the subscribe method.`\n    )\n    this.name = \"SubscriptionsNotSupportedError\"\n  }\n}\n","import {httpTransport as defaultTransport} from \"@onflow/transport-http\"\nimport {SdkTransport} from \"@onflow/typedefs\"\nimport {SubscriptionsNotSupportedError} from \"../transport/subscribe/errors\"\n\n/**\n * Get the SDK transport object, either from the provided override or from the global config.\n *\n * The transport object handles communication with Flow Access Nodes, including sending transactions,\n * executing scripts, and managing subscriptions. This function resolves the transport configuration\n * from various sources with the following priority order:\n * 1. Provided override parameters\n * 2. Global SDK configuration\n * 3. Default HTTP transport\n *\n * @param override Override default configuration with custom transport or send function\n * @param override.send Custom send function for backwards compatibility with legacy configurations\n * @param override.transport Complete transport object with both send and subscribe capabilities\n * @returns The resolved SDK transport object with send and subscribe methods\n *\n * @throws {Error} When both transport and send options are provided simultaneously\n * @throws {SubscriptionsNotSupportedError} When attempting to subscribe using a legacy send-only transport\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { httpTransport } from \"@onflow/transport-http\";\n *\n * // Get default transport (usually HTTP transport)\n * const defaultTransport = await fcl.getTransport();\n *\n * // Override with custom transport\n * const customTransport = await fcl.getTransport({\n *   transport: httpTransport({\n *     accessNode: \"https://rest-mainnet.onflow.org\",\n *     timeout: 10000\n *   })\n * });\n */\nexport function getGlobalTransport(cfg: Record<string, any>): SdkTransport {\n  const transportOrSend = (cfg[\"sdk.transport\"] ||\n    cfg[\"sdk.send\"] ||\n    defaultTransport) as SdkTransport | SdkTransport[\"send\"]\n\n  // Backwards compatibility with legacy send function\n  if (!isTransportObject(transportOrSend)) {\n    return {\n      send: transportOrSend,\n      subscribe: () => {\n        throw new SubscriptionsNotSupportedError()\n      },\n    }\n  }\n\n  return transportOrSend\n}\n\nfunction isTransportObject(transport: any): transport is SdkTransport {\n  return (\n    transport.send !== undefined &&\n    transport.subscribe !== undefined &&\n    typeof transport.send === \"function\" &&\n    typeof transport.subscribe === \"function\"\n  )\n}\n","import {config} from \"@onflow/config\"\nimport {SdkContext} from \"./context\"\nimport {getGlobalTransport} from \"./get-global-transport\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {log} from \"@onflow/util-logger\"\n\nconst DEFAULT_COMPUTE_LIMIT = 10\n\nlet cachedContext: Promise<SdkContext> | undefined\n\nexport async function createGlobalContext(): Promise<SdkContext> {\n  const globalConfig = await config().all()\n\n  return {\n    get transport() {\n      return getGlobalTransport(globalConfig)\n    },\n    get accessNodeUrl() {\n      const accessNodeUrl = globalConfig[\"accessNode.api\"] as string | undefined\n      invariant(\n        !!accessNodeUrl,\n        `Either opts.node or \"accessNode.api\" in config must be defined.`\n      )\n      return accessNodeUrl\n    },\n    get computeLimit() {\n      const computeLimit = globalConfig[\"fcl.limit\"] as number | undefined\n      if (!computeLimit) {\n        log.deprecate({\n          pkg: \"FCL/SDK\",\n          subject:\n            \"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)\",\n          transition:\n            \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit\",\n        })\n        return DEFAULT_COMPUTE_LIMIT\n      }\n      return computeLimit\n    },\n    get customResolver() {\n      const customResolver = globalConfig[\"sdk.resolve\"] as\n        | ((args: any) => Promise<any>)\n        | undefined\n      return customResolver\n    },\n    get customDecoders() {\n      return Object.fromEntries(\n        Object.entries(globalConfig).filter(([key]) =>\n          key.startsWith(\"decoder.\")\n        )\n      ) as Record<string, (data: any) => any>\n    },\n    get contracts() {\n      return Object.fromEntries(\n        Object.entries(globalConfig)\n          .filter(([key]) => key.startsWith(\"system.contracts.\"))\n          .map(([key, value]) => [key.replace(\"system.contracts.\", \"\"), value])\n      ) as Record<string, string>\n    },\n    get debug() {\n      return Object.fromEntries(\n        Object.entries(globalConfig).filter(([key]) => key.startsWith(\"debug.\"))\n      )\n    },\n    get legacyContractIdentifiers() {\n      return Object.fromEntries(\n        Object.entries(globalConfig).filter(([key]) => key.startsWith(\"0x\"))\n      ) as Record<string, string>\n    },\n  }\n}\n\nexport async function getGlobalContext(): Promise<SdkContext> {\n  if (!cachedContext) {\n    // Watch for changes in the config and recreate the context if needed\n    config().subscribe(() => {\n      cachedContext = createGlobalContext()\n    })\n\n    // Create the context for the first time\n    cachedContext = createGlobalContext()\n  }\n  return cachedContext instanceof Promise ? cachedContext : cachedContext\n}\n\nexport function withGlobalContext<\n  T extends (context: SdkContext) => (...args: any[]) => Promise<any>,\n>(\n  fn: T\n): (\n  ...args: Parameters<ReturnType<T>>\n) => Promise<Awaited<ReturnType<ReturnType<T>>>> {\n  return async (\n    ...args: Parameters<ReturnType<T>>\n  ): Promise<Awaited<ReturnType<ReturnType<T>>>> => {\n    const context = await getGlobalContext()\n    return fn(context)(...args)\n  }\n}\n","import {isTransaction, isScript, get} from \"../interaction/interaction\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport * as logger from \"@onflow/util-logger\"\nimport {withPrefix} from \"@onflow/util-address\"\nimport {Interaction} from \"@onflow/typedefs\"\nimport {SdkContext} from \"../context/context\"\nimport {withGlobalContext} from \"../context/global\"\n\nconst isFn = (v: any): v is Function => typeof v === \"function\"\nconst isString = (v: any): v is string => typeof v === \"string\"\n\nconst oldIdentifierPatternFn = (): RegExp => /\\b(0x\\w+)\\b/g\nfunction isOldIdentifierSyntax(\n  cadence: string,\n  legacyContractIdentifiers: Record<string, string> = {}\n): boolean {\n  const matches = cadence.matchAll(oldIdentifierPatternFn())\n  for (const match of matches) {\n    const identifier = match[0]\n    // Only return true if we have a legacy identifier that needs replacement\n    if (legacyContractIdentifiers[identifier]) {\n      return true\n    }\n  }\n  return false\n}\n\nconst newIdentifierPatternFn = (): RegExp => /import\\s+\"(\\w+)\"/g\nfunction isNewIdentifierSyntax(cadence: string): boolean {\n  return newIdentifierPatternFn().test(cadence)\n}\n\nfunction getContractIdentifierSyntaxMatches(\n  cadence: string\n): IterableIterator<RegExpMatchArray> {\n  return cadence.matchAll(newIdentifierPatternFn())\n}\n\nexport function createResolveCadence(context: SdkContext) {\n  return async function resolveCadence(ix: Interaction): Promise<Interaction> {\n    if (!isTransaction(ix) && !isScript(ix)) return ix\n\n    var cadence = get(ix, \"ix.cadence\")\n\n    invariant(\n      isFn(cadence) || isString(cadence),\n      \"Cadence needs to be a function or a string.\"\n    )\n    if (isFn(cadence)) cadence = await cadence({} as Record<string, never>)\n    invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n    invariant(\n      !isOldIdentifierSyntax(cadence, context.legacyContractIdentifiers) ||\n        !isNewIdentifierSyntax(cadence),\n      \"Both account identifier and contract identifier syntax not simultaneously supported.\"\n    )\n\n    if (isOldIdentifierSyntax(cadence, context.legacyContractIdentifiers)) {\n      cadence = Object.entries(context.legacyContractIdentifiers || {}).reduce(\n        (cadence, [key, value]) => {\n          const regex = new RegExp(\"(\\\\b\" + key + \"\\\\b)\", \"g\")\n          return cadence.replace(regex, value)\n        },\n        cadence\n      )\n    }\n\n    if (isNewIdentifierSyntax(cadence)) {\n      for (const [\n        fullMatch,\n        contractName,\n      ] of getContractIdentifierSyntaxMatches(cadence)) {\n        const address: string | null = context.contracts[contractName] || null\n        if (address) {\n          cadence = cadence.replace(\n            fullMatch,\n            `import ${contractName} from ${withPrefix(address)}`\n          )\n        } else {\n          logger.log({\n            title: \"Contract Placeholder not found\",\n            message: `Cannot find a value for contract placeholder ${contractName}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,\n            level: logger.LEVELS.warn,\n          })\n        }\n      }\n    }\n\n    // We need to move this over in any case.\n    ix.message.cadence = cadence\n\n    return ix\n  }\n}\n\nexport const resolveCadence =\n  /* @__PURE__ */ withGlobalContext(createResolveCadence)\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\n\ninterface Argument {\n  tempId: string\n  value: any\n  xform: any\n  resolveArgument?: () => Promise<Argument>\n  asArgument?: any\n}\n\nconst isFn = (v: any): v is Function => typeof v === \"function\"\n\nfunction cast(arg: Argument): any {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nasync function handleArgResolution(\n  arg: Argument,\n  depth = 3\n): Promise<Argument> {\n  invariant(\n    depth > 0,\n    `Argument Resolve Recursion Limit Exceeded for Arg: ${arg.tempId}`\n  )\n\n  if (isFn(arg.resolveArgument)) {\n    const resolvedArg = await arg.resolveArgument()\n    return handleArgResolution(resolvedArg, depth - 1)\n  } else {\n    return arg\n  }\n}\n\n/**\n * Resolves transaction arguments by evaluating argument functions and converting them to appropriate types.\n *\n * This function processes all arguments in a transaction or script interaction, calling their transform functions\n * to convert JavaScript values into Cadence-compatible argument formats that can be sent to the Flow network.\n *\n * The resolution process includes:\n * - Calling argument resolver functions if present\n * - Applying type transformations using the xform field\n * - Handling recursive argument resolution up to a depth limit\n *\n * @param ix The interaction object containing arguments to resolve\n * @returns The interaction with resolved arguments ready for network transmission\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Arguments are automatically resolved during send()\n * await fcl.send([\n *   fcl.script`\n *     access(all) fun main(amount: UFix64, recipient: Address): String {\n *       return \"Sending \".concat(amount.toString()).concat(\" to \").concat(recipient.toString())\n *     }\n *   `,\n *   fcl.args([\n *     fcl.arg(\"100.0\", fcl.t.UFix64),    // Will be resolved to Cadence UFix64\n *     fcl.arg(\"0x01\", fcl.t.Address)     // Will be resolved to Cadence Address\n *   ])\n * ]).then(fcl.decode);\n *\n * // The resolveArguments function handles the conversion automatically\n */\nexport async function resolveArguments(ix: Interaction): Promise<Interaction> {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      const res = await handleArgResolution(arg as Argument)\n      ix.arguments[id].asArgument = cast(res)\n    }\n  }\n\n  return ix\n}\n","import {SHA3} from \"sha3\"\nimport {encode, Buffer, EncodeInput} from \"@onflow/rlp\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\n/**\n * Encodes a transaction payload for signing.\n *\n * This function takes a transaction object and encodes it into a format suitable for signing.\n * The encoded payload contains all the transaction details except for the signatures.\n *\n * @param tx The transaction object to encode\n * @returns A hex-encoded string representing the transaction payload\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { encodeTransactionPayload } from \"@onflow/sdk\"\n *\n * // Build a transaction\n * const transaction = await fcl.build([\n *   fcl.transaction`\n *     transaction(amount: UFix64) {\n *       prepare(account: AuthAccount) {\n *         log(\"Transferring: \".concat(amount.toString()))\n *       }\n *     }\n *   `,\n *   fcl.args([fcl.arg(\"10.0\", fcl.t.UFix64)]),\n *   fcl.proposer(proposerAuthz),\n *   fcl.payer(payerAuthz),\n *   fcl.authorizations([authorizerAuthz]),\n *   fcl.limit(100)\n * ]);\n *\n * // Encode the transaction payload for signing\n * const encodedPayload = encodeTransactionPayload(transaction);\n * console.log(\"Encoded payload:\", encodedPayload);\n * // Returns a hex string like \"f90145b90140...\"\n */\nexport const encodeTransactionPayload = (tx: Transaction) =>\n  prependTransactionDomainTag(rlpEncode(preparePayload(tx)))\n\n/**\n * Encodes a complete transaction envelope including payload and signatures.\n *\n * This function encodes the full transaction including both the payload and all signatures.\n * This is the final step before submitting a transaction to the Flow network.\n *\n * @param tx The transaction object to encode\n * @returns A hex-encoded string representing the complete transaction envelope\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { encodeTransactionEnvelope } from \"@onflow/sdk\"\n *\n * // Assuming you have a fully built and signed transaction\n * const signedTransaction = await fcl.build([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Hello, Flow!\")\n *       }\n *     }\n *   `,\n *   fcl.proposer(authz),\n *   fcl.payer(authz),\n *   fcl.authorizations([authz]),\n *   fcl.limit(100)\n * ]);\n *\n * // Add signatures to the transaction (this is usually done automatically)\n * // signedTransaction.payloadSigs = [...];\n * // signedTransaction.envelopeSigs = [...];\n *\n * // Encode the complete transaction envelope\n * const encodedEnvelope = encodeTransactionEnvelope(signedTransaction);\n * console.log(\"Encoded envelope:\", encodedEnvelope);\n * // Returns a hex string ready for network submission\n */\nexport const encodeTransactionEnvelope = (tx: Transaction) =>\n  prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)))\n\n/**\n * Encodes a transaction ID from a voucher by computing its hash.\n *\n * A voucher is an intermediary object that contains transaction details before final encoding.\n * This function computes the transaction ID that would result from submitting the transaction.\n *\n * @param voucher The voucher object containing transaction details\n * @returns A hex-encoded string representing the transaction ID\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { encodeTxIdFromVoucher } from \"@onflow/sdk\"\n *\n * // Create a voucher (usually done internally by FCL)\n * const voucher = {\n *   cadence: `\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Hello\")\n *       }\n *     }\n *   `,\n *   arguments: [],\n *   refBlock: \"abc123...\",\n *   computeLimit: 100,\n *   proposalKey: {\n *     address: \"0x123456789abcdef0\",\n *     keyId: 0,\n *     sequenceNum: 42\n *   },\n *   payer: \"0x123456789abcdef0\",\n *   authorizers: [\"0x123456789abcdef0\"],\n *   payloadSigs: [],\n *   envelopeSigs: []\n * };\n *\n * // Calculate the transaction ID\n * const txId = encodeTxIdFromVoucher(voucher);\n * console.log(\"Transaction ID:\", txId);\n * // Returns a transaction ID that can be used to track the transaction\n */\nexport const encodeTxIdFromVoucher = (voucher: Voucher) =>\n  sha3_256(rlpEncode(prepareVoucher(voucher)))\n\nconst rightPaddedHexBuffer = (value: string, pad: number) =>\n  Buffer.from(value.padEnd(pad * 2, \"0\"), \"hex\")\n\nconst leftPaddedHexBuffer = (value: string, pad: number) =>\n  Buffer.from(value.padStart(pad * 2, \"0\"), \"hex\")\n\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(\n  Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"),\n  32\n).toString(\"hex\")\nconst prependTransactionDomainTag = (tx: string) => TRANSACTION_DOMAIN_TAG + tx\n\nconst addressBuffer = (addr: string) => leftPaddedHexBuffer(addr, 8)\n\nconst blockBuffer = (block: string) => leftPaddedHexBuffer(block, 32)\n\nconst argumentToString = (arg: Record<string, any>) =>\n  Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = (script: string) => Buffer.from(script, \"utf8\")\nconst signatureBuffer = (signature: string) => Buffer.from(signature, \"hex\")\nconst extensionBuffer = (ext?: string) => {\n  if (ext == null) return undefined\n  return Buffer.from(ext, \"hex\")\n}\n\nconst rlpEncode = (v: EncodeInput) => {\n  return encode(v).toString(\"hex\")\n}\n\nconst sha3_256 = (msg: string) => {\n  const sha = new SHA3(256)\n  sha.update(Buffer.from(msg, \"hex\"))\n  return sha.digest().toString(\"hex\")\n}\n\nconst preparePayload = (tx: Transaction) => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.cadence || \"\"),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock || \"\"),\n    tx.computeLimit,\n    addressBuffer(sansPrefix(tx.proposalKey.address || \"\")),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(sansPrefix(tx.payer)),\n    tx.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer))),\n  ]\n}\n\nconst prepareEnvelope = (tx: Transaction) => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = (tx: Transaction) => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    ?.map((sig: Sig) => {\n      return {\n        signerIndex: signers.get(sansPrefix(sig.address)) || \"\",\n        keyId: sig.keyId,\n        sig: sig.sig,\n        sigExt: extensionBuffer(sig.extensionData),\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n\n      return 0\n    })\n    .map(sig => {\n      const base: any[] = [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n      if (sig.sigExt != null) base.push(sig.sigExt)\n      return base\n    })\n}\n\nconst collectSigners = (tx: Voucher | Transaction) => {\n  const signers = new Map<string, number>()\n  let i = 0\n\n  const addSigner = (addr: string) => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  if (tx.proposalKey.address) {\n    addSigner(tx.proposalKey.address)\n  }\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst prepareVoucher = (voucher: Voucher) => {\n  validateVoucher(voucher)\n\n  const signers = collectSigners(voucher)\n\n  const prepareSigs = (sigs: Sig[]) => {\n    return sigs\n      .map(({address, keyId, sig, extensionData}) => {\n        return {\n          signerIndex: signers.get(sansPrefix(address)) || \"\",\n          keyId,\n          sig,\n          sigExt: extensionBuffer(extensionData),\n        }\n      })\n      .sort((a, b) => {\n        if (a.signerIndex > b.signerIndex) return 1\n        if (a.signerIndex < b.signerIndex) return -1\n        if (a.keyId > b.keyId) return 1\n        if (a.keyId < b.keyId) return -1\n\n        return 0\n      })\n      .map(sig => {\n        const base: any[] = [\n          sig.signerIndex,\n          sig.keyId,\n          signatureBuffer(sig.sig),\n        ]\n        if (sig.sigExt != null) base.push(sig.sigExt)\n        return base\n      })\n  }\n\n  return [\n    [\n      scriptBuffer(voucher.cadence),\n      voucher.arguments.map(argumentToString),\n      blockBuffer(voucher.refBlock),\n      voucher.computeLimit,\n      addressBuffer(sansPrefix(voucher.proposalKey.address)),\n      voucher.proposalKey.keyId,\n      voucher.proposalKey.sequenceNum,\n      addressBuffer(sansPrefix(voucher.payer)),\n      voucher.authorizers.map(authorizer =>\n        addressBuffer(sansPrefix(authorizer))\n      ),\n    ],\n    prepareSigs(voucher.payloadSigs),\n    prepareSigs(voucher.envelopeSigs),\n  ]\n}\n\nconst validatePayload = (tx: Transaction) => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = (tx: Transaction) => {\n  payloadSigsFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs?.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst validateVoucher = (voucher: Voucher) => {\n  payloadFields.forEach(field => checkField(voucher, field))\n  proposalKeyFields.forEach(field =>\n    checkField(voucher.proposalKey, field, \"proposalKey\")\n  )\n  payloadSigsFields.forEach(field => checkField(voucher, field))\n  voucher.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n  envelopeSigsFields.forEach(field => checkField(voucher, field))\n  voucher.envelopeSigs.forEach((sig, index) => {\n    envelopeSigFields.forEach(field =>\n      checkField(sig, field, \"envelopeSigs\", index)\n    )\n  })\n}\n\nconst isNumber = (v: any): v is number => typeof v === \"number\"\nconst isString = (v: any): v is string => typeof v === \"string\"\nconst isObject = (v: any) => v !== null && typeof v === \"object\"\nconst isArray = (v: any) => isObject(v) && v instanceof Array\n\ninterface VoucherArgument {\n  type: string\n  value: string\n}\n\ninterface VoucherProposalKey {\n  address: string\n  keyId: number | null\n  sequenceNum: number | null\n}\n\ninterface Sig {\n  address: string\n  keyId: number | string\n  sig: string\n  // Optional signature extension data (e.g., WebAuthn clientDataJSON + authenticatorData)\n  // Propagated via \"extensionData\" when present by wallets/connectors.\n  // Not required for existing signatures; encoding remains identical when absent.\n  extensionData?: string\n}\n\nexport interface TransactionProposalKey {\n  address?: string\n  keyId?: number | string\n  sequenceNum?: number\n}\nexport interface Transaction {\n  cadence: string\n  refBlock: string\n  computeLimit: number\n  arguments: VoucherArgument[]\n  proposalKey: TransactionProposalKey\n  payer: string\n  authorizers: string[]\n  payloadSigs?: Sig[]\n  envelopeSigs?: TransactionProposalKey[]\n}\n\nexport interface Voucher {\n  cadence: string\n  refBlock: string\n  computeLimit: number\n  arguments: VoucherArgument[]\n  proposalKey: VoucherProposalKey\n  payer: string\n  authorizers: string[]\n  payloadSigs: Sig[]\n  envelopeSigs: Sig[]\n}\n\ninterface PayloadField {\n  name: string\n  check: (v: any) => boolean\n  defaultVal?: string\n}\n\nconst payloadFields: PayloadField[] = [\n  {name: \"cadence\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"computeLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields: PayloadField[] = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst payloadSigsFields: PayloadField[] = [\n  {name: \"payloadSigs\", check: isArray},\n]\n\nconst payloadSigFields: PayloadField[] = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst envelopeSigsFields: PayloadField[] = [\n  {name: \"envelopeSigs\", check: isArray},\n]\n\nconst envelopeSigFields: PayloadField[] = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (\n  obj: Record<string, any>,\n  field: PayloadField,\n  base?: string,\n  index?: number\n) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field: string, base?: string, index?: number) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field: string, base?: string, index?: number) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field: string, base?: string, index?: number) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {withPrefix} from \"@onflow/util-address\"\nimport {Voucher, encodeTxIdFromVoucher} from \"../encode/encode\"\nimport {Interaction, InteractionAccount} from \"@onflow/typedefs\"\n\n/**\n * Identifies signers for the transaction payload (authorizers + proposer, excluding payer).\n *\n * This function determines which accounts need to sign the transaction payload. Payload signers include\n * all authorizers and the proposer, but exclude the payer (who signs the envelope).\n *\n * @param ix The interaction object\n * @returns Array of account tempIds that need to sign the payload\n *\n * @example\n * import { findInsideSigners, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n * // Assume we have account tempIds: \"proposer-123\", \"auth-456\", \"payer-789\"\n * interaction.proposer = \"proposer-123\";\n * interaction.authorizations = [\"auth-456\"];\n * interaction.payer = \"payer-789\";\n *\n * const insideSigners = findInsideSigners(interaction);\n * console.log(insideSigners); // [\"auth-456\", \"proposer-123\"]\n * // Note: payer is excluded from payload signers\n */\nexport function findInsideSigners(ix: Interaction) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  if (ix.proposer) {\n    inside.add(ix.proposer)\n  }\n  if (Array.isArray(ix.payer)) {\n    ix.payer.forEach(p => inside.delete(p))\n  } else {\n    inside.delete(ix.payer)\n  }\n  return Array.from(inside)\n}\n\n/**\n * Identifies signers for the transaction envelope (payer accounts only).\n *\n * This function determines which accounts need to sign the transaction envelope. Envelope signers\n * are only the payer accounts, who are responsible for transaction fees.\n *\n * @param ix The interaction object\n * @returns Array of account tempIds that need to sign the envelope\n *\n * @example\n * import { findOutsideSigners, initInteraction } from \"@onflow/sdk\"\n *\n * const interaction = initInteraction();\n * interaction.proposer = \"proposer-123\";\n * interaction.authorizations = [\"auth-456\"];\n * interaction.payer = \"payer-789\";\n *\n * const outsideSigners = findOutsideSigners(interaction);\n * console.log(outsideSigners); // [\"payer-789\"]\n * // Only the payer signs the envelope\n *\n * // Multiple payers example\n * interaction.payer = [\"payer-789\", \"payer-abc\"];\n * const multiplePayerSigners = findOutsideSigners(interaction);\n * console.log(multiplePayerSigners); // [\"payer-789\", \"payer-abc\"]\n */\nexport function findOutsideSigners(ix: Interaction) {\n  // Outside Signers Are: (payer)\n  let outside = new Set(Array.isArray(ix.payer) ? ix.payer : [ix.payer])\n  return Array.from(outside)\n}\n\n/**\n * Creates a signable voucher object from an interaction for signing purposes.\n *\n * A voucher is a standardized representation of a transaction that contains all the necessary\n * information for signing and submitting to the Flow network. This function transforms an\n * interaction object into a voucher format.\n *\n * @param ix The interaction object containing transaction details\n * @returns A voucher object containing all transaction data and signatures\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { createSignableVoucher } from \"@onflow/sdk\"\n *\n * // Build a transaction interaction\n * const interaction = await fcl.build([\n *   fcl.transaction`\n *     transaction(amount: UFix64) {\n *       prepare(account: AuthAccount) {\n *         log(amount)\n *       }\n *     }\n *   `,\n *   fcl.args([fcl.arg(\"10.0\", fcl.t.UFix64)]),\n *   fcl.proposer(proposerAuthz),\n *   fcl.payer(payerAuthz),\n *   fcl.authorizations([authorizerAuthz]),\n *   fcl.limit(100)\n * ]);\n *\n * // Create a voucher for signing\n * const voucher = createSignableVoucher(interaction);\n * console.log(voucher.cadence); // The Cadence script\n * console.log(voucher.arguments); // The transaction arguments\n * console.log(voucher.proposalKey); // Proposer account details\n * console.log(voucher.authorizers); // List of authorizer addresses\n *\n * // The voucher can now be signed and submitted\n */\nexport const createSignableVoucher = (ix: Interaction) => {\n  const buildAuthorizers = () => {\n    const authorizations = ix.authorizations\n      .map(cid => withPrefix(ix.accounts[cid].addr))\n      .reduce((prev: (string | null)[], current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, [])\n    return authorizations\n  }\n\n  const buildInsideSigners = () =>\n    findInsideSigners(ix).map(id => {\n      const base: any = {\n        address: withPrefix(ix.accounts[id].addr),\n        keyId: ix.accounts[id].keyId,\n        sig: ix.accounts[id].signature,\n      }\n      const ext = (ix.accounts[id] as InteractionAccount as any).extensionData\n      if (ext != null) (base as any).extensionData = ext\n      return base\n    })\n\n  const buildOutsideSigners = () =>\n    findOutsideSigners(ix).map(id => {\n      const base: any = {\n        address: withPrefix(ix.accounts[id].addr),\n        keyId: ix.accounts[id].keyId,\n        sig: ix.accounts[id].signature,\n      }\n      const ext = (ix.accounts[id] as InteractionAccount as any).extensionData\n      if (ext != null) (base as any).extensionData = ext\n      return base\n    })\n\n  const proposalKey = ix.proposer\n    ? {\n        address: withPrefix(ix.accounts[ix.proposer].addr),\n        keyId: ix.accounts[ix.proposer].keyId,\n        sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n      }\n    : {}\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey,\n    payer: withPrefix(\n      ix.accounts[Array.isArray(ix.payer) ? ix.payer[0] : ix.payer].addr\n    ),\n    authorizers: buildAuthorizers(),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners(),\n  }\n}\n\n/**\n * Converts a voucher object to a transaction ID.\n *\n * This function computes the transaction ID by encoding and hashing the voucher.\n * The transaction ID can be used to track the transaction status on the Flow network.\n *\n * @param voucher The voucher object to convert\n * @returns A transaction ID string\n *\n * @example\n * import { voucherToTxId, createSignableVoucher } from \"@onflow/sdk\"\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Create a voucher from an interaction\n * const interaction = await fcl.build([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Hello, Flow!\")\n *       }\n *     }\n *   `,\n *   fcl.proposer(authz),\n *   fcl.payer(authz),\n *   fcl.authorizations([authz])\n * ]);\n *\n * const voucher = createSignableVoucher(interaction);\n *\n * // Calculate the transaction ID\n * const txId = voucherToTxId(voucher);\n * console.log(\"Transaction ID:\", txId);\n * // Returns something like: \"a1b2c3d4e5f6789...\"\n *\n * // You can use this ID to track the transaction\n * const txStatus = await fcl.tx(txId).onceSealed();\n * console.log(\"Transaction status:\", txStatus);\n */\nexport const voucherToTxId = (voucher: Voucher) => {\n  return encodeTxIdFromVoucher(voucher)\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {log} from \"@onflow/util-logger\"\nimport {isTransaction} from \"../interaction/interaction\"\nimport {Interaction, InteractionAccount} from \"@onflow/typedefs\"\nimport {createSignableVoucher} from \"./voucher\"\nimport {v4 as uuidv4} from \"uuid\"\n\nconst MAX_DEPTH_LIMIT = 5\n\nconst idof = (acct: InteractionAccount) =>\n  `${withPrefix(acct.addr)}-${acct.keyId}`\nconst isFn = (v: any): v is Function =>\n  v &&\n  (Object.prototype.toString.call(v) === \"[object Function]\" ||\n    \"function\" === typeof v ||\n    v instanceof Function)\n\nconst genAccountId = (...ids: (string | boolean | undefined)[]) => ids.join(\"-\")\n\nenum ROLES {\n  PAYER = \"payer\",\n  PROPOSER = \"proposer\",\n  AUTHORIZATIONS = \"authorizations\",\n}\n\nfunction debug() {\n  const SPACE = \" \"\n  const SPACE_COUNT_PER_INDENT = 4\n  const DEBUG_MESSAGE: string[] = []\n  return [\n    function (msg = \"\", indent = 0) {\n      DEBUG_MESSAGE.push(\n        Array(indent * SPACE_COUNT_PER_INDENT)\n          .fill(SPACE)\n          .join(\"-\") + msg\n      )\n    },\n    function () {\n      return DEBUG_MESSAGE.reduce((prev, curr) => prev + \"\\n\" + curr)\n    },\n  ]\n}\n\nfunction recurseFlatMap<T>(el: T, depthLimit = 3) {\n  if (depthLimit <= 0) return el\n  if (!Array.isArray(el)) return el\n  return recurseFlatMap(\n    el.flatMap(e => e),\n    depthLimit - 1\n  )\n}\n\n/**\n * Builds a pre-signable object containing interaction data before signing.\n *\n * @param acct The account to create the pre-signable for\n * @param ix The interaction object containing transaction details\n * @returns A pre-signable object conforming to the FCL pre-signable standard\n */\nexport function buildPreSignable(\n  acct: Partial<InteractionAccount>,\n  ix: Interaction\n) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function removeUnusedIxAccounts(\n  ix: Interaction,\n  opts: Record<string, any>\n) {\n  const payerTempIds = Array.isArray(ix.payer) ? ix.payer : [ix.payer]\n  const authorizersTempIds = Array.isArray(ix.authorizations)\n    ? ix.authorizations\n    : [ix.authorizations]\n  const proposerTempIds =\n    ix.proposer === null\n      ? []\n      : Array.isArray(ix.proposer)\n        ? ix.proposer\n        : [ix.proposer]\n\n  const ixAccountKeys = Object.keys(ix.accounts)\n  const uniqueTempIds = [\n    ...new Set(payerTempIds.concat(authorizersTempIds, proposerTempIds)),\n  ]\n\n  for (const ixAccountKey of ixAccountKeys) {\n    if (!uniqueTempIds.find(id => id === ixAccountKey)) {\n      delete ix.accounts[ixAccountKey]\n    }\n  }\n}\n\nfunction addAccountToIx(ix: Interaction, newAccount: InteractionAccount) {\n  if (\n    typeof newAccount.addr === \"string\" &&\n    (typeof newAccount.keyId === \"number\" ||\n      typeof newAccount.keyId === \"string\")\n  ) {\n    newAccount.tempId = idof(newAccount)\n  } else {\n    newAccount.tempId = newAccount.tempId || uuidv4()\n  }\n\n  const existingAccount = ix.accounts[newAccount.tempId] || newAccount\n\n  if (!ix.accounts[newAccount.tempId]) {\n    ix.accounts[newAccount.tempId] = newAccount\n  }\n\n  ix.accounts[newAccount.tempId].role.proposer =\n    existingAccount.role.proposer || newAccount.role.proposer\n  ix.accounts[newAccount.tempId].role.payer =\n    existingAccount.role.payer || newAccount.role.payer\n  ix.accounts[newAccount.tempId].role.authorizer =\n    existingAccount.role.authorizer || newAccount.role.authorizer\n\n  return ix.accounts[newAccount.tempId]\n}\n\nfunction uniqueAccountsFlatMap(accounts: InteractionAccount[]) {\n  const flatMapped = recurseFlatMap(accounts)\n  const seen = new Set()\n\n  const uniqueAccountsFlatMapped = flatMapped\n    .map(account => {\n      const accountId = genAccountId(\n        account.tempId,\n        account.role.payer,\n        account.role.proposer,\n        account.role.authorizer,\n        account.role.param\n      )\n      if (seen.has(accountId)) return null\n      seen.add(accountId)\n      return account\n    })\n    .filter(e => e !== null) as InteractionAccount[]\n\n  return uniqueAccountsFlatMapped\n}\n\n// Resolve single account, returns new account tempIds (if they exist)\nasync function resolveSingleAccount(\n  ix: Interaction,\n  currentAccountTempId: string,\n  depthLimit = MAX_DEPTH_LIMIT,\n  {debugLogger}: {debugLogger: (msg?: string, indent?: number) => void}\n): Promise<[string[], boolean]> {\n  if (depthLimit <= 0) {\n    throw new Error(\n      `recurseResolveAccount Error: Depth limit (${MAX_DEPTH_LIMIT}) reached. Ensure your authorization functions resolve to an account after ${MAX_DEPTH_LIMIT} resolves.`\n    )\n  }\n\n  let account = ix.accounts[currentAccountTempId]\n\n  if (!account) return [[], false]\n\n  debugLogger(\n    `account: ${account.tempId}`,\n    Math.max(MAX_DEPTH_LIMIT - depthLimit, 0)\n  )\n\n  if (account?.resolve) {\n    if (isFn(account?.resolve)) {\n      debugLogger(\n        `account: ${account.tempId} -- cache MISS`,\n        Math.max(MAX_DEPTH_LIMIT - depthLimit, 0)\n      )\n\n      const {resolve, ...accountWithoutResolve} = account\n\n      let resolvedAccounts = await resolve(\n        accountWithoutResolve,\n        buildPreSignable(accountWithoutResolve, ix)\n      )\n\n      resolvedAccounts = Array.isArray(resolvedAccounts)\n        ? resolvedAccounts\n        : [resolvedAccounts]\n\n      let flatResolvedAccounts = recurseFlatMap(resolvedAccounts)\n\n      flatResolvedAccounts = flatResolvedAccounts.map(\n        (flatResolvedAccount: InteractionAccount) =>\n          addAccountToIx(ix, flatResolvedAccount)\n      )\n\n      account.resolve = flatResolvedAccounts.map(\n        (flatResolvedAccount: InteractionAccount) => flatResolvedAccount.tempId\n      )\n\n      account = addAccountToIx(ix, account)\n\n      return [\n        flatResolvedAccounts.map(\n          (flatResolvedAccount: InteractionAccount) =>\n            flatResolvedAccount.tempId\n        ),\n        true,\n      ]\n    } else {\n      debugLogger(\n        `account: ${account.tempId} -- cache HIT`,\n        Math.max(MAX_DEPTH_LIMIT - depthLimit, 0)\n      )\n\n      return [account.resolve, false]\n    }\n  }\n  return [account.tempId ? [account.tempId] : [], false]\n}\n\nconst getAccountTempIDs = (rawTempIds: string | string[] | null) => {\n  if (rawTempIds === null) {\n    return []\n  }\n  return Array.isArray(rawTempIds) ? rawTempIds : [rawTempIds]\n}\n\nasync function replaceRoles(\n  ix: Interaction,\n  oldAccountTempId: string,\n  newAccounts: InteractionAccount[]\n) {\n  // Replace roles in the interaction with any resolved accounts\n  // e.g. payer -> [oldAccountTempId, anotherId] => payer -> [newAccountTempId, anotherId]\n  for (let role of Object.values(ROLES)) {\n    if (role === ROLES.AUTHORIZATIONS || role === ROLES.PAYER) {\n      ix[role] = getAccountTempIDs(ix[role]).reduce((acc, acctTempId) => {\n        if (acctTempId === oldAccountTempId) {\n          return acc.concat(\n            ...newAccounts\n              .filter(x => {\n                return (\n                  (role === ROLES.PAYER && x.role.payer) ||\n                  (role === ROLES.AUTHORIZATIONS && x.role.authorizer)\n                )\n              })\n              .map(acct => acct.tempId)\n          )\n        }\n        return acc.concat(acctTempId)\n      }, [] as string[]) as any\n    } else if (role === ROLES.PROPOSER) {\n      const proposerAccts = newAccounts.filter(x => x.role.proposer)\n\n      if (proposerAccts.length > 1) {\n        throw new Error(\n          `replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed`\n        )\n      }\n\n      ix[role] = proposerAccts[0]?.tempId ?? ix[role]\n    }\n  }\n}\n\nasync function resolveAccountsByIds(\n  ix: Interaction,\n  accountTempIds: Set<string>,\n  depthLimit = MAX_DEPTH_LIMIT,\n  {debugLogger}: {debugLogger: (msg?: string, indent?: number) => void}\n) {\n  invariant(\n    ix && typeof ix === \"object\",\n    \"resolveAccountType Error: ix not defined\"\n  )\n\n  let newTempIds = new Set<string>()\n  for (let accountId of accountTempIds) {\n    let account = ix.accounts[accountId]\n    invariant(Boolean(account), `resolveAccountType Error: account not found`)\n\n    const [resolvedAccountTempIds, foundNewAccounts] =\n      await resolveSingleAccount(ix, accountId, depthLimit, {\n        debugLogger,\n      })\n\n    // If new accounts were resolved, add them to the set so they can be explored next iteration\n    if (foundNewAccounts) {\n      const resolvedAccounts: InteractionAccount[] = resolvedAccountTempIds.map(\n        (resolvedAccountTempId: string) => ix.accounts[resolvedAccountTempId]\n      )\n\n      const flatResolvedAccounts = uniqueAccountsFlatMap(resolvedAccounts)\n\n      // Add new tempIds to the set so they can be used next iteration\n      flatResolvedAccounts.forEach(x => newTempIds.add(x.tempId))\n\n      // Update any roles in the interaction based on the new accounts\n      replaceRoles(ix, accountId, flatResolvedAccounts)\n    }\n  }\n\n  // Ensure all payers are of the same account\n  let payerAddress\n  for (const payerTempID of ix[ROLES.PAYER]) {\n    let pAcct = ix.accounts[payerTempID]\n    if (!payerAddress) payerAddress = pAcct.addr\n    else if (payerAddress !== pAcct.addr) {\n      throw new Error(\n        \"resolveAccountType Error: payers from different accounts detected\"\n      )\n    }\n  }\n\n  return newTempIds\n}\n\n/**\n * Resolves account authorization functions and validates account configurations for transactions.\n *\n * @param ix The interaction object containing accounts to resolve\n * @param opts Configuration options for resolution\n * @returns The interaction with resolved accounts\n */\nexport async function resolveAccounts(\n  ix: Interaction,\n  opts: Record<string, any> = {}\n) {\n  if (isTransaction(ix)) {\n    if (!Array.isArray(ix.payer)) {\n      log.deprecate({\n        pkg: \"FCL\",\n        subject:\n          '\"ix.payer\" must be an array. Support for ix.payer as a singular',\n        message: \"See changelog for more info.\",\n      })\n    }\n    let [debugLogger, getDebugMessage] = debug()\n    try {\n      // BFS, resolving one level of accounts at a time\n      let depthLimit = MAX_DEPTH_LIMIT\n      let frontier = new Set([\n        ...getAccountTempIDs(ix[ROLES.PAYER]),\n        ...getAccountTempIDs(ix[ROLES.PROPOSER]),\n        ...getAccountTempIDs(ix[ROLES.AUTHORIZATIONS]),\n      ])\n\n      while (frontier.size > 0) {\n        if (depthLimit <= 0) {\n          throw new Error(\n            `resolveAccounts Error: Depth limit (${MAX_DEPTH_LIMIT}) reached. Ensure your authorization functions resolve to an account after ${MAX_DEPTH_LIMIT} resolves.`\n          )\n        }\n\n        frontier = await resolveAccountsByIds(ix, frontier, depthLimit, {\n          debugLogger,\n        })\n        depthLimit--\n      }\n\n      await removeUnusedIxAccounts(ix, {debugLogger})\n\n      // Ensure at least one account for each role is resolved (except for authorizations)\n      for (const role of Object.values(ROLES)) {\n        invariant(\n          getAccountTempIDs(ix[role]).length > 0 ||\n            role === ROLES.AUTHORIZATIONS,\n          `resolveAccountType Error: no accounts for role \"${role}\" found`\n        )\n      }\n\n      if (opts.enableDebug) {\n        console.debug(getDebugMessage())\n      }\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction\"\nimport {Interaction, InteractionAccount} from \"@onflow/typedefs\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {\n  Transaction,\n  TransactionProposalKey,\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode\"\nimport {\n  createSignableVoucher,\n  findInsideSigners,\n  findOutsideSigners,\n} from \"./voucher\"\n\n/**\n * Resolves signatures for a transaction by coordinating the signing process for inside and outside signers.\n *\n * @param ix The interaction object containing transaction details\n * @returns The interaction object with resolved signatures\n */\nexport async function resolveSignatures(ix: Interaction) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n\n      // Promise.all could potentially break the flow if there are multiple inside signers trying to resolve at the same time\n      // causing multiple triggers of authz function that tries to render multiple auth iiframes/tabs/extensions\n      // as an alternative, use this:\n      // for(const insideSigner of insideSigners) {\n      //   await fetchSignature(ix, insidePayload)(insideSigner);\n      // }\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => {\n          const base: any = {\n            address: ix.accounts[id].addr || \"\",\n            keyId: ix.accounts[id].keyId || 0,\n            sig: ix.accounts[id].signature || \"\",\n          }\n          const acc = ix.accounts[id] as InteractionAccount\n          const ext = (acc as any).extensionData as string | null | undefined\n          if (ext != null) (base as any).extensionData = ext\n          return base\n        }),\n      })\n\n      // Promise.all could potentially break the flow if there are multiple outside signers trying to resolve at the same time\n      // causing multiple triggers of authz function that tries to render multiple auth iframes/tabs/extensions\n      // as an alternative, use this:\n      // for(const outsideSigner of outsideSigners) {\n      //   await fetchSignature(ix, outsidePayload)(outsideSigner);\n      // }\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nfunction fetchSignature(ix: Interaction, payload: string) {\n  return async function innerFetchSignature(id: string) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null && acct.signature !== undefined) return\n    const {signature, extensionData} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    ix.accounts[id].signature = signature\n    if (extensionData != null) {\n      ix.accounts[id].extensionData = extensionData\n    }\n  }\n}\n\n/**\n * Builds a signable object that can be signed by an authorization function.\n *\n * @param acct The account to create the signable for\n * @param message The encoded message to be signed\n * @param ix The interaction object containing transaction details\n * @returns A signable object conforming to the FCL signable standard\n */\nexport function buildSignable(\n  acct: InteractionAccount,\n  message: string,\n  ix: Interaction\n) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix: Interaction): Transaction {\n  const payerAddress = sansPrefix(\n    (Array.isArray(ix.payer) ? ix.accounts[ix.payer[0]] : ix.accounts[ix.payer])\n      .addr || \"\"\n  )\n\n  const proposalKey: TransactionProposalKey = ix.proposer\n    ? {\n        address: sansPrefix(ix.accounts[ix.proposer].addr) || \"\",\n        keyId: ix.accounts[ix.proposer].keyId || 0,\n        sequenceNum: ix.accounts[ix.proposer].sequenceNum || 0,\n      }\n    : {}\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey,\n    payer: payerAddress,\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr) || \"\")\n      .reduce((prev: string[], current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import {get, pipe, Ok, Bad} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\n\n/**\n * Executes validator functions that have been attached to an interaction to perform validation checks.\n *\n * @param ix The interaction object containing validators to execute\n * @returns The interaction after running all validators\n */\nexport async function resolveValidators(ix: Interaction): Promise<Interaction> {\n  const validators = get(ix, \"ix.validators\", [])\n  return pipe(\n    ix,\n    validators.map((cb: Function) => (ix: Interaction) => cb(ix, {Ok, Bad}))\n  )\n}\n","import {sansPrefix} from \"@onflow/util-address\"\nimport {Interaction} from \"@onflow/typedefs\"\n\n/**\n * Normalizes account addresses by removing the \"0x\" prefix from all account addresses in the interaction.\n *\n * @param ix The interaction object to normalize\n * @returns The interaction with normalized account addresses\n */\nexport async function resolveFinalNormalization(\n  ix: Interaction\n): Promise<Interaction> {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {get, isFn} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\nimport {createSignableVoucher} from \"./voucher\"\n\n/**\n * Resolves voucher intercept functions by calling them with the current voucher.\n *\n * @param ix The interaction object to resolve voucher intercepts for\n * @returns The interaction after voucher intercept processing\n */\nexport async function resolveVoucherIntercept(\n  ix: Interaction\n): Promise<Interaction> {\n  const fn = get(ix, \"ix.voucher-intercept\")\n  if (isFn(fn)) {\n    await fn(createSignableVoucher(ix))\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\nimport {SdkContext} from \"../context/context\"\nimport {withGlobalContext} from \"../context/global\"\n\nexport function createResolveComputeLimit(context: SdkContext) {\n  return async function resolveComputeLimit(\n    ix: Interaction\n  ): Promise<Interaction> {\n    if (isTransaction(ix)) {\n      ix.message.computeLimit = ix.message.computeLimit || context.computeLimit\n    }\n    return ix\n  }\n}\n\n/**\n * Resolves the compute limit for a transaction from configuration or applies default values.\n *\n * @param ix The interaction object to resolve compute limit for\n * @returns The interaction with resolved compute limit\n */\nexport const resolveComputeLimit = withGlobalContext(createResolveComputeLimit)\n","import {pipe, isTransaction} from \"../interaction/interaction\"\nimport {config} from \"@onflow/config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport * as ixModule from \"../interaction/interaction\"\nimport {response} from \"../response/response\"\nimport {build} from \"../build/build\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {getAccount} from \"../build/build-get-account\"\nimport {decodeResponse as decode} from \"../decode/decode\"\nimport {Interaction} from \"@onflow/typedefs\"\n\nimport {createResolveCadence} from \"./resolve-cadence\"\nimport {resolveArguments} from \"./resolve-arguments\"\nimport {resolveAccounts} from \"./resolve-accounts\"\nimport {resolveSignatures} from \"./resolve-signatures\"\nimport {resolveValidators} from \"./resolve-validators\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization\"\nimport {resolveVoucherIntercept} from \"./resolve-voucher-intercept\"\nimport {createResolveComputeLimit} from \"./resolve-compute-limit\"\nimport {SdkContext} from \"../context/context\"\nimport {withGlobalContext} from \"../context/global\"\n\ntype DebugCallback = (ix: Interaction, log: any, accts?: any) => any\n\nconst noop = (v: any) => v\nconst debug =\n  (key: string, fn: DebugCallback = noop) =>\n  async (ix: Interaction): Promise<Interaction> => {\n    const take = (obj: any, keys: string | string[] = []) => {\n      if (typeof keys === \"string\") keys = keys.split(\" \")\n      keys.reduce((acc, key) => ({...acc, [key]: obj[key]}), {})\n    }\n\n    const accts = (ix: Interaction) =>\n      [\n        \"\\nAccounts:\",\n        {\n          proposer: ix.proposer,\n          authorizations: ix.authorizations,\n          payer: ix.payer,\n        },\n        \"\\n\\nDetails:\",\n        ix.accounts,\n      ].filter(Boolean)\n\n    const log = (...msg: any[]) => {\n      console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\")\n    }\n\n    if (await config.get(`debug.${key}`)) await fn(ix, log, accts)\n    return ix\n  }\n\nexport function createResolve(context: SdkContext) {\n  const resolve = async (ix: Interaction) =>\n    pipe([\n      createResolveCadence(context),\n      debug(\"cadence\", (ix: Interaction, log: any) => log(ix.message.cadence)),\n      createResolveComputeLimit(context),\n      debug(\"compute limit\", (ix: Interaction, log: any) =>\n        log(ix.message.computeLimit)\n      ),\n      resolveArguments,\n      debug(\"arguments\", (ix: Interaction, log: any) =>\n        log(ix.message.arguments, ix.message)\n      ),\n      resolveAccounts,\n      debug(\"accounts\", (ix: Interaction, log: any, accts: any) =>\n        log(...accts(ix))\n      ),\n      /* special */ createExecFetchRef(context),\n      /* special */ createExecFetchSequenceNumber(context),\n      resolveSignatures,\n      debug(\"signatures\", (ix: Interaction, log: any, accts: any) =>\n        log(...accts(ix))\n      ),\n      resolveFinalNormalization,\n      resolveValidators,\n      resolveVoucherIntercept,\n      debug(\"resolved\", (ix: Interaction, log: any) => log(ix)),\n    ])(ix)\n\n  return resolve\n}\n\n/**\n * Resolves an interaction by applying a series of resolvers in sequence.\n *\n * This is the main resolver function that takes a built interaction and prepares it\n * for submission to the Flow blockchain by applying all necessary resolvers.\n *\n * The resolve function uses a pipeline approach, applying each resolver in sequence\n * to transform the interaction from its initial built state to a fully resolved state\n * ready for transmission to the Flow Access API.\n *\n * @param interaction The interaction object to resolve\n * @returns A promise that resolves to the fully resolved interaction\n * @example\n * import { resolve, build, script } from \"@onflow/sdk\"\n *\n * const interaction = await build([\n *   script`\n *     access(all) fun main(): String {\n *       return \"Hello, World!\"\n *     }\n *   `\n * ])\n *\n * const resolved = await resolve(interaction)\n */\nexport const resolve = /* @__PURE__ */ withGlobalContext(createResolve)\n\nfunction createExecFetchRef(context: SdkContext) {\n  return async function execFetchRef(ix: Interaction): Promise<Interaction> {\n    if (isTransaction(ix) && ix.message.refBlock == null) {\n      const sendFn = context.transport.send\n\n      ix.message.refBlock = (\n        await sendFn(\n          build([getBlock()]),\n          {response, Buffer, ix: ixModule} as any,\n          {\n            get node() {\n              return context.accessNodeUrl\n            },\n          }\n        ).then(decode)\n      ).id\n    }\n    return ix\n  }\n}\n\nfunction createExecFetchSequenceNumber(context: SdkContext) {\n  return async function execFetchSequenceNumber(\n    ix: Interaction\n  ): Promise<Interaction> {\n    if (isTransaction(ix)) {\n      var acct = Object.values(ix.accounts).find((a: any) => a.role.proposer)\n      invariant(acct !== undefined, `Transactions require a proposer`)\n      if (acct && acct.sequenceNum == null) {\n        const sendFn = context.transport.send\n\n        ix.accounts[acct.tempId].sequenceNum = await sendFn(\n          await build([getAccount(acct.addr!)]),\n          {response, Buffer, ix: ixModule} as any,\n          {\n            get node() {\n              return context.accessNodeUrl\n            },\n          }\n        )\n          .then(decode)\n          .then((acctResponse: any) => acctResponse.keys)\n          .then((keys: any) =>\n            keys.find((key: any) => key.index === acct!.keyId)\n          )\n          .then((key: any) => key.sequenceNumber)\n      }\n    }\n    return ix\n  }\n}\n","import {Buffer} from \"@onflow/rlp\"\nimport {initInteraction, pipe} from \"../../interaction/interaction\"\nimport * as ixModule from \"../../interaction/interaction\"\nimport {InteractionBuilderFn} from \"../../interaction/interaction\"\nimport {response} from \"../../response/response\"\nimport {SdkContext} from \"../../context/context\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {withGlobalContext} from \"../../context/global\"\nimport {createResolve} from \"../../resolve/resolve\"\n\nexport function createSend(context: SdkContext) {\n  async function send(\n    args:\n      | (InteractionBuilderFn | false)\n      | (InteractionBuilderFn | false)[] = [],\n    opts: any = {}\n  ): Promise<any> {\n    const transport = opts.transport || context.transport\n    const sendFn = transport.send?.bind?.(transport)\n    invariant(\n      !!sendFn,\n      `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n    )\n\n    const resolveFn =\n      opts.resolve || context.customResolver || createResolve(context)\n\n    opts.node = opts.node || context.accessNodeUrl\n\n    if (Array.isArray(args)) args = pipe(initInteraction(), args) as any\n    return sendFn(await resolveFn(args), {response, ix: ixModule, Buffer}, opts)\n  }\n\n  return send\n}\n\n/**\n * Sends arbitrary scripts, transactions, and requests to Flow.\n *\n * This method consumes an array of builders that are to be resolved and sent. The builders required to be included in the array depend on the interaction that is being built.\n *\n * WARNING: Must be used in conjunction with 'fcl.decode(response)' to get back correct keys and all values in JSON.\n *\n * @param args An array of builders (functions that take an interaction object and return a new interaction object)\n * @param opts Additional optional options for the request\n * @param opts.node Custom node endpoint to use for this request\n * @param opts.resolve Custom resolve function to use for processing the interaction\n * @returns A promise that resolves to a ResponseObject containing the data returned from the chain. Should always be decoded with fcl.decode() to get back appropriate JSON keys and values.\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // a script only needs to resolve the arguments to the script\n * const response = await fcl.send([fcl.script`${script}`, fcl.args(args)]);\n * // note: response values are encoded, call await fcl.decode(response) to get JSON\n *\n * // a transaction requires multiple 'builders' that need to be resolved prior to being sent to the chain - such as setting the authorizations.\n * const response = await fcl.send([\n *   fcl.transaction`\n *     ${transaction}\n *   `,\n *   fcl.args(args),\n *   fcl.proposer(proposer),\n *   fcl.authorizations(authorizations),\n *   fcl.payer(payer),\n *   fcl.limit(9999)\n * ]);\n * // note: response contains several values\n */\nexport const send = /* @__PURE__ */ withGlobalContext(createSend)\n","import {SdkTransport, SubscriptionTopic} from \"@onflow/typedefs\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {SubscribeRawParams} from \"./types\"\nimport {SdkContext} from \"../../context/context\"\nimport {getGlobalContext} from \"../../context/global\"\n\nexport function createSubscribeRawAsync(\n  contextPromise: Promise<SdkContext> | SdkContext\n) {\n  /**\n   * Subscribe to a topic without decoding the data.\n   * @param params - The parameters for the subscription.\n   * @param opts - Additional options for the subscription.\n   * @returns A promise that resolves once the subscription is active.\n   */\n  function subscribeRaw<T extends SubscriptionTopic>(\n    {topic, args, onData, onError}: SubscribeRawParams<T>,\n    opts: {\n      node?: string\n      transport?: SdkTransport\n    } = {}\n  ) {\n    async function subscribe() {\n      try {\n        const context = await contextPromise\n        const transport = opts.transport || context.transport\n        const node = opts.node || context.accessNodeUrl\n\n        invariant(\n          !!node,\n          `SDK Send Error: Either opts.node or \"accessNode.api\" in config must be defined.`\n        )\n\n        // Subscribe using the resolved transport\n        return transport.subscribe(\n          {\n            topic,\n            args,\n            onData,\n            onError,\n          },\n          {\n            node,\n            ...opts,\n          }\n        )\n      } catch (e) {\n        onError(e instanceof Error ? e : new Error(String(e)))\n        return\n      }\n    }\n\n    let subscriptionPromise = subscribe()\n    return {\n      unsubscribe: () => {\n        subscriptionPromise.then(sub => sub?.unsubscribe?.())\n      },\n    }\n  }\n\n  return subscribeRaw\n}\n\nexport function createSubscribeRaw(context: SdkContext) {\n  return createSubscribeRawAsync(context)\n}\n\n/**\n * Subscribe to a topic without decoding the data.\n *\n * This function creates a raw subscription to Flow blockchain data streams without automatic decoding.\n * It's useful when you need more control over data processing or want to handle raw responses directly.\n * For most use cases, consider using the `subscribe()` function instead which provides automatic decoding.\n *\n * Available topics include: `events`, `blocks`, `block_headers`, `block_digests`, `transaction_statuses`, `account_statuses`.\n *\n * @param params The parameters for the subscription including topic, arguments, and callbacks\n * @param params.topic The subscription topic (e.g., 'events', 'blocks', 'transaction_statuses')\n * @param params.args Parameters specific to the topic (e.g., event types, block height, transaction ID)\n * @param params.onData Callback function called with raw data when new messages are received\n * @param params.onError Callback function called if an error occurs during the subscription\n * @param opts Additional options for the subscription\n * @param opts.node Custom node endpoint to be used for the subscription\n * @param opts.transport Custom transport implementation for handling the connection\n * @returns A subscription object with an unsubscribe method\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { SubscriptionTopic } from \"@onflow/sdk\";\n *\n * // Subscribe to raw event data without automatic decoding\n * const rawSubscription = fcl.subscribeRaw({\n *   topic: SubscriptionTopic.EVENTS,\n *   args: {\n *     eventTypes: [\"A.7e60df042a9c0868.FlowToken.TokensWithdrawn\"]\n *   },\n *   onData: (rawData) => {\n *     console.log(\"Raw event data:\", rawData);\n *     // Handle raw data manually - no automatic decoding\n *   },\n *   onError: (error) => {\n *     console.error(\"Raw subscription error:\", error);\n *   }\n * });\n *\n * // Subscribe to raw block data\n * const blockSubscription = fcl.subscribeRaw({\n *   topic: SubscriptionTopic.BLOCKS,\n *   args: {\n *     blockStatus: \"finalized\"\n *   },\n *   onData: (rawBlock) => {\n *     console.log(\"Raw block data:\", rawBlock);\n *   },\n *   onError: (error) => {\n *     console.error(\"Error:\", error);\n *   }\n * });\n *\n * // Unsubscribe when done\n * rawSubscription.unsubscribe();\n */\nexport function subscribeRaw<T extends SubscriptionTopic>(\n  {topic, args, onData, onError}: SubscribeRawParams<T>,\n  opts: {\n    node?: string\n    transport?: SdkTransport\n  } = {}\n) {\n  const contextPromise = getGlobalContext()\n  return createSubscribeRawAsync(contextPromise)(\n    {\n      topic,\n      args,\n      onData,\n      onError,\n    },\n    opts\n  )\n}\n","import {SdkTransport, Subscription, SubscriptionTopic} from \"@onflow/typedefs\"\nimport {createSubscribeRawAsync} from \"./subscribe-raw\"\nimport {decodeResponse} from \"../../decode/decode\"\nimport {SubscribeParams} from \"./types\"\nimport {SdkContext} from \"../../context/context\"\nimport {getGlobalContext} from \"../../context/global\"\n\nexport function createSubscribeAsync(\n  contextPromise: Promise<SdkContext> | SdkContext\n) {\n  /**\n   * Subscribe to a topic and decode the data.\n   * @param params - The parameters for the subscription.\n   * @param opts - Additional options for the subscription.\n   * @returns A promise that resolves when the subscription is active.\n   */\n  function subscribe<T extends SubscriptionTopic>(\n    {topic, args, onData, onError}: SubscribeParams<T>,\n    opts: {\n      node?: string\n      transport?: SdkTransport\n    } = {}\n  ): Subscription {\n    const sub = createSubscribeRawAsync(contextPromise)(\n      {\n        topic,\n        args,\n        onData: data => {\n          decodeResponse(data)\n            .then(onData)\n            .catch(e => {\n              onError(new Error(`Failed to decode response: ${e.message}`))\n              sub?.unsubscribe?.()\n            })\n        },\n        onError,\n      },\n      opts\n    )\n\n    return sub\n  }\n\n  return subscribe\n}\n\nexport function createSubscribe(context: SdkContext) {\n  return createSubscribeAsync(context)\n}\n\n/**\n * Subscribe to real-time data from the Flow blockchain and automatically decode the responses.\n *\n * This is a utility function used for subscribing to real-time data from the WebSocket Streaming API. Data returned will be automatically decoded via the 'decode' function.\n *\n * Available topics include: `events`, `blocks`, `block_headers`, `block_digests`, `transaction_statuses`, `account_statuses`.\n *\n * @param params The parameters for the subscription including topic, arguments, and callbacks\n * @param params.topic The subscription topic (e.g., 'events', 'blocks', 'transaction_statuses')\n * @param params.args Parameters specific to the topic (e.g., event types, block height, transaction ID)\n * @param params.onData Callback function called with decoded data when new messages are received\n * @param params.onError Callback function called if an error occurs during the subscription\n * @param opts Additional options for the subscription\n * @param opts.node Custom node endpoint to be used for the subscription\n * @param opts.transport Custom transport implementation for handling the connection\n * @returns A subscription object that allows you to manage the subscription (e.g., to unsubscribe later)\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { SubscriptionTopic } from \"@onflow/sdk\";\n *\n * // Subscribe to events\n * const subscription = fcl.subscribe({\n *   topic: SubscriptionTopic.EVENTS,\n *   args: {\n *     eventTypes: [\"A.7e60df042a9c0868.FlowToken.TokensWithdrawn\"]\n *   },\n *   onData: (events) => {\n *     console.log(\"Received events:\", events);\n *   },\n *   onError: (error) => {\n *     console.error(\"Subscription error:\", error);\n *   }\n * });\n *\n * // Subscribe to blocks\n * const blockSubscription = fcl.subscribe({\n *   topic: SubscriptionTopic.BLOCKS,\n *   args: {\n *     blockStatus: \"finalized\"\n *   },\n *   onData: (block) => {\n *     console.log(\"New block:\", block);\n *   },\n *   onError: (error) => {\n *     console.error(\"Block subscription error:\", error);\n *   }\n * });\n *\n * // Later, to unsubscribe:\n * subscription.unsubscribe();\n * blockSubscription.unsubscribe();\n */\nexport function subscribe<T extends SubscriptionTopic>(\n  {topic, args, onData, onError}: SubscribeParams<T>,\n  opts: {\n    node?: string\n    transport?: SdkTransport\n  } = {}\n): Subscription {\n  const contextPromise = getGlobalContext()\n  const sub = createSubscribeRawAsync(contextPromise)(\n    {\n      topic,\n      args,\n      onData: data => {\n        decodeResponse(data)\n          .then(onData)\n          .catch(e => {\n            onError(new Error(`Failed to decode response: ${e.message}`))\n            sub?.unsubscribe?.()\n          })\n      },\n      onError,\n    },\n    opts\n  )\n\n  return sub\n}\n","import {decodeResponse} from \"./decode\"\nimport {SdkContext} from \"../context/context\"\nimport {withGlobalContext} from \"../context/global\"\n\nexport function createDecode(context: SdkContext) {\n  async function decode(response: any): Promise<any> {\n    return decodeResponse(response, context.customDecoders)\n  }\n\n  return decode\n}\n\n/**\n * Decodes the response from 'fcl.send()' into the appropriate JSON representation of any values returned from Cadence code.\n *\n * The response from Flow contains encoded values that need to be decoded into JavaScript types. This function handles that conversion, including complex types like structs, arrays, and dictionaries.\n *\n * @param response Should be the response returned from 'fcl.send([...])'\n * @returns A JSON representation of the raw string response depending on the cadence code executed. The return value can be a single value and type or an object with multiple types.\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Simple script to add 2 numbers\n * const response = await fcl.send([\n *   fcl.script`\n *     access(all) fun main(int1: Int, int2: Int): Int {\n *       return int1 + int2\n *     }\n *   `,\n *   fcl.args([fcl.arg(1, fcl.t.Int), fcl.arg(2, fcl.t.Int)])\n * ]);\n *\n * const decoded = await fcl.decode(response);\n * console.log(decoded); // 3\n * console.log(typeof decoded); // \"number\"\n *\n * // Complex return types\n * const complexResponse = await fcl.send([\n *   fcl.script`\n *     access(all) fun main(): {String: Int} {\n *       return {\"foo\": 1, \"bar\": 2}\n *     }\n *   `\n * ]);\n *\n * const complexDecoded = await fcl.decode(complexResponse);\n * console.log(complexDecoded); // {foo: 1, bar: 2}\n */\nexport const decode = /* @__PURE__ */ withGlobalContext(createDecode)\n","import {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload,\n  encodeTransactionEnvelope,\n} from \"../encode/encode\"\n\nexport interface PayloadSig {\n  address: string\n  keyId: number | string\n  sig: string\n  [key: string]: any\n}\n\nexport interface Voucher {\n  authorizers: string[]\n  proposalKey: {\n    address: string\n    keyId?: number | string\n    sequenceNum?: number\n    [key: string]: any\n  }\n  payer: string\n  cadence: string\n  refBlock: string\n  computeLimit: number\n  arguments: any[]\n  payloadSigs: PayloadSig[]\n}\n\nexport interface Signable {\n  message: string\n  addr?: string\n  keyId?: number\n  signature?: string\n  roles: Record<string, boolean>\n  voucher: Voucher\n  [key: string]: any\n}\n\nconst findPayloadSigners = (voucher: Voucher): string[] => {\n  // Payload Signers Are: (authorizers + proposer) - payer\n  const payload: Set<string> = new Set(voucher.authorizers)\n  payload.add(voucher.proposalKey.address)\n  payload.delete(voucher.payer)\n  return Array.from(payload).map(addr => withPrefix(addr))\n}\n\nconst findEnvelopeSigners = (voucher: Voucher): string[] => {\n  // Envelope Signers Are: (payer)\n  const envelope: Set<string> = new Set([voucher.payer])\n  return Array.from(envelope).map(addr => withPrefix(addr))\n}\n\nexport class UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n  constructor(signerAddress: string) {\n    const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()\n    super(msg)\n    this.name = \"Unable To Determine Message Encoding For Signer Addresss\"\n  }\n}\n\n/**\n * Encodes a message from a signable object for a specific signer address.\n *\n * This function determines whether the signer should sign the transaction payload or envelope\n * based on their role in the transaction (authorizer, proposer, or payer), then encodes the\n * appropriate message for signing.\n *\n * Payload signers include authorizers and proposers (but not payers)\n * Envelope signers include only payers\n *\n * The encoded message is what gets signed by the account's private key to create the transaction signature.\n *\n * @param signable The signable object containing transaction data and voucher\n * @param signerAddress The address of the signer to encode the message for\n * @returns An encoded message string suitable for signing with the account's private key\n *\n * @throws {UnableToDetermineMessageEncodingTypeForSignerAddress} When the signer address is not found in authorizers, proposer, or payer roles\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // This function is typically used internally by authorization functions\n * // when implementing custom wallet connectors or signing flows\n *\n * const signable = {\n *   voucher: {\n *     cadence: \"transaction { prepare(acct: AuthAccount) {} }\",\n *     authorizers: [\"0x01\"],\n *     proposalKey: { address: \"0x01\", keyId: 0, sequenceNum: 42 },\n *     payer: \"0x02\",\n *     refBlock: \"a1b2c3\",\n *     computeLimit: 100,\n *     arguments: [],\n *     payloadSigs: []\n *   }\n * };\n *\n * // For an authorizer (payload signer)\n * const authorizerMessage = fcl.encodeMessageFromSignable(signable, \"0x01\");\n * console.log(\"Authorizer signs:\", authorizerMessage);\n *\n * // For a payer (envelope signer)\n * const payerMessage = fcl.encodeMessageFromSignable(signable, \"0x02\");\n * console.log(\"Payer signs:\", payerMessage);\n */\nexport const encodeMessageFromSignable = (\n  signable: Signable,\n  signerAddress: string\n): string => {\n  let payloadSigners = findPayloadSigners(signable.voucher)\n  let envelopeSigners = findEnvelopeSigners(signable.voucher)\n\n  const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress))\n  const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress))\n\n  if (!isPayloadSigner && !isEnvelopeSigner) {\n    throw new UnableToDetermineMessageEncodingTypeForSignerAddress(\n      signerAddress\n    )\n  }\n\n  const message: any = {\n    cadence: signable.voucher.cadence,\n    refBlock: signable.voucher.refBlock,\n    computeLimit: signable.voucher.computeLimit,\n    arguments: signable.voucher.arguments,\n    proposalKey: {\n      ...signable.voucher.proposalKey,\n      address: sansPrefix(signable.voucher.proposalKey.address),\n    },\n    payer: sansPrefix(signable.voucher.payer),\n    authorizers: signable.voucher.authorizers.map(sansPrefix),\n    payloadSigs: signable.voucher.payloadSigs.map(ps => {\n      const base: any = {\n        ...ps,\n        address: sansPrefix(ps.address),\n      }\n      if ((ps as any).extensionData != null) {\n        base.extensionData = (ps as any).extensionData\n      }\n      return base\n    }),\n  }\n\n  return isPayloadSigner\n    ? encodeTransactionPayload(message)\n    : encodeTransactionEnvelope(message)\n}\n","import {update, InteractionBuilderFn} from \"../interaction/interaction\"\n\n/**\n * A builder function that adds a validator to a transaction.\n *\n * Validators are functions that run during transaction building to check for invalid configurations or parameters.\n * They help catch errors early before submitting transactions to the network, preventing failed transactions\n * and wasted compute costs.\n *\n * @param cb The validator function that takes an interaction and returns it (or throws an error if invalid)\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Custom validator to ensure account has sufficient balance\n * const validateBalance = (ix) => {\n *   if (ix.message.computeLimit > 1000) {\n *     throw new Error(\"Compute limit too high for this account\");\n *   }\n *   return ix;\n * };\n *\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         // Transaction logic\n *       }\n *     }\n *   `,\n *   fcl.validator(validateBalance),\n *   fcl.limit(500) // This will pass validation\n * ]);\n */\nexport function validator(cb: Function): InteractionBuilderFn {\n  return update(\"ix.validators\", (validators: Function | Function[]) =>\n    Array.isArray(validators) ? [...validators, cb] : [cb]\n  )\n}\n","import {pipe, InteractionBuilderFn} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\nimport {validator} from \"./build-validator\"\n\n/**\n * A builder function that returns a partial interaction to a block at a specific height.\n *\n * Use with other interactions like 'fcl.getBlock()' to get a full interaction at the specified block height.\n *\n * Block height expresses the height of the block on the chain. The latest block height increases by one for every valid block produced.\n *\n * @param height The height of the block to execute the interaction at\n * @returns A partial interaction to be paired with another interaction such as 'fcl.getBlock()' or 'fcl.getAccount()'\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get block at specific height\n * await fcl.send([fcl.getBlock(), fcl.atBlockHeight(123)]).then(fcl.decode);\n *\n * // Get account at specific block height\n * await fcl.send([\n *   fcl.getAccount(\"0x1d007d755706c469\"),\n *   fcl.atBlockHeight(12345)\n * ]).then(fcl.decode);\n *\n * // Execute script at specific block height\n * await fcl.send([\n *   fcl.script`\n *     access(all) fun main(): UFix64 {\n *       return getCurrentBlock().height\n *     }\n *   `,\n *   fcl.atBlockHeight(100)\n * ]).then(fcl.decode);\n */\nexport function atBlockHeight(height: number): InteractionBuilderFn {\n  return pipe([\n    (ix: Interaction) => {\n      ix.block.height = height\n      return ix\n    },\n    validator((ix: Interaction) => {\n      if (typeof ix.block.isSealed === \"boolean\")\n        throw new Error(\"Unable to specify both block height and isSealed.\")\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block height and block id.\")\n      return ix\n    }),\n  ])\n}\n","import {\n  isGetAccount,\n  pipe,\n  Ok as OkFn,\n  Bad as BadFn,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\nimport {validator} from \"./build-validator\"\nimport {Interaction} from \"@onflow/typedefs\"\n\n/**\n * A builder function that returns a partial interaction to a block at a specific block ID.\n *\n * Use with other interactions like 'fcl.getBlock()' to get a full interaction at the specified block ID.\n *\n * Block ID is SHA3-256 hash of the entire block payload. This hash is stored as an ID field on any block response object (ie. response from 'GetLatestBlock').\n *\n * @param id The ID of the block to execute the interaction at\n * @returns A partial interaction to be paired with another interaction such as 'fcl.getBlock()' or 'fcl.getAccount()'\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get block by ID\n * await fcl.send([fcl.getBlock(), fcl.atBlockId(\"23232323232\")]).then(fcl.decode);\n *\n * // Get account at specific block ID\n * await fcl.send([\n *   fcl.getAccount(\"0x1d007d755706c469\"),\n *   fcl.atBlockId(\"9dda5f281897389b99f103a1c6b180eec9dac870de846449a302103ce38453f3\")\n * ]).then(fcl.decode);\n *\n * // Execute script at specific block\n * await fcl.send([\n *   fcl.script`\n *     access(all) fun main(): UFix64 {\n *       return getCurrentBlock().timestamp\n *     }\n *   `,\n *   fcl.atBlockId(\"a1b2c3d4e5f6\")\n * ]).then(fcl.decode);\n */\nexport function atBlockId(id: string): InteractionBuilderFn {\n  return pipe([\n    (ix: Interaction) => {\n      ix.block.id = id\n      return OkFn(ix)\n    },\n    validator(\n      (ix: Interaction, {Ok, Bad}: {Ok: typeof OkFn; Bad: typeof BadFn}) => {\n        if (isGetAccount(ix))\n          return Bad(\n            ix,\n            \"Unable to specify a block id with a Get Account interaction.\"\n          )\n        if (typeof ix.block.isSealed === \"boolean\")\n          return Bad(ix, \"Unable to specify both block id and isSealed.\")\n        if (ix.block.height)\n          return Bad(ix, \"Unable to specify both block id and block height.\")\n        return Ok(ix)\n      }\n    ),\n  ])\n}\n","import {pipe, InteractionBuilderFn} from \"../interaction/interaction\"\nimport {Interaction} from \"@onflow/typedefs\"\nimport {validator} from \"./build-validator\"\n\n/**\n * A builder function that returns a partial interaction to query the latest block with the given finality state.\n *\n * Use with other interactions like 'fcl.getBlock()' to get the latest block information.\n * Block finality determines whether you get the latest executed block or the latest sealed block.\n *\n * - Executed blocks (soft-finality): Latest block that has been executed but may not be final\n * - Sealed blocks (hard-finality): Latest block that has been sealed and is considered final\n *\n * @param isSealed Block finality state, defaults to latest executed block (\"soft-finality\"), set to true for sealed blocks (\"hard-finality\")\n * @returns A function that processes a partial interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get latest executed block (soft finality)\n * await fcl.send([fcl.getBlock(), fcl.atLatestBlock()]).then(fcl.decode);\n *\n * // Get latest sealed block (hard finality)\n * await fcl.send([fcl.getBlock(), fcl.atLatestBlock(true)]).then(fcl.decode);\n *\n * // Get account from latest sealed block\n * await fcl.send([\n *   fcl.getAccount(\"0x1d007d755706c469\"),\n *   fcl.atLatestBlock(true)\n * ]).then(fcl.decode);\n *\n * // Execute script against latest executed block\n * await fcl.send([\n *   fcl.script`\n *     access(all) fun main(): UFix64 {\n *       return getCurrentBlock().height\n *     }\n *   `,\n *   fcl.atLatestBlock()\n * ]).then(fcl.decode);\n */\nexport function atLatestBlock(isSealed = false): InteractionBuilderFn {\n  return pipe([\n    (ix: Interaction) => {\n      ix.block.isSealed = isSealed\n      return ix\n    },\n    validator((ix: Interaction) => {\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block finality and block id.\")\n      if (ix.block.height)\n        throw new Error(\n          \"Unable to specify both block finality and block height.\"\n        )\n      return ix\n    }),\n  ])\n}\n","import type {Account} from \"@onflow/typedefs\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {atBlockHeight} from \"../build/build-at-block-height\"\nimport {atBlockId} from \"../build/build-at-block-id\"\nimport {atLatestBlock} from \"../build/build-at-latest-block\"\nimport {getAccount} from \"../build/build-get-account\"\nimport {decodeResponse as decode} from \"../decode/decode\"\nimport {SdkContext} from \"../context/context\"\nimport {withGlobalContext} from \"../context/global\"\nimport {createSend} from \"../transport/send/send\"\n\nexport interface AccountQueryOptions {\n  height?: number\n  id?: string\n  isSealed?: boolean\n}\n\nexport function createAccount(context: SdkContext) {\n  async function account(\n    address: string,\n    {height, id, isSealed}: AccountQueryOptions = {},\n    opts?: object\n  ): Promise<Account> {\n    invariant(\n      !((id && height) || (id && isSealed) || (height && isSealed)),\n      `Method: account -- Only one of the following parameters can be provided: id, height, isSealed`\n    )\n\n    // Get account by ID\n    if (id)\n      return await createSend(context)(\n        [getAccount(address), atBlockId(id)],\n        opts\n      ).then(decode)\n\n    // Get account by height\n    if (height)\n      return await createSend(context)(\n        [getAccount(address), atBlockHeight(height)],\n        opts\n      ).then(decode)\n\n    // Get account by latest block\n    return await createSend(context)(\n      [getAccount(address), atLatestBlock(isSealed ?? false)],\n      opts\n    ).then(decode)\n  }\n\n  return account\n}\n\n/**\n * Retrieve any account from Flow network's latest block or from a specified block height.\n *\n * Account address is a unique account identifier. Be mindful about the '0x' prefix, you should use the prefix as a default representation but be careful and safely handle user inputs without the prefix.\n *\n * An account includes the following data:\n * - Address: the account address.\n * - Balance: balance of the account.\n * - Contracts: list of contracts deployed to the account.\n * - Keys: list of keys associated with the account.\n *\n * @param address Address of the account\n * @param queryOptions Query parameters\n * @param queryOptions.height Block height to query\n * @param queryOptions.id Block ID to query\n * @param queryOptions.isSealed Block finality\n * @param opts Optional parameters\n * @returns A promise that resolves to an Account object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get account from latest block height\n * const account = await fcl.account(\"0x1d007d755706c469\");\n * console.log(\"Address:\", account.address);\n * console.log(\"Balance:\", account.balance);\n * console.log(\"Keys:\", account.keys);\n * console.log(\"Contracts:\", Object.keys(account.contracts));\n *\n * // Get account at a specific block height\n * const historicalAccount = await fcl.account(\"0x1d007d755706c469\", {\n *   height: 12345\n * });\n *\n * // Get account at a specific block ID\n * const accountAtBlock = await fcl.account(\"0x1d007d755706c469\", {\n *   id: \"9dda5f281897389b99f103a1c6b180eec9dac870de846449a302103ce38453f3\"\n * });\n *\n * // Get account from sealed block\n * const sealedAccount = await fcl.account(\"0x1d007d755706c469\", {\n *   isSealed: true\n * });\n *\n * // Alternative using builder pattern\n * fcl.send([\n *   fcl.getAccount(\"0x1d007d755706c469\"),\n *   fcl.atBlockHeight(123)\n * ]).then(fcl.decode);\n */\nexport const account = /* @__PURE__ */ withGlobalContext(createAccount)\n","import type {Block} from \"@onflow/typedefs\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {atBlockHeight} from \"../build/build-at-block-height\"\nimport {atBlockId} from \"../build/build-at-block-id\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {decodeResponse as decode} from \"../decode/decode\"\nimport {SdkContext} from \"../context/context\"\nimport {createSend} from \"../transport/send/send\"\nimport {withGlobalContext} from \"../context/global\"\n\nexport interface BlockQueryOptions {\n  sealed?: boolean\n  height?: number\n  id?: string\n}\n\nexport function createBlock(context: SdkContext) {\n  async function block(\n    {sealed = false, id, height}: BlockQueryOptions = {},\n    opts: object = {}\n  ): Promise<Block> {\n    invariant(\n      !((sealed && id) || (sealed && height)),\n      `Method: block -- Cannot pass \"sealed\" with \"id\" or \"height\"`\n    )\n\n    invariant(\n      !(id && height),\n      `Method: block -- Cannot pass \"id\" and \"height\" simultaneously`\n    )\n\n    // Get block by ID\n    if (id)\n      return await createSend(context)([getBlock(), atBlockId(id)], opts).then(\n        decode\n      )\n\n    // Get block by height\n    if (height)\n      return await createSend(context)(\n        [getBlock(), atBlockHeight(height)],\n        opts\n      ).then(decode)\n\n    // Get latest block\n    return await createSend(context)([getBlock(sealed)], opts).then(decode)\n  }\n\n  return block\n}\n\n/**\n * Query the network for block by id, height or get the latest block.\n *\n * Block ID is SHA3-256 hash of the entire block payload. This hash is stored as an ID field on any block response object (ie. response from `GetLatestBlock`).\n *\n * Block height expresses the height of the block on the chain. The latest block height increases by one for every valid block produced.\n *\n * @param queryOptions Query parameters\n * @param queryOptions.sealed Whether to query for a sealed block\n * @param queryOptions.height Block height to query\n * @param queryOptions.id Block ID to query\n * @param opts Optional parameters\n * @returns A promise that resolves to a Block object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get latest block\n * const latestBlock = await fcl.block(); // Get the latest finalized block\n * const latestSealedBlock = await fcl.block({sealed: true}); // Get the latest sealed block\n *\n * // Get block by ID (uses builder function)\n * await fcl.send([fcl.getBlock(), fcl.atBlockId(\"23232323232\")]).then(fcl.decode);\n *\n * // Get block at height (uses builder function)\n * await fcl.send([fcl.getBlock(), fcl.atBlockHeight(123)]).then(fcl.decode)\n */\nexport const block = /* @__PURE__ */ withGlobalContext(createBlock)\n","import {\n  Ok,\n  makeGetNodeVerionInfo,\n  pipe,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function for the Get Node Version Info interaction.\n *\n * Creates an interaction to retrieve version information from the connected Flow Access Node.\n * This includes details about the node's software version, protocol version, and spork information.\n *\n * Consider using the pre-built interaction 'fcl.nodeVersionInfo()' if you do not need to pair with any other builders.\n *\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get node version information using builder\n * const versionInfo = await fcl.send([\n *   fcl.getNodeVersionInfo()\n * ]).then(fcl.decode);\n *\n * console.log(\"Node version:\", versionInfo.semver);\n * console.log(\"Protocol version:\", versionInfo.protocol_version);\n * console.log(\"Spork ID:\", versionInfo.spork_id);\n *\n * // Use with other builders if needed\n * const interaction = await fcl.build([\n *   fcl.getNodeVersionInfo()\n *   // other builders can be added here\n * ]);\n */\nexport function getNodeVersionInfo(): InteractionBuilderFn {\n  return pipe([\n    makeGetNodeVerionInfo,\n    ix => {\n      return Ok(ix)\n    },\n  ])\n}\n","import {NodeVersionInfo} from \"@onflow/typedefs\"\nimport {getNodeVersionInfo} from \"../build/build-get-node-version-info\"\nimport {decodeResponse as decode} from \"../decode/decode\"\nimport {send} from \"../transport\"\n\n/**\n * Retrieve version information from the connected Flow Access Node.\n *\n * This function returns detailed information about the Flow node's version, including the protocol version, spork information, and node-specific details. This is useful for debugging, compatibility checks, and understanding the network state.\n *\n * @param opts Optional parameters for the request\n * @returns A promise that resolves to a block response\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get node version information\n * const versionInfo = await fcl.nodeVersionInfo();\n * console.log(versionInfo);\n * // {\n * //   semver: \"v0.37.13\",\n * //   commit: \"12345abcd\",\n * //   spork_id: \"mainnet-23\",\n * //   protocol_version: \"2.13.10\",\n * //   spork_root_block_height: \"88483760\",\n * //   node_root_block_height: \"88483760\"\n * // }\n *\n * // Check compatibility\n * const info = await fcl.nodeVersionInfo();\n * if (info.protocol_version.startsWith(\"2.13\")) {\n *   console.log(\"Compatible with current protocol version\");\n * }\n */\nexport async function nodeVersionInfo(\n  opts: any = {}\n): Promise<NodeVersionInfo> {\n  return await send([getNodeVersionInfo()], opts).then(decode)\n}\n","import {InteractionAccount, TransactionRole} from \"@onflow/typedefs\"\nimport {\n  AccountAuthorization,\n  pipe,\n  prepAccount,\n} from \"../interaction/interaction\"\nimport {Voucher} from \"../encode/encode\"\n\n/**\n * An object that contains all the information needed for FCL to sign a message with the user's signature.\n * Note: These values are destructed from the payload object in the first argument of a signing function.\n */\ninterface SignableMessage {\n  /**\n   * The encoded string which needs to be used to produce the signature.\n   */\n  message: string\n  /**\n   * The encoded string which needs to be used to produce the signature.\n   */\n  addr: string\n  /**\n   * The encoded string which needs to be used to produce the signature.\n   */\n  keyId: number | string\n  /**\n   * The encoded string which needs to be used to produce the signature.\n   */\n  roles: {\n    /**\n     * A Boolean representing if this signature to be produced for a proposer.\n     */\n    proposer: boolean\n    /**\n     * A Boolean representing if this signature to be produced for a authorizer.\n     */\n    authorizer: boolean\n    /**\n     * A Boolean representing if this signature to be produced for a payer.\n     */\n    payer: boolean\n  }\n  /**\n   * The raw transactions information, can be used to create the message for additional safety and lack of trust in the supplied message.\n   */\n  voucher: Voucher\n}\n\n/**\n * The object that contains all the information needed by FCL to authorize a user's transaction.\n */\ninterface SigningResult {\n  /**\n   * The address of the Flow Account this signature was produced for.\n   */\n  addr?: string\n  /**\n   * The keyId for which key was used to produce the signature.\n   */\n  keyId?: number | string\n  /**\n   * The hex encoded string representing the signature of the message.\n   */\n  signature: string\n}\n\n/**\n * A signing function consumes a payload and produces a signature for a transaction.\n * This function is always async.\n * Only write your own signing function if you are writing your own custom authorization function.\n */\ntype SigningFn = (\n  signable?: SignableMessage\n) => SigningResult | Promise<SigningResult>\n\n/**\n * A utility builder to set the authorizations on a transaction.\n *\n * Authorizations define the accounts that are responsible for paying the transaction fees and providing signatures for the transaction.\n * You can have multiple authorizers in a single transaction (multi-signature transactions).\n *\n * Read more about [transaction roles](https://docs.onflow.org/concepts/transaction-signing/) and [signing transactions](https://docs.onflow.org/concepts/accounts-and-keys/).\n *\n * @param ax An array of authorization functions that produce account authorization details\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Single authorizer (most common case)\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(acct: AuthAccount) {\n *         log(\"Hello from: \".concat(acct.address.toString()))\n *       }\n *     }\n *   `,\n *   authorizations: [fcl.authz] // Current user authorization\n * });\n *\n * // Multiple authorizers - both accounts must approve\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(acct1: AuthAccount, acct2: AuthAccount) {\n *         log(\"Transaction signed by both accounts\")\n *       }\n *     }\n *   `,\n *   authorizations: [userOneAuthz, userTwoAuthz]\n * });\n *\n * // Using builder pattern\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(acct: AuthAccount) {\n *         acct.save(\"Hello, World!\", to: /storage/greeting)\n *       }\n *     }\n *   `,\n *   fcl.authorizations([fcl.authz]),\n *   fcl.proposer(fcl.authz),\n *   fcl.payer(fcl.authz),\n *   fcl.limit(100)\n * ]);\n */\nexport function authorizations(ax: Array<AccountAuthorization> = []) {\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {\n        role: TransactionRole.AUTHORIZER,\n      })\n    })\n  )\n}\n\n/**\n * Creates an authorization function for use in transactions.\n *\n * An authorization function must produce the information of the user that is going to sign and a signing function to use the information to produce a signature.\n *\n * Read more about [authorization functions](https://docs.onflow.org/fcl/reference/authorization-function/) and [transaction roles](https://docs.onflow.org/concepts/transaction-signing/).\n *\n * @param addr The address of the account that will sign the transaction\n * @param signingFunction A function that produces signatures for the account\n * @param keyId The index of the key to use for signing (optional)\n * @param sequenceNum The sequence number for the account key (optional)\n * @returns A partial interaction account object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n * import { ec as EC } from \"elliptic\";\n *\n * // Create a signing function\n * const signingFunction = ({ message }) => {\n *   // Your signing logic here\n *   return {\n *     addr: \"0x123456789abcdef0\",\n *     keyId: 0,\n *     signature: \"your_signature_here\"\n *   };\n * };\n *\n * // Create authorization\n * const authz = fcl.authorization(\n *   \"0x123456789abcdef0\", // account address\n *   signingFunction,     // signing function\n *   0,                   // key ID\n *   42                   // sequence number\n * );\n *\n * // Use in transaction\n * await fcl.mutate({\n *   cadence: `transaction { prepare(acct: AuthAccount) {} }`,\n *   proposer: authz,\n *   payer: authz,\n *   authorizations: [authz]\n * });\n */\nexport function authorization(\n  addr: string,\n  signingFunction: SigningFn,\n  keyId?: number | string,\n  sequenceNum?: number\n): Partial<InteractionAccount> {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {\n  pipe,\n  Ok,\n  makeGetEvents,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the interaction to get events.\n *\n * Events are emitted by Cadence code during transaction execution and provide insights into what happened during execution.\n * This function queries for events of a specific type within a range of block heights.\n *\n * @param eventType The type of event to get (e.g., \"A.1654653399040a61.FlowToken.TokensWithdrawn\")\n * @param start The start block height to query from\n * @param end The end block height to query to\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get FlowToken transfer events from blocks 1000 to 2000\n * const events = await fcl.send([\n *   fcl.getEvents(\"A.1654653399040a61.FlowToken.TokensDeposited\", 1000, 2000)\n * ]).then(fcl.decode);\n *\n * console.log(\"Found events:\", events.length);\n * events.forEach(event => {\n *   console.log(\"Event data:\", event.data);\n *   console.log(\"Transaction ID:\", event.transactionId);\n * });\n */\nexport function getEvents(\n  eventType: string,\n  start: number,\n  end: number\n): InteractionBuilderFn {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  pipe,\n  Ok,\n  makeGetEvents,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns all instances of a particular event (by name) within a height range.\n *\n * The block range provided must be from the current spork.\n *\n * The block range provided must be 250 blocks or lower per request.\n *\n * Event type is a string that follow a standard format: A.{AccountAddress}.{ContractName}.{EventName}\n *\n * Please read more about [events in the documentation](https://docs.onflow.org/cadence/language/events/).\n *\n * Block height range expresses the height of the start and end block in the chain.\n *\n * @param eventType The type of event to get\n * @param startHeight The height of the block to start looking for events (inclusive)\n * @param endHeight The height of the block to stop looking for events (inclusive)\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get events at block height range\n * await fcl\n *   .send([\n *     fcl.getEventsAtBlockHeightRange(\n *       \"A.7e60df042a9c0868.FlowToken.TokensWithdrawn\", // event name\n *       35580624, // block to start looking for events at\n *       35580624 // block to stop looking for events at\n *     ),\n *   ])\n *   .then(fcl.decode);\n */\nexport function getEventsAtBlockHeightRange(\n  eventType: string,\n  startHeight: number,\n  endHeight: number\n): InteractionBuilderFn {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = startHeight\n      ix.events.end = endHeight\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  pipe,\n  Ok,\n  makeGetEvents,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns all instances of a particular event (by name) within a set of blocks, specified by block ids.\n *\n * The block range provided must be from the current spork.\n *\n * Event type is a string that follow a standard format: A.{AccountAddress}.{ContractName}.{EventName}\n *\n * Please read more about [events in the documentation](https://docs.onflow.org/cadence/language/events/).\n *\n * @param eventType The type of event to get\n * @param blockIds The ids of the blocks to scan for events\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * const events = await fcl.send([\n *   fcl.getEventsAtBlockIds(\"A.7e60df042a9c0868.FlowToken.TokensWithdrawn\", [\n *     \"c4f239d49e96d1e5fbcf1f31027a6e582e8c03fcd9954177b7723fdb03d938c7\",\n *     \"5dbaa85922eb194a3dc463c946cc01c866f2ff2b88f3e59e21c0d8d00113273f\"\n *   ])\n * ]).then(fcl.decode);\n */\nexport function getEventsAtBlockIds(\n  eventType: string,\n  blockIds: string[]\n): InteractionBuilderFn {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  pipe,\n  Ok,\n  makeGetBlockHeader,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the interaction to get a block header.\n *\n * A block header contains metadata about a block without the full transaction details, making it more\n * lightweight than fetching the entire block. This is useful when you only need block metadata like\n * timestamp, height, parent hash, etc.\n *\n * Use with 'fcl.atBlockId()' and 'fcl.atBlockHeight()' when building the interaction to get headers for specific blocks.\n *\n * @param isSealed Block finality state, true for sealed blocks, false for finalized blocks, null for latest\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get latest sealed block header\n * const sealedHeader = await fcl.send([\n *   fcl.getBlockHeader(true)\n * ]).then(fcl.decode);\n *\n * console.log(\"Block height:\", sealedHeader.height);\n * console.log(\"Block timestamp:\", sealedHeader.timestamp);\n * console.log(\"Parent block ID:\", sealedHeader.parentId);\n *\n * // Get header for specific block\n * const blockHeader = await fcl.send([\n *   fcl.getBlockHeader(),\n *   fcl.atBlockHeight(12345)\n * ]).then(fcl.decode);\n *\n * // Get latest finalized block header\n * const finalizedHeader = await fcl.send([\n *   fcl.getBlockHeader(false)\n * ]).then(fcl.decode);\n */\nexport function getBlockHeader(\n  isSealed: boolean | null = null\n): InteractionBuilderFn {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  pipe,\n  makeGetCollection,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns a collection containing a list of transaction IDs by its collection ID.\n *\n * A collection is a batch of transactions that have been included in a block. Each collection has a unique ID\n * which is the SHA3-256 hash of the collection payload. Collections are used to group related transactions\n * together for more efficient processing by the network.\n *\n * The collection ID provided must be from the current spork. Collections from past sporks are currently unavailable.\n *\n * @param collectionID The ID of the collection to retrieve\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get a collection and see what transactions it contains\n * const collection = await fcl.send([\n *   fcl.getCollection(\"cccdb0c67d015dc7f6444e8f62a3244ed650215ed66b90603006c70c5ef1f6e5\")\n * ]).then(fcl.decode);\n *\n * console.log(\"Collection ID:\", collection.id);\n * console.log(\"Transaction IDs:\", collection.transactionIds);\n * console.log(\"Total transactions:\", collection.transactionIds.length);\n *\n * // Process each transaction in the collection\n * for (const txId of collection.transactionIds) {\n *   const transaction = await fcl.send([\n *     fcl.getTransaction(txId)\n *   ]).then(fcl.decode);\n *   console.log(\"Transaction:\", transaction);\n * }\n */\nexport function getCollection(id: string | null = null): InteractionBuilderFn {\n  return pipe([\n    makeGetCollection,\n    ix => {\n      ix.collection.id = id\n      return ix\n    },\n  ])\n}\n","import {\n  pipe,\n  Ok,\n  makeGetTransactionStatus,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the status of transaction.\n *\n * The transaction id provided must be from the current spork.\n *\n * Consider using 'fcl.tx(id)' instead of calling this method directly for real-time transaction monitoring.\n *\n * @param transactionId The id of the transaction to get the status of\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * const status = await fcl.send([\n *   fcl.getTransactionStatus(\"9dda5f281897389b99f103a1c6b180eec9dac870de846449a302103ce38453f3\")\n * ]).then(fcl.decode);\n */\nexport function getTransactionStatus(\n  transactionId: string\n): InteractionBuilderFn {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  InteractionBuilderFn,\n  Ok,\n  makeGetTransaction,\n  pipe,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the interaction to get a transaction by id.\n *\n * Transaction id is a hash of the encoded transaction payload and can be calculated before submitting the transaction to the network.\n * Transaction status represents the state of a transaction in the blockchain. Status can change until it is finalized.\n *\n * The transaction id provided must be from the current spork.\n *\n * Consider using 'fcl.tx(id).onceExecuted()' instead of calling this method directly for real-time transaction monitoring.\n *\n * @param transactionId The id of the transaction to get\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * const tx = await fcl.send([\n *   fcl.getTransaction(\"9dda5f281897389b99f103a1c6b180eec9dac870de846449a302103ce38453f3\")\n * ]).then(fcl.decode);\n */\nexport function getTransaction(id: string): InteractionBuilderFn {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = id\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  pipe,\n  makeGetNetworkParameters,\n  Ok,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that returns the interaction to get network parameters.\n *\n * Network parameters contain important configuration information about the Flow network,\n * including the chain ID, which is essential for signing transactions correctly.\n * This information is crucial for ensuring transactions are submitted to the correct network.\n *\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Get network parameters to verify chain ID\n * const params = await fcl.send([\n *   fcl.getNetworkParameters()\n * ]).then(fcl.decode);\n *\n * console.log(\"Chain ID:\", params.chainId);\n * console.log(\"Network:\", params.name);\n *\n * // Use this to verify you're connected to the right network\n * if (params.chainId === \"flow-mainnet\") {\n *   console.log(\"Connected to Flow Mainnet\");\n * } else if (params.chainId === \"flow-testnet\") {\n *   console.log(\"Connected to Flow Testnet\");\n * }\n */\nexport function getNetworkParameters(): InteractionBuilderFn {\n  return pipe([\n    makeGetNetworkParameters,\n    ix => {\n      return Ok(ix)\n    },\n  ])\n}\n","import {InteractionBuilderFn} from \"../interaction/interaction\"\n\n/**\n * A utility builder to set the compute limit on a transaction.\n *\n * The compute limit is the maximum amount of computation that can be performed during transaction execution.\n * Setting an appropriate compute limit helps prevent infinite loops and ensures predictable transaction costs.\n *\n * Read more about [computation cost](https://docs.onflow.org/concepts/fees/#computation-cost) and [transaction fees](https://docs.onflow.org/concepts/fees/).\n *\n * @param limit The maximum amount of computation for the transaction\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         // Complex transaction logic here\n *       }\n *     }\n *   `,\n *   limit: 1000 // Set compute limit to 1000\n * });\n *\n * // Using builder pattern\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         // Transaction logic\n *       }\n *     }\n *   `,\n *   fcl.limit(9999) // Set higher limit for complex operations\n * ]);\n */\nexport function limit(limit: number): InteractionBuilderFn {\n  return ix => {\n    ix.message.computeLimit = limit\n    return ix\n  }\n}\n","import {pipe, makeArgument, CadenceArgument} from \"../interaction/interaction\"\nimport {TypeDescriptorInput, TypeDescriptor} from \"@onflow/types\"\n\n/**\n * A utility builder to be used with other builders to pass in arguments with a value and supported type.\n *\n * A transaction can accept zero or more arguments that are passed into the Cadence script. The arguments on the transaction must match the number and order declared in the Cadence script.\n * This function returns a Partial Interaction that contains the arguments and types passed in. This alone is a partial and incomplete interaction.\n *\n * @param ax An array of argument objects created with fcl.arg()\n * @returns A Partial Interaction object containing the arguments and types passed in\n *\n * @example\n * import * as fcl from \"@onflow/fcl\"\n *\n * await fcl.mutate({\n *   cadence: `\n *     transaction(amount: UFix64, to: Address) {\n *       prepare(signer: AuthAccount) {\n *         // transaction logic\n *       }\n *     }\n *   `,\n *   args: (arg, t) => [\n *     arg(\"10.0\", t.UFix64), // Will be the first argument `amount: UFix64`\n *     arg(\"0xba1132bc08f82fe2\", t.Address), // Will be the second argument `to: Address`\n *   ],\n * })\n */\nexport function args(ax: CadenceArgument<any>[]) {\n  return pipe(ax.map(makeArgument))\n}\n\n/**\n * A utility builder to be used with fcl.args[...] to create FCL supported arguments for interactions.\n *\n * Arguments are used to pass data to Cadence scripts and transactions. The arguments must match the number and order declared in the Cadence script.\n * This function creates an ArgumentObject that holds the value and type passed in.\n *\n * @param value Any value that you are looking to pass to other builders\n * @param xform A type supported by Flow (FType descriptor)\n * @returns An ArgumentObject that holds the value and type passed in\n *\n * @example\n * import * as fcl from \"@onflow/fcl\"\n *\n * const result = await fcl.query({\n *   cadence: `\n *     access(all) fun main(a: Int, b: Int, addr: Address): Int {\n *       log(addr)\n *       return a + b\n *     }\n *   `,\n *   args: (arg, t) => [\n *     arg(7, t.Int), // a: Int\n *     arg(6, t.Int), // b: Int\n *     arg(\"0xba1132bc08f82fe2\", t.Address), // addr: Address\n *   ],\n * });\n */\nexport function arg<T extends TypeDescriptor<any, any>>(\n  value: TypeDescriptorInput<T>,\n  xform: T\n) {\n  return {value, xform} as CadenceArgument<T>\n}\n","import {TransactionRole} from \"@onflow/typedefs\"\nimport {AccountAuthorization, prepAccount} from \"../interaction/interaction\"\n\n/**\n * A builder function that adds the proposer to a transaction.\n *\n * The proposer is responsible for providing the proposal key and paying the network fee for the transaction.\n * The proposer key is used to specify the sequence number and prevent replay attacks.\n *\n * Every transaction requires exactly one proposer.\n *\n * Read more about [transaction roles](https://docs.onflow.org/concepts/transaction-signing/#proposer) and [signing transactions](https://docs.onflow.org/concepts/accounts-and-keys/).\n *\n * @param authz The authorization object for the proposer\n * @returns A function that takes an interaction object and returns a new interaction object with the proposer added\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Using the current user as proposer\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Hello from proposer!\")\n *       }\n *     }\n *   `,\n *   proposer: fcl.authz\n * });\n *\n * // Using builder pattern\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Transaction executed\")\n *       }\n *     }\n *   `,\n *   fcl.proposer(proposerAuthz),\n *   fcl.payer(payerAuthz),\n *   fcl.authorizations([authorizerAuthz]),\n *   fcl.limit(100)\n * ]);\n */\nexport function proposer(authz: AccountAuthorization) {\n  return prepAccount(authz, {\n    role: TransactionRole.PROPOSER,\n  })\n}\n","import {TransactionRole} from \"@onflow/typedefs\"\nimport {\n  AccountAuthorization,\n  pipe,\n  prepAccount,\n} from \"../interaction/interaction\"\n\n/**\n * A builder function that adds payer account(s) to a transaction.\n *\n * Every transaction requires at least one payer.\n *\n * The payer is the account that pays the transaction fee for executing the transaction on the network.\n * The payer account must have sufficient Flow tokens to cover the transaction fees.\n *\n * Read more about [transaction roles](https://docs.onflow.org/concepts/transaction-signing/#payer) and [transaction fees](https://docs.onflow.org/concepts/fees/).\n *\n * @param ax An account address or an array of account addresses\n * @returns A function that takes an interaction object and returns a new interaction object with the payer(s) added\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Using current user as payer (most common case)\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(acct: AuthAccount) {\n *         log(\"Transaction fees paid by: \".concat(acct.address.toString()))\n *       }\n *     }\n *   `,\n *   payer: fcl.authz // Current user as payer\n * });\n *\n * // Using custom payer with builder pattern\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(acct: AuthAccount) {\n *         // Transaction logic\n *       }\n *     }\n *   `,\n *   fcl.proposer(fcl.authz),        // Current user as proposer\n *   fcl.authorizations([fcl.authz]), // Current user as authorizer\n *   fcl.payer(customPayerAuthz)     // Custom payer pays fees\n * ]);\n *\n * // Multiple payers (advanced use case)\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(acct: AuthAccount) {\n *         // Transaction logic\n *       }\n *     }\n *   `,\n *   fcl.payer([payerAuthz1, payerAuthz2]) // Multiple payers split fees\n * ]);\n */\nexport function payer(ax: AccountAuthorization[] = []) {\n  if (!Array.isArray(ax)) ax = [ax]\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {\n        role: TransactionRole.PAYER,\n      })\n    })\n  )\n}\n","import {makePing, InteractionBuilderFn} from \"../interaction/interaction\"\n\n/**\n * A builder function that creates a ping interaction to test connectivity to the Flow Access Node.\n *\n * The ping interaction is a simple way to test if the Flow Access Node is reachable and responding. This is useful for health checks, connectivity testing, and debugging network issues.\n *\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Simple ping to test connectivity\n * try {\n *   const response = await fcl.send([fcl.ping()]);\n *   console.log(\"Access Node is reachable\");\n * } catch (error) {\n *   console.error(\"Access Node is not reachable:\", error);\n * }\n *\n * // Use ping for health checks\n * const healthCheck = async () => {\n *   try {\n *     await fcl.send([fcl.ping()]);\n *     return { status: \"healthy\", timestamp: new Date().toISOString() };\n *   } catch (error) {\n *     return { status: \"unhealthy\", error: error.message, timestamp: new Date().toISOString() };\n *   }\n * };\n *\n * const health = await healthCheck();\n * console.log(\"Health status:\", health);\n */\nexport function ping(): InteractionBuilderFn {\n  return makePing\n}\n","import {pipe, Ok, InteractionBuilderFn} from \"../interaction/interaction\"\n\n/**\n * A builder function that sets the reference block for a transaction.\n *\n * The reference block specifies an expiration window (measured in blocks) during which a transaction is considered valid by the network.\n * A transaction will be rejected if it is submitted past its expiry block. Flow calculates transaction expiry using the reference block field.\n *\n * @param refBlock The reference block ID\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Set specific reference block for transaction\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Transaction with custom reference block\")\n *       }\n *     }\n *   `,\n *   fcl.ref(\"a1b2c3d4e5f6789...\"), // Custom reference block ID\n *   fcl.proposer(fcl.authz),\n *   fcl.payer(fcl.authz),\n *   fcl.authorizations([fcl.authz]),\n *   fcl.limit(100)\n * ]);\n *\n * // Usually, you don't need to set reference block manually\n * // as FCL will automatically set it to the latest block\n */\nexport function ref(refBlock: string): InteractionBuilderFn {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    },\n  ])\n}\n","import {\n  pipe,\n  put,\n  makeScript,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\nimport {template} from \"@onflow/util-template\"\n\n/**\n * A builder function that creates a script interaction. Scripts allow you to write arbitrary non-mutating Cadence code on the Flow blockchain and return data.\n *\n * You can learn more about [Cadence here](https://cadence-lang.org/docs/language), but we are now only interested in executing the script code and getting back the data.\n *\n * We can execute a script using the latest state of the Flow blockchain or we can choose to execute the script at a specific time in history defined by a block height or block ID.\n *\n * Block ID is SHA3-256 hash of the entire block payload, but you can get that value from the block response properties.\n *\n * Block height expresses the height of the block in the chain.\n *\n * @param args The arguments to pass to the template\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * const result = await fcl.query({\n *   cadence: `\n *     access(all) fun main(a: Int, b: Int, addr: Address): Int {\n *       log(addr)\n *       return a + b\n *     }\n *   `,\n *   args: (arg, t) => [\n *     arg(7, t.Int), // a: Int\n *     arg(6, t.Int), // b: Int\n *     arg(\"0xba1132bc08f82fe2\", t.Address), // addr: Address\n *   ],\n * });\n *\n * console.log(result); // 13\n */\nexport function script(\n  ...args: [\n    string | TemplateStringsArray | ((x?: unknown) => string),\n    ...unknown[],\n  ]\n): InteractionBuilderFn {\n  return pipe([makeScript, put(\"ix.cadence\", template(...args))])\n}\n","import {\n  pipe,\n  put,\n  Ok,\n  makeTransaction,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_SCRIPT_ACCOUNTS: string[] = []\nconst DEFAULT_REF: any = null\n\n/**\n * A template builder to use a Cadence transaction for an interaction. FCL \"mutate\" does the work of building, signing, and sending a transaction behind the scenes.\n *\n * Flow supports great flexibility when it comes to transaction signing, we can define multiple authorizers (multi-sig transactions) and have different payer account than proposer.\n *\n * @param args The arguments to pass to the template\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\"\n *\n * // Basic transaction usage\n * await fcl.mutate({\n *   cadence: `\n *     transaction(a: Int) {\n *       prepare(acct: &Account) {\n *         log(acct)\n *         log(a)\n *       }\n *     }\n *   `,\n *   args: (arg, t) => [\n *     arg(6, t.Int)\n *   ],\n *   limit: 50\n * })\n *\n * // Single party, single signature\n * // Proposer, payer and authorizer are the same account\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(acct: &Account) {}\n *     }\n *   `,\n *   authz: currentUser, // Optional. Will default to currentUser if not provided.\n *   limit: 50,\n * })\n *\n * // Multiple parties\n * // Proposer and authorizer are the same account, but different payer\n * await fcl.mutate({\n *   cadence: `\n *     transaction {\n *       prepare(acct: &Account) {}\n *     }\n *   `,\n *   proposer: authzFn,\n *   payer: authzTwoFn,\n *   authorizations: [authzFn],\n *   limit: 50,\n * })\n */\nexport function transaction(\n  ...args: [string | TemplateStringsArray, ...any[]]\n): InteractionBuilderFn {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.refBlock = ix.message.refBlock || DEFAULT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import {Ok, Bad} from \"../interaction/interaction\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, {Ok, Bad}) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {put, InteractionBuilderFn} from \"../interaction/interaction\"\nimport {Voucher} from \"../encode/encode\"\n\ntype VoucherInterceptFn = (voucher: Voucher) => any | Promise<any>\n\n/**\n * A builder function that intercepts and modifies a voucher.\n *\n * This function is useful for debugging, logging, or making modifications to\n * the transaction data. The voucher contains all the transaction details in their final form.\n *\n * @param fn The function to intercept and potentially modify the voucher\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Intercept voucher for logging\n * await fcl.send([\n *   fcl.transaction`\n *     transaction {\n *       prepare(account: AuthAccount) {\n *         log(\"Transaction executed\")\n *       }\n *     }\n *   `,\n *   fcl.voucherIntercept((voucher) => {\n *     console.log(\"Voucher details:\", {\n *       cadence: voucher.cadence,\n *       proposalKey: voucher.proposalKey,\n *       payer: voucher.payer,\n *       authorizers: voucher.authorizers,\n *       computeLimit: voucher.computeLimit\n *     });\n *   }),\n *   fcl.proposer(fcl.authz),\n *   fcl.payer(fcl.authz),\n *   fcl.authorizations([fcl.authz])\n * ]);\n */\nexport function voucherIntercept(fn: VoucherInterceptFn): InteractionBuilderFn {\n  return put(\"ix.voucher-intercept\", fn)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {\n  pipe,\n  Ok,\n  makeSubscribeEvents,\n  InteractionBuilderFn,\n} from \"../interaction/interaction\"\nimport {EventFilter, Interaction} from \"@onflow/typedefs\"\n\n/**\n * Subscribe to events with the given filter and parameters.\n *\n * Creates a subscription to listen for real-time events from the Flow blockchain. This function configures\n * the subscription parameters for filtering specific events based on type, addresses, contracts, and other criteria.\n *\n * Events are emitted by Cadence code during transaction execution and provide insights into what happened.\n * Subscriptions allow you to listen for these events in real-time without polling.\n *\n * @param filter The filter configuration for the event subscription\n * @param filter.startBlockId Optional block ID to start subscription from\n * @param filter.startHeight Optional block height to start subscription from\n * @param filter.eventTypes Array of event types to filter for\n * @param filter.addresses Array of account addresses to filter events from\n * @param filter.contracts Array of contract names to filter events from\n * @param filter.heartbeatInterval Interval for heartbeat messages in milliseconds\n * @returns A function that processes an interaction object\n *\n * @example\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Subscribe to FlowToken transfer events\n * const subscription = await fcl.send([\n *   fcl.subscribeEvents({\n *     eventTypes: [\n *       \"A.1654653399040a61.FlowToken.TokensWithdrawn\",\n *       \"A.1654653399040a61.FlowToken.TokensDeposited\"\n *     ],\n *     startHeight: 1000000, // Start from specific block height\n *     heartbeatInterval: 3000 // 3 second heartbeat\n *   })\n * ]);\n *\n * // Subscribe to events from specific contracts\n * const contractSubscription = await fcl.send([\n *   fcl.subscribeEvents({\n *     contracts: [\"FlowToken\", \"FungibleToken\"],\n *     addresses: [\"0x1654653399040a61\"]\n *   })\n * ]);\n *\n * // Handle the subscription data elsewhere using fcl.subscribe()\n */\nexport function subscribeEvents({\n  startBlockId,\n  startHeight,\n  eventTypes,\n  addresses,\n  contracts,\n  heartbeatInterval,\n}: EventFilter): InteractionBuilderFn {\n  invariant(\n    !(startBlockId && startHeight),\n    `SDK Subscribe Events Error: Cannot set both startBlockId and startHeight.`\n  )\n\n  return pipe([\n    makeSubscribeEvents,\n    (ix: Interaction) => {\n      ix.subscribeEvents.startBlockId = startBlockId ?? null\n      ix.subscribeEvents.startHeight = startHeight ?? null\n      ix.subscribeEvents.eventTypes = eventTypes ?? null\n      ix.subscribeEvents.addresses = addresses ?? null\n      ix.subscribeEvents.contracts = contracts ?? null\n      ix.subscribeEvents.heartbeatInterval = heartbeatInterval ?? null\n      return Ok(ix)\n    },\n  ])\n}\n","import {isTransaction, Ok} from \"../interaction/interaction\"\nimport * as ixModule from \"../interaction/interaction\"\nimport {response as responseModule} from \"../response/response\"\nimport {config} from \"@onflow/config\"\nimport {decodeResponse} from \"../decode/decode\"\nimport {getAccount} from \"../build/build-get-account\"\nimport {build} from \"../build/build\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\nimport {Interaction} from \"@onflow/typedefs\"\n\ninterface NodeConfig {\n  node: string\n}\n\n/**\n * Resolves the sequence number for the proposer account by querying the blockchain.\n *\n * @param config Configuration containing the node endpoint\n * @returns A function that resolves the proposer sequence number for an interaction\n */\nexport const resolveProposerSequenceNumber =\n  ({node}: NodeConfig) =>\n  async (ix: Interaction) => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.accounts[ix.proposer!].sequenceNum) return Ok(ix)\n\n    const sendFn: any = await config.first(\n      [\"sdk.transport\", \"sdk.send\"],\n      defaultSend\n    )\n\n    invariant(\n      sendFn,\n      `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n    )\n\n    const response = await sendFn(\n      await build([getAccount(ix.accounts[ix.proposer!].addr!)]),\n      {response: responseModule, Buffer, ix: ixModule},\n      {node}\n    )\n    const decoded = await decodeResponse(response)\n\n    ix.accounts[ix.proposer!].sequenceNum =\n      decoded.keys[ix.accounts[ix.proposer!].keyId!].sequenceNumber\n\n    return Ok(ix)\n  }\n","import {\n  isTransaction,\n  Ok,\n  initInteraction,\n  pipe,\n} from \"../interaction/interaction\"\nimport * as ixModule from \"../interaction/interaction\"\nimport {response} from \"../response/response\"\nimport {config} from \"@onflow/config\"\nimport {decodeResponse} from \"../decode/decode\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport {send as defaultSend} from \"@onflow/transport-http\"\n\nasync function getRefId(opts?: {[key: string]: any}): Promise<string> {\n  const node = await config().get(\"accessNode.api\")\n  const sendFn: any = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    defaultSend\n  )\n\n  invariant(\n    sendFn,\n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  var ix\n  ix = await pipe(initInteraction(), [getBlock()])\n  ix = await sendFn(ix, {response, Buffer, ix: ixModule}, {node})\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\n/**\n * Resolves the reference block ID for a transaction by querying the latest block from the network.\n *\n * @param opts Optional configuration parameters\n * @returns A function that resolves the reference block ID for an interaction\n */\nexport function resolveRefBlockId(opts?: {[key: string]: any}) {\n  return async (ix: any) => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isGetAccount, isGetBlock} from \"../interaction/interaction\"\n\nexport function mockAccountResponse(ix, numberOfKeys = 5) {\n  // prettier-ignore\n  invariant(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix)\n  // prettier-ignore\n  invariant( ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix)\n\n  const address = ix.account.addr\n\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({length: numberOfKeys}, (_, i) => ({\n        index: i,\n        sequenceNumber: 42,\n      })),\n    },\n  }\n}\n\nexport function mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\",\n    },\n  }\n}\n\nconst identity = v => v\n\nexport function mockSend(fallback = identity) {\n  return async function execSend(ix) {\n    ix = await ix\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix)\n\n      case isGetBlock(ix):\n        return mockGetBlockResponse(ix)\n\n      default:\n        return fallback(ix)\n    }\n  }\n}\n","import {InteractionAccount} from \"@onflow/typedefs\"\nimport {withPrefix} from \"@onflow/util-address\"\n\n/**\n * Generates a unique identifier for an account based on its address and key ID.\n *\n * @param acct The account object\n * @returns A string identifier in the format \"address-keyId\"\n */\nexport const idof = (acct: InteractionAccount) =>\n  `${withPrefix(acct.addr)}-${acct.keyId}`\n\n/**\n * Generates a test signature string for an account.\n *\n * @param opts Partial account object containing address and keyId\n * @returns A test signature string in the format \"SIGNATURE.address.keyId\"\n */\nexport function sig(opts: Partial<InteractionAccount>) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\")\n}\n\ninterface IAuthzOpts {\n  signingFunction?: (signable: any) => any\n}\n\n/**\n * Creates a test authorization function for testing transactions.\n *\n * @param opts Optional configuration including custom signing function\n * @returns An authorization function that can be used in tests\n */\nexport function authzFn(opts: IAuthzOpts = {}) {\n  return function (account: Partial<InteractionAccount>) {\n    const acct: Partial<InteractionAccount> = {\n      ...account,\n      ...opts,\n      resolve: null,\n      signingFunction:\n        opts.signingFunction ||\n        account.signingFunction ||\n        fallbackSigningFunction,\n    }\n\n    return acct\n\n    function fallbackSigningFunction(_signable: any) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct),\n      }\n    }\n  }\n}\n\ninterface IAuthzResolveOpts {\n  tempId?: string\n}\n\n/**\n * Creates a test authorization resolver that can be used for testing account resolution.\n *\n * @param opts Optional configuration including temporary ID\n * @returns A function that returns an account with resolve capability\n */\nexport function authzResolve(opts: IAuthzResolveOpts = {}) {\n  return function (account: InteractionAccount) {\n    const {tempId, ...rest} = opts\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest),\n    }\n  }\n}\n\nconst ROLE = {proposer: false, authorizer: false, payer: false}\nconst noop = () => {}\n\ninterface IAuthzResolveMany {\n  tempId?: string\n  authorizations: any[]\n  proposer?: any\n  payer?: any\n}\n\n/**\n * Creates a test authorization resolver that handles multiple accounts with different roles.\n *\n * @param opts Configuration including authorizations array and optional proposer/payer\n * @returns A function that returns an account with multi-role resolve capability\n */\nexport function authzResolveMany(\n  opts: IAuthzResolveMany = {authorizations: []}\n) {\n  return function (account: InteractionAccount): InteractionAccount {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve: () =>\n        [\n          opts.proposer &&\n            authzFn(opts.proposer)({role: {...ROLE, proposer: true}}),\n          ...opts.authorizations\n            .map(authzFn)\n            .map(d => d({role: {...ROLE, authorizer: true}})),\n          opts.payer && authzFn(opts.payer)({role: {...ROLE, payer: true}}),\n        ].filter(Boolean),\n    }\n  }\n}\n\n/**\n * Creates a deep test authorization resolver with nested resolution for complex testing scenarios.\n *\n * @param opts Configuration including authorizations array and optional proposer/payer\n * @param depth The depth of nesting for the resolver (default: 1)\n * @returns A function that returns an account with deep nested resolve capability\n */\nexport function authzDeepResolveMany(\n  opts: IAuthzResolveMany = {authorizations: []},\n  depth = 1\n) {\n  return function (account: InteractionAccount): InteractionAccount {\n    const tempId = opts.tempId || \"AUTHZ_DEEP_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve:\n        depth > 0\n          ? authzDeepResolveMany(opts, depth - 1)(account).resolve\n          : authzResolveMany(opts)(account).resolve,\n    }\n  }\n}\n","import {build} from \"../build/build\"\nimport {resolve} from \"../resolve/resolve\"\nimport {ref} from \"../build/build-ref\"\nimport {Interaction} from \"@onflow/typedefs\"\n\n/**\n * Runs a set of functions on an interaction\n *\n * This is a utility function for testing that builds and resolves an interaction with the provided builder functions.\n * It automatically adds a reference block and then resolves the interaction for testing purposes.\n *\n * @param fns An array of functions to run on the interaction\n * @returns A promise that resolves to the resolved interaction\n *\n * @example\n * import { run } from \"@onflow/sdk\"\n * import * as fcl from \"@onflow/fcl\";\n *\n * // Test a simple script interaction\n * const result = await run([\n *   fcl.script`\n *     access(all) fun main(): Int {\n *       return 42\n *     }\n *   `\n * ]);\n *\n * console.log(result.cadence); // The Cadence script\n * console.log(result.tag); // \"SCRIPT\"\n *\n * // Test a transaction with arguments\n * const txResult = await run([\n *   fcl.transaction`\n *     transaction(amount: UFix64) {\n *       prepare(account: AuthAccount) {\n *         log(amount)\n *       }\n *     }\n *   `,\n *   fcl.args([fcl.arg(\"10.0\", fcl.t.UFix64)])\n * ]);\n *\n * console.log(txResult.message.arguments); // The resolved arguments\n */\nexport const run = (\n  fns: Array<(ix: Interaction) => Interaction | Promise<Interaction>> = []\n) => build([ref(\"123\"), ...fns]).then(resolve)\n","declare const PACKAGE_CURRENT_VERSION: string | undefined\n\nexport const VERSION: string = PACKAGE_CURRENT_VERSION || \"TESTVERSION\"\n","export const flowMainnet: Record<string, unknown> = {\n  \"flow.network\": \"mainnet\",\n  \"accessNode.api\": \"https://rest-mainnet.onflow.org\",\n  \"discovery.wallet\": \"https://fcl-discovery.onflow.org/authn\",\n}\n\nexport const flowTestnet: Record<string, unknown> = {\n  \"flow.network\": \"testnet\",\n  \"accessNode.api\": \"https://rest-testnet.onflow.org\",\n  \"discovery.wallet\": \"https://fcl-discovery.onflow.org/testnet/authn\",\n}\n\nexport const flowEmulator: Record<string, unknown> = {\n  \"flow.network\": \"local\",\n  \"accessNode.api\": \"http://127.0.0.1:8888\",\n  \"discovery.wallet\": \"http://localhost:8701/fcl/authn\",\n}\n","import {SdkTransport} from \"@onflow/typedefs\"\n\n/**\n * Options for configuring the SDK client.\n */\nexport interface SdkClientOptions {\n  /**\n   * The URL of the Flow access node to connect to.\n   */\n  accessNodeUrl: string\n  /**\n   * The transport object used for sending requests to the Flow network.\n   */\n  transport: SdkTransport\n  /**\n   * The compute limit for transactions and queries.\n   */\n  computeLimit: number\n  /**\n   * Map of contract names to their addresses.\n   * @example\n   * ```ts\n   * {\n   *   \"FlowToken\": \"0x9a07664d3c2b5f8\",\n   * }\n   * ```\n   */\n  contracts?: {\n    [contractName: string]: string\n  }\n  customResolver?: (args: any) => Promise<any>\n  customDecoders?: {[key: string]: (data: any) => any}\n}\n\nexport interface SdkContext {\n  get accessNodeUrl(): string\n  get transport(): SdkTransport\n  get computeLimit(): number\n  get customResolver(): ((args: any) => Promise<any>) | undefined\n  get customDecoders(): {[key: string]: (data: any) => any}\n\n  // Map of contract names to their addresses\n  // e.g. { \"FlowToken\": \"0x9a07664d3c2b5f8\" }\n  get contracts(): {\n    [contractName: string]: string\n  }\n\n  // Legacy properties for backwards compatibility\n  get debug(): {[key: string]: any} // Debug options for internal use\n  get legacyContractIdentifiers(): Record<string, string>\n}\n\n/**\n * Creates a new SDK context with the provided configuration.\n */\nexport function createContext({\n  accessNodeUrl,\n  transport,\n  computeLimit,\n  customResolver,\n  customDecoders = {},\n  contracts = {},\n}: SdkClientOptions): SdkContext {\n  if (!transport) {\n    throw new Error(\"Transport must be provided to create SDK context\")\n  }\n\n  // Ensure transport is an instance of SdkTransport\n  if (typeof transport.send !== \"function\") {\n    throw new Error(\"Invalid transport provided, must implement send method\")\n  }\n\n  if (typeof transport.subscribe !== \"function\") {\n    throw new Error(\n      \"Invalid transport provided, must implement subscribe method\"\n    )\n  }\n\n  if (!accessNodeUrl) {\n    throw new Error(\"Access node must be provided to create SDK context\")\n  }\n\n  if (typeof accessNodeUrl !== \"string\") {\n    throw new Error(\"Access node must be a string URL\")\n  }\n\n  if (typeof computeLimit !== \"number\" || computeLimit <= 0) {\n    throw new Error(\"Compute limit must be a positive number\")\n  }\n\n  return {\n    transport,\n    accessNodeUrl,\n    computeLimit,\n    customResolver,\n    customDecoders,\n    debug: {},\n    contracts,\n    legacyContractIdentifiers: {},\n  }\n}\n","import {createContext, SdkClientOptions} from \"./context/context\"\nimport {createSend} from \"./transport/send/send\"\nimport {createSubscribe} from \"./transport/subscribe/subscribe\"\nimport {createSubscribeRaw} from \"./transport/subscribe/subscribe-raw\"\nimport {createAccount} from \"./account/account\"\nimport {createBlock} from \"./block/block\"\nimport {createResolve} from \"./resolve/resolve\"\nimport {createDecode} from \"./decode/sdk-decode\"\n\n/**\n * Creates an SDK client with the provided options.\n * @param options - Configuration options for the SDK client.\n * @returns A client object with methods to interact with the Flow blockchain.\n * @example\n * const client = createSdkClient({\n *  accessNodeUrl: \"https://rest-mainnet.onflow.org\",\n *  transport: myTransport,\n *  computeLimit: 1000,\n * })\n * client.send([myScript, myTransaction])\n *   .then(client.decode)\n *   .catch(error => console.error(\"Error sending request:\", error))\n */\nexport function createSdkClient(options: SdkClientOptions) {\n  const context = createContext(options)\n\n  return {\n    send: createSend(context),\n    subscribe: createSubscribe(context),\n    subscribeRaw: createSubscribeRaw(context),\n    account: createAccount(context),\n    block: createBlock(context),\n    resolve: createResolve(context),\n    decode: createDecode(context),\n  }\n}\n","import * as logger from \"@onflow/util-logger\"\n// Base\nexport {build} from \"./build/build\"\nexport {resolve} from \"./resolve/resolve\"\nexport {\n  send,\n  subscribe,\n  subscribeRaw,\n  SubscriptionsNotSupportedError,\n} from \"./transport\"\nexport {decode} from \"./decode/sdk-decode\"\nexport {\n  encodeTransactionPayload,\n  encodeTransactionEnvelope,\n  encodeTxIdFromVoucher,\n} from \"./encode/encode\"\n\n// Utils\nexport {\n  interaction, // deprecated\n  initInteraction,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  get,\n  put,\n  update,\n  destroy,\n  isUnknown,\n  isScript,\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isGetAccount,\n  isGetEvents,\n  isPing,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetCollection,\n  isGetNetworkParameters,\n  isGetNodeVersionInfo,\n} from \"./interaction/interaction\"\nimport type {CadenceArgument} from \"./interaction/interaction\"\nexport {CadenceArgument} // Workaround for babel https://github.com/babel/babel/issues/8361\nimport type {\n  InteractionBuilderFn,\n  AccountAuthorization,\n  AuthorizationFn,\n} from \"./interaction/interaction\"\nexport {InteractionBuilderFn, AccountAuthorization, AuthorizationFn}\n\nexport {createSignableVoucher, voucherToTxId} from \"./resolve/voucher\"\nexport {encodeMessageFromSignable} from \"./wallet-utils/encode-signable\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\nimport type {\n  Voucher,\n  Signable,\n  PayloadSig,\n} from \"./wallet-utils/encode-signable\"\nexport {Voucher, Signable, PayloadSig}\n\n// Helpers\nexport {account} from \"./account/account\"\nexport {block} from \"./block/block\"\nexport {nodeVersionInfo} from \"./node-version-info/node-version-info\"\n\n// Builders\nexport {authorizations, authorization} from \"./build/build-authorizations\"\nexport {atBlockHeight} from \"./build/build-at-block-height\"\nexport {atBlockId} from \"./build/build-at-block-id\"\nexport {atLatestBlock} from \"./build/build-at-latest-block\"\nexport {getAccount} from \"./build/build-get-account\"\nexport {getEvents} from \"./build/build-get-events\"\nexport {getEventsAtBlockHeightRange} from \"./build/build-get-events-at-block-height-range\"\nexport {getEventsAtBlockIds} from \"./build/build-get-events-at-block-ids\"\nexport {getBlock} from \"./build/build-get-block\"\nexport {getBlockHeader} from \"./build/build-get-block-header\"\nexport {getCollection} from \"./build/build-get-collection\"\nexport {getTransactionStatus} from \"./build/build-get-transaction-status\"\nexport {getTransaction} from \"./build/build-get-transaction\"\nexport {getNetworkParameters} from \"./build/build-get-network-parameters\"\nexport {getNodeVersionInfo} from \"./build/build-get-node-version-info\"\nexport {limit} from \"./build/build-limit\"\nexport {args, arg} from \"./build/build-arguments\"\nexport {proposer} from \"./build/build-proposer\"\nexport {payer} from \"./build/build-payer\"\nexport {ping} from \"./build/build-ping\"\nexport {ref} from \"./build/build-ref\"\nexport {script} from \"./build/build-script\"\nexport {transaction} from \"./build/build-transaction\"\nexport {validator} from \"./build/build-validator\"\nexport {invariant} from \"./build/build-invariant\"\nexport {voucherIntercept} from \"./build/build-voucher-intercept\"\nexport {subscribeEvents} from \"./build/build-subscribe-events\"\n\n// Resolvers\nexport {resolveCadence} from \"./resolve/resolve-cadence\"\nexport {resolveFinalNormalization} from \"./resolve/resolve-final-normalization\"\nexport {resolveProposerSequenceNumber} from \"./resolve/resolve-proposer-sequence-number\"\nexport {resolveArguments} from \"./resolve/resolve-arguments\"\nexport {resolveAccounts} from \"./resolve/resolve-accounts\"\nexport {response} from \"./response/response\"\nexport {resolveSignatures} from \"./resolve/resolve-signatures\"\nexport {resolveValidators} from \"./resolve/resolve-validators\"\nexport {resolveRefBlockId} from \"./resolve/resolve-ref-block-id\"\nexport {resolveVoucherIntercept} from \"./resolve/resolve-voucher-intercept\"\n\nexport {config} from \"@onflow/config\"\n\n/**\n * Legacy function for setting parameters on an interaction.\n *\n * @deprecated This function has been removed. Use `args` instead.\n *\n * @param params The parameters to set\n */\nexport const params = (params: never) =>\n  logger.log.deprecate({\n    pkg: \"FCL/SDK\",\n    message: `The params builder has been removed from the Flow JS-SDK/FCL.`,\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n    level: logger.LEVELS.error,\n  })\n\n/**\n * Legacy function for setting a single parameter on an interaction.\n *\n * @deprecated This function has been removed. Use `arg` instead.\n *\n * @param params The parameter to set\n */\nexport const param = (params: never) =>\n  logger.log.deprecate({\n    pkg: \"FCL/SDK\",\n    message: `The param builder has been removed from the Flow JS-SDK/FCL.`,\n    transition:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n    level: logger.LEVELS.error,\n  })\n\nimport * as TestUtils from \"./test-utils\"\nexport {TestUtils}\n\nexport {VERSION} from \"./VERSION\"\n\nexport {flowMainnet, flowTestnet, flowEmulator} from \"./constants\"\n\nexport * from \"@onflow/typedefs\"\n\nimport * as types from \"@onflow/types\"\nexport {types as t}\n\nexport {createSdkClient} from \"./sdk-client\"\nexport {type SdkClientOptions} from \"./context/context\"\n"],"names":["ACCT","InteractionResolverKind","ACCOUNT","ARG","ARGUMENT","IX","InteractionTag","UNKNOWN","InteractionStatus","OK","KEYS","Set","Object","keys","JSON","parse","initInteraction","interaction","log","deprecate","pkg","message","transition","level","LEVELS","warn","isNumber","d","isArray","Array","isObj","isNull","isFn","isInteraction","ix","key","hasOwnProperty","Ok","status","Bad","reason","BAD","makeIx","wat","tag","prepAccountKeyId","acct","keyId","invariant","isNaN","parseInt","toString","initAccount","prepAccount","opts","arguments","length","undefined","role","tempId","uuidv4","account","authorization","resolve","_len","rest","_key","reduce","fn","accounts","TransactionRole","AUTHORIZER","authorizations","push","PAYER","payer","makeArgument","arg","value","asArgument","xform","resolveArgument","bind","makeUnknown","makeScript","SCRIPT","makeTransaction","TRANSACTION","makeGetTransactionStatus","GET_TRANSACTION_STATUS","makeGetTransaction","GET_TRANSACTION","makeGetAccount","GET_ACCOUNT","makeGetEvents","GET_EVENTS","makePing","PING","makeGetBlock","GET_BLOCK","makeGetBlockHeader","GET_BLOCK_HEADER","makeGetCollection","GET_COLLECTION","makeGetNetworkParameters","GET_NETWORK_PARAMETERS","makeSubscribeEvents","SUBSCRIBE_EVENTS","makeGetNodeVerionInfo","GET_NODE_VERSION_INFO","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isPing","isGetBlock","isGetBlockHeader","isGetCollection","isGetNetworkParameters","isGetNodeVersionInfo","isSubscribeEvents","isOk","isBad","why","isAccount","kind","isArgument","argument","hardMode","has","Error","recPipe","fns","hd","cur","e","pipe","_len2","args","_key2","arg1","arg2","identity","v","get","fallback","assigns","put","update","destroy","build","DEFAULT_RESPONSE","transaction","transactionStatus","transactionId","encodedData","events","event","accountStatusEvent","block","blockHeader","blockDigest","latestBlock","collection","networkParameters","streamConnection","heartbeat","nodeVersionInfo","response","getBlock","isSealed","getAccount","addr","sansPrefix","decodeStream","stream","decodeResponse","customDecoders","newStream","EventEmitter","queue","taskQueue","on","data","topics","filter","newDataPromise","Promise","all","map","channel","partialResponse","newData","forEach","_ref","emit","relayEvent","callback","off","close","running","run","task","shift","latestBlockDeprecationNotice","subject","decodeImplicit","i","decodeVoid","decodeType","type","staticType","decodeOptional","optional","decoders","stack","recurseDecode","decodeArray","array","res","decodeDictionary","dictionary","acc","decodeComposite","composite","decoded","fields","name","decoder","id","decoderLookup","decodeInclusiveRange","range","includes","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","Word128","Word256","UFix64","Fix64","String","Character","Bool","Address","Void","Optional","Reference","Dictionary","Event","Resource","Struct","Enum","Type","Path","Capability","InclusiveRange","lookup","found","find","test","reg","RegExp","substring","decodeInstructions","join","decode","filteredDecoders","customDecoder","decoderKey","decodeEvents","transactionIndex","eventIndex","payload","blockId","blockHeight","blockTimestamp","prefixRegex","rawChainId","chainId","formattedChainId","replace","SubscriptionsNotSupportedError","constructor","getGlobalTransport","cfg","transportOrSend","defaultTransport","isTransportObject","send","subscribe","transport","DEFAULT_COMPUTE_LIMIT","cachedContext","createGlobalContext","globalConfig","config","accessNodeUrl","computeLimit","customResolver","fromEntries","entries","startsWith","contracts","_ref2","_ref3","debug","_ref4","legacyContractIdentifiers","_ref5","getGlobalContext","withGlobalContext","context","isString","oldIdentifierPatternFn","isOldIdentifierSyntax","cadence","matches","matchAll","match","identifier","newIdentifierPatternFn","isNewIdentifierSyntax","getContractIdentifierSyntaxMatches","createResolveCadence","resolveCadence","regex","fullMatch","contractName","address","withPrefix","logger","title","cast","handleArgResolution","depth","resolvedArg","resolveArguments","encodeTransactionPayload","tx","prependTransactionDomainTag","rlpEncode","preparePayload","encodeTransactionEnvelope","prepareEnvelope","encodeTxIdFromVoucher","voucher","sha3_256","prepareVoucher","rightPaddedHexBuffer","pad","Buffer","from","padEnd","leftPaddedHexBuffer","padStart","TRANSACTION_DOMAIN_TAG","addressBuffer","blockBuffer","argumentToString","stringify","scriptBuffer","script","signatureBuffer","signature","extensionBuffer","ext","encode","msg","sha","SHA3","digest","validatePayload","refBlock","proposalKey","sequenceNum","authorizers","authorizer","validateEnvelope","preparePayloadSignatures","signers","collectSigners","payloadSigs","sig","signerIndex","sigExt","extensionData","sort","a","b","base","Map","addSigner","set","validateVoucher","prepareSigs","sigs","envelopeSigs","payloadFields","field","checkField","proposalKeyFields","payloadSigsFields","index","payloadSigFields","envelopeSigsFields","envelopeSigFields","isObject","check","defaultVal","obj","missingFieldError","invalidFieldError","printFieldName","findInsideSigners","inside","proposer","add","p","delete","findOutsideSigners","outside","createSignableVoucher","buildAuthorizers","cid","prev","current","item","buildInsideSigners","buildOutsideSigners","voucherToTxId","MAX_DEPTH_LIMIT","idof","prototype","call","Function","genAccountId","ids","ROLES","SPACE","SPACE_COUNT_PER_INDENT","DEBUG_MESSAGE","indent","fill","curr","recurseFlatMap","el","depthLimit","flatMap","buildPreSignable","f_type","f_vsn","roles","error","console","removeUnusedIxAccounts","payerTempIds","authorizersTempIds","proposerTempIds","ixAccountKeys","uniqueTempIds","concat","ixAccountKey","addAccountToIx","newAccount","existingAccount","uniqueAccountsFlatMap","flatMapped","seen","uniqueAccountsFlatMapped","accountId","param","resolveSingleAccount","currentAccountTempId","debugLogger","Math","max","accountWithoutResolve","resolvedAccounts","flatResolvedAccounts","flatResolvedAccount","getAccountTempIDs","rawTempIds","replaceRoles","oldAccountTempId","newAccounts","values","AUTHORIZATIONS","acctTempId","x","PROPOSER","proposerAccts","resolveAccountsByIds","accountTempIds","newTempIds","Boolean","resolvedAccountTempIds","foundNewAccounts","resolvedAccountTempId","payerAddress","payerTempID","pAcct","resolveAccounts","getDebugMessage","frontier","size","enableDebug","resolveSignatures","insideSigners","insidePayload","encodeInsideMessage","prepForEncoding","fetchSignature","outsideSigners","outsidePayload","encodeOutsideMessage","innerFetchSignature","signingFunction","buildSignable","resolveValidators","validators","cb","resolveFinalNormalization","resolveVoucherIntercept","createResolveComputeLimit","resolveComputeLimit","noop","accts","createResolve","createExecFetchRef","createExecFetchSequenceNumber","execFetchRef","sendFn","ixModule","node","then","execFetchSequenceNumber","acctResponse","sequenceNumber","createSend","resolveFn","createSubscribeRawAsync","contextPromise","subscribeRaw","topic","onData","onError","subscriptionPromise","unsubscribe","sub","createSubscribeRaw","createSubscribeAsync","catch","createSubscribe","createDecode","findPayloadSigners","findEnvelopeSigners","envelope","UnableToDetermineMessageEncodingTypeForSignerAddress","signerAddress","trim","encodeMessageFromSignable","signable","payloadSigners","envelopeSigners","isPayloadSigner","isEnvelopeSigner","ps","validator","atBlockHeight","height","atBlockId","OkFn","atLatestBlock","createAccount","createBlock","sealed","getNodeVersionInfo","ax","authz","getEvents","eventType","start","end","getEventsAtBlockHeightRange","startHeight","endHeight","getEventsAtBlockIds","blockIds","getBlockHeader","getCollection","getTransactionStatus","getTransaction","getNetworkParameters","limit","ping","ref","template","DEFAULT_SCRIPT_ACCOUNTS","DEFAULT_REF","predicate","voucherIntercept","subscribeEvents","startBlockId","eventTypes","addresses","heartbeatInterval","resolveProposerSequenceNumber","first","defaultSend","responseModule","getRefId","resolveRefBlockId","mockAccountResponse","numberOfKeys","_","mockGetBlockResponse","mockSend","execSend","authzFn","fallbackSigningFunction","_signable","authzResolve","ROLE","authzResolveMany","authzDeepResolveMany","VERSION","flowMainnet","flowTestnet","flowEmulator","createContext","createSdkClient","options","params"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,MAAMA,IAAI,GAAG,CAAA;AACb,UAAA,EAAYC,gCAAuB,CAACC,OAAO,CAAA;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAA,CAAE;AAEF,MAAMC,GAAG,GAAG,CAAA;AACZ,UAAA,EAAYF,gCAAuB,CAACG,QAAQ,CAAA;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,CAAA,CAAE;AAEF,MAAMC,EAAE,GAAG,CAAA;AACX,SAAA,EAAWC,uBAAc,CAACC,OAAO,CAAA;AACjC;AACA,YAAA,EAAcC,0BAAiB,CAACC,EAAE,CAAA;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAA,CAAE;AAEF,MAAMC,IAAI,GAAG,IAAIC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACC,IAAI,CAACC,KAAK,CAACV,EAAE,CAAgB,CAAC,CAAC;;AAEhE;AACA;AACA;AACA;AACA;AACO,MAAMW,eAAe,GAAGA,MAAmBF,IAAI,CAACC,KAAK,CAACV,EAAE;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMY,WAAW,GAAGA,MAAM;EAC/BC,UAAG,CAACC,SAAS,CAAC;AACZC,IAAAA,GAAG,EAAE,SAAS;AACdC,IAAAA,OAAO,EAAE,CAAA,qFAAA,CAAuF;AAChGC,IAAAA,UAAU,EACR,0GAA0G;IAC5GC,KAAK,EAAEC,aAAM,CAACC;AAChB,GAAC,CAAC;EACF,OAAOT,eAAe,EAAE;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMU,UAAQ,GAAIC,CAAM,IAAkB,OAAOA,CAAC,KAAK,QAAQ;;AAEtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMC,SAAO,GAAID,CAAM,IAAiBE,KAAK,CAACD,OAAO,CAACD,CAAC,CAAC;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMG,KAAK,GAAIH,CAAM,IAC1BA,CAAC,KAAK,IAAI,IAAI,OAAOA,CAAC,KAAK,QAAQ;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMI,MAAM,GAAIJ,CAAM,IAAgBA,CAAC,IAAI,IAAI;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMK,MAAI,GAAIL,CAAM,IAAoB,OAAOA,CAAC,KAAK,UAAU;;AAEtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMM,aAAa,GAAIC,EAAW,IAAK;AAC5C,EAAA,IAAI,CAACJ,KAAK,CAACI,EAAE,CAAC,IAAIH,MAAM,CAACG,EAAE,CAAC,IAAIR,UAAQ,CAACQ,EAAE,CAAC,EAAE,OAAO,KAAK;AAC1D,EAAA,KAAK,IAAIC,GAAG,IAAIzB,IAAI,EAAE,IAAI,CAACwB,EAAE,CAACE,cAAc,CAACD,GAAG,CAAC,EAAE,OAAO,KAAK;AAC/D,EAAA,OAAO,IAAI;AACb,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAME,EAAE,GAAIH,EAAe,IAAK;AACrCA,EAAAA,EAAE,CAACI,MAAM,GAAG9B,0BAAiB,CAACC,EAAE;AAChC,EAAA,OAAOyB,EAAE;AACX,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAA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;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMC,QAAQ,GAAGA,OAAO;EAAC,GAAGjB;AAAgB,CAAC;;AC/BpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASkB,QAAQA,GAEA;AAAA,EAAA,IADtBC,QAAwB,GAAAvH,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI;AAE/B,EAAA,OAAOqF,IAAI,CAAC,CACV1C,YAAY,EACZhE,EAAE,IAAI;AACJA,IAAAA,EAAE,CAACiI,KAAK,CAACW,QAAQ,GAAGA,QAAQ;IAC5B,OAAOzI,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS6I,UAAUA,CAACC,IAAY,EAAwB;AAC7D,EAAA,OAAOpC,IAAI,CAAC,CACVhD,cAAc,EACd1D,EAAE,IAAI;IACJA,EAAE,CAAC2B,OAAO,CAACmH,IAAI,GAAGC,sBAAU,CAACD,IAAI,CAAC;IAClC,OAAO3I,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMgJ,YAAY,GAAGA,CAC1BC,MAAqC,EACrCC,cAAgC,EAChCC,cAAoC,KACV;AAC1B,EAAA,MAAMC,SAAS,GAAG,IAAIC,YAAY,EAAE;AACp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AACA;AACA;AACA;AACA;AACA;AACO,MAAMoU,wBAAwB,GAAIC,EAAe,IACtDC,2BAA2B,CAACC,SAAS,CAACC,cAAc,CAACH,EAAE,CAAC,CAAC;;AAE3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMI,yBAAyB,GAAIJ,EAAe,IACvDC,2BAA2B,CAACC,SAAS,CAACG,eAAe,CAACL,EAAE,CAAC,CAAC;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMM,qBAAqB,GAAIC,OAAgB,IACpDC,QAAQ,CAACN,SAAS,CAACO,cAAc,CAACF,OAAO,CAAC,CAAC;AAE7C,MAAMG,oBAAoB,GAAGA,CAACnS,KAAa,EAAEoS,GAAW,KACtDC,UAAM,CAACC,IAAI,CAACtS,KAAK,CAACuS,MAAM,CAACH,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC;AAEhD,MAAMI,mBAAmB,GAAGA,CAACxS,KAAa,EAAEoS,GAAW,KACrDC,UAAM,CAACC,IAAI,CAACtS,KAAK,CAACyS,QAAQ,CAACL,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC;AAElD,MAAMM,sBAAsB,GAAGP,oBAAoB,CACjDE,UAAM,CAACC,IAAI,CAAC,uBAAuB,CAAC,CAACjU,QAAQ,CAAC,KAAK,CAAC,EACpD,EACF,CAAC,CAACA,QAAQ,CAAC,KAAK,CAAC;AACjB,MAAMqT,2BAA2B,GAAID,EAAU,IAAKiB,sBAAsB,GAAGjB,EAAE;AAE/E,MAAMkB,aAAa,GAAIzM,IAAY,I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AAA,GAAG,EAAE;AAEd,EAAA,OAAO,MAAM8P,IAAI,CAAC,CAACgS,kBAAkB,EAAE,CAAC,EAAE/hB,IAAI,CAAC,CAACqf,IAAI,CAAC7Q,cAAM,CAAC;AAC9D;;AC9BA;AACA;AACA;AACA;;AAqCA;AACA;AACA;;AAgBA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAStN,cAAcA,GAAuC;AAAA,EAAA,IAAtC8gB,EAA+B,GAAA/hB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AACjE,EAAA,OAAOqF,IAAI,CACT0c,EAAE,CAACrZ,GAAG,CAACsZ,KAAK,IAAI;IACd,OAAOliB,WAAW,CAACkiB,KAAK,EAAE;MACxB7hB,IAAI,EAAEY,wBAAe,CAACC;AACxB,KAAC,CAAC;AACJ,EAAA,CAAC,CACH,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAST,aAAaA,CAC3BkH,IAAY,EACZyW,eAA0B,EAC1B1e,KAAuB,EACvB4V,WAAoB,EACS;EAC7B,OAAO;IAAC3N,IAAI;IAAEyW,eAAe;IAAE1e,KAAK;AAAE4V,IAAAA;GAAY;AACpD;;ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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;AACA;AACO,SAASikB,oBAAoBA,CAClCrc,aAAqB,EACC;AACtB,EAAA,OAAOlB,IAAI,CAAC,CACVpD,wBAAwB,EACxBtD,EAAE,IAAI;AACJA,IAAAA,EAAE,CAAC0H,WAAW,CAAC6E,EAAE,GAAG3E,aAAa;IACjC,OAAOzH,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASkkB,cAAcA,CAAC3X,EAAU,EAAwB;AAC/D,EAAA,OAAO7F,IAAI,CAAC,CACVlD,kBAAkB,EAClBxD,EAAE,IAAI;AACJA,IAAAA,EAAE,CAAC0H,WAAW,CAAC6E,EAAE,GAAGA,EAAE;IACtB,OAAOpM,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASmkB,oBAAoBA,GAAyB;AAC3D,EAAA,OAAOzd,IAAI,CAAC,CACVpC,wBAAwB,EACxBtE,EAAE,IAAI;IACJ,OAAOG,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASokB,KAAKA,CAACA,KAAa,EAAwB;AACzD,EAAA,OAAOpkB,EAAE,IAAI;AACXA,IAAAA,EAAE,CAACb,OAAO,CAACyS,YAAY,GAAGwS,KAAK;AAC/B,IAAA,OAAOpkB,EAAE;EACX,CAAC;AACH;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS4G,IAAIA,CAACwc,EAA0B,EAAE;EAC/C,OAAO1c,IAAI,CAAC0c,EAAE,CAACrZ,GAAG,CAACrH,YAAY,CAAC,CAAC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,GAAGA,CACjBC,KAA6B,EAC7BE,KAAQ,EACR;EACA,OAAO;IAACF,KAAK;AAAEE,IAAAA;GAAM;AACvB;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASoW,QAAQA,CAACmK,KAA2B,EAAE;EACpD,OAAOliB,WAAW,CAACkiB,KAAK,EAAE;IACxB7hB,IAAI,EAAEY,wBAAe,CAACwb;AACxB,GAAC,CAAC;AACJ;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASnb,KAAKA,GAAkC;AAAA,EAAA,IAAjC2gB,EAA0B,GAAA/hB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AACnD,EAAA,IAAI,CAAC1B,KAAK,CAACD,OAAO,CAAC0jB,EAAE,CAAC,EAAEA,EAAE,GAAG,CAACA,EAAE,CAAC;AACjC,EAAA,OAAO1c,IAAI,CACT0c,EAAE,CAACrZ,GAAG,CAACsZ,KAAK,IAAI;IACd,OAAOliB,WAAW,CAACkiB,KAAK,EAAE;MACxB7hB,IAAI,EAAEY,wBAAe,CAACI;AACxB,KAAC,CAAC;AACJ,EAAA,CAAC,CACH,CAAC;AACH;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS6hB,IAAIA,GAAyB;AAC3C,EAAA,OAAOvgB,QAAQ;AACjB;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASwgB,GAAGA,CAAC/N,QAAgB,EAAwB;AAC1D,EAAA,OAAO7P,IAAI,CAAC,CACV1G,EAAE,IAAI;AACJA,IAAAA,EAAE,CAACb,OAAO,CAACoX,QAAQ,GAAGA,QAAQ;IAC9B,OAAOpW,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS4V,MAAMA,GAKE;AACtB,EAAA,OAAOlP,IAAI,CAAC,CAACxD,UAAU,EAAEmE,GAAG,CAAC,YAAY,EAAEkd,qBAAQ,CAAC,GAAAljB,SAAO,CAAC,CAAC,CAAC,CAAC;AACjE;;ACvCA,MAAMmjB,uBAAiC,GAAG,EAAE;AAC5C,MAAMC,WAAgB,GAAG,IAAI;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS/c,WAAWA,GAEH;AACtB,EAAA,OAAOhB,IAAI,CAAC,CACVtD,eAAe,EACfiE,GAAG,CAAC,YAAY,EAAEkd,qBAAQ,CAAC,GAAAljB,SAAO,CAAC,CAAC,EACpCrB,EAAE,IAAI;IACJA,EAAE,CAACb,OAAO,CAACoX,QAAQ,GAAGvW,EAAE,CAACb,OAAO,CAACoX,QAAQ,IAAIkO,WAAW;AACxDzkB,IAAAA,EAAE,CAACsC,cAAc,GAAGtC,EAAE,CAACsC,cAAc,IAAIkiB,uBAAuB;IAChE,OAAOrkB,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AC3EO,SAASc,SAASA,GAAU;AAAA,EAAA,KAAA,IAAAgB,IAAA,GAAAT,SAAA,CAAAC,MAAA,EAANsF,IAAI,GAAA,IAAAjH,KAAA,CAAAmC,IAAA,GAAAE,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA,EAAA,EAAA;AAAJ4E,IAAAA,IAAI,CAAA5E,IAAA,CAAA,GAAAX,SAAA,CAAAW,IAAA,CAAA;AAAA,EAAA;AAC/B,EAAA,IAAI4E,IAAI,CAACtF,MAAM,GAAG,CAAC,EAAE;AACnB,IAAA,MAAM,CAACojB,SAAS,EAAEvlB,OAAO,CAAC,GAAGyH,IAAI;AACjC,IAAA,OAAO9F,SAAS,CAAC,CAACd,EAAE,EAAAoK,IAAA,KAAgB;MAAA,IAAd;QAACjK,EAAE;AAAEE,QAAAA;AAAG,OAAC,GAAA+J,IAAA;AAC7B,MAAA,OAAOsa,SAAS,GAAGvkB,EAAE,CAACH,EAAE,CAAC,GAAGK,GAAG,CAACL,EAAE,EAAEb,OAAO,CAAC;AAC9C,IAAA,CAAC,CAAC;AACJ,EAAA;AACA,EAAA,MAAM,CAAC+C,EAAE,CAAC,GAAG0E,IAAI;AACjB,EAAA,OAAO5G,EAAE,IAAIkC,EAAE,CAAClC,EAAE,EAAE;IAACG,EAAE;AAAEE,IAAAA;AAAG,GAAC,CAAC;AAChC;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASskB,gBAAgBA,CAACziB,EAAsB,EAAwB;AAC7E,EAAA,OAAOmF,GAAG,CAAC,sBAAsB,EAAEnF,EAAE,CAAC;AACxC;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS0iB,eAAeA,CAAAxa,IAAA,EAOO;EAAA,IAPN;IAC9Bya,YAAY;IACZlB,WAAW;IACXmB,UAAU;IACVC,SAAS;IACT9S,SAAS;AACT+S,IAAAA;AACW,GAAC,GAAA5a,IAAA;EACZtJ,uBAAS,CACP,EAAE+jB,YAAY,IAAIlB,WAAW,CAAC,EAC9B,2EACF,CAAC;AAED,EAAA,OAAOjd,IAAI,CAAC,CACVlC,mBAAmB,EAClBxE,EAAe,IAAK;AACnBA,IAAAA,EAAE,CAAC4kB,eAAe,CAACC,YAAY,GAAGA,YAAY,IAAI,IAAI;AACtD7kB,IAAAA,EAAE,CAAC4kB,eAAe,CAACjB,WAAW,GAAGA,WAAW,IAAI,IAAI;AACpD3jB,IAAAA,EAAE,CAAC4kB,eAAe,CAACE,UAAU,GAAGA,UAAU,IAAI,IAAI;AAClD9kB,IAAAA,EAAE,CAAC4kB,eAAe,CAACG,SAAS,GAAGA,SAAS,IAAI,IAAI;AAChD/kB,IAAAA,EAAE,CAAC4kB,eAAe,CAAC3S,SAAS,GAAGA,SAAS,IAAI,IAAI;AAChDjS,IAAAA,EAAE,CAAC4kB,eAAe,CAACI,iBAAiB,GAAGA,iBAAiB,IAAI,IAAI;IAChE,OAAO7kB,EAAE,CAACH,EAAE,CAAC;AACf,EAAA,CAAC,CACF,CAAC;AACJ;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMilB,6BAA6B,GACxC7a,IAAA,IAAA;EAAA,IAAC;AAACoW,IAAAA;AAAgB,GAAC,GAAApW,IAAA;EAAA,OACnB,MAAOpK,EAAe,IAAK;IACzB,IAAI,CAAC+E,aAAa,CAAC/E,EAAE,CAAC,EAAE,OAAOG,EAAE,CAACH,EAAE,CAAC;AACrC,IAAA,IAAIA,EAAE,CAACmC,QAAQ,CAACnC,EAAE,CAACkZ,QAAQ,CAAE,CAACzC,WAAW,EAAE,OAAOtW,EAAE,CAACH,EAAE,CAAC;AAExD,IAAA,MAAMsgB,MAAW,GAAG,MAAM5O,aAAM,CAACwT,KAAK,CACpC,CAAC,eAAe,EAAE,UAAU,CAAC,EAC7BC,kBACF,CAAC;AAEDrkB,IAAAA,uBAAS,CACPwf,MAAM,EACN,CAAA,gEAAA,EAAmE,kGAAkG,EACvK,CAAC;IAED,MAAM5X,UAAQ,GAAG,MAAM4X,MAAM,CAC3B,MAAM9Y,KAAK,CAAC,CAACqB,UAAU,CAAC7I,EAAE,CAACmC,QAAQ,CAACnC,EAAE,CAACkZ,QAAQ,CAAE,CAACpQ,IAAK,CAAC,CAAC,CAAC,EAC1D;AAACJ,MAAAA,QAAQ,EAAE0c,QAAc;cAAEnQ,UAAM;AAAEjV,MAAAA,EAAE,EAAEugB;AAAQ,KAAC,EAChD;AAACC,MAAAA;AAAI,KACP,CAAC;AACD,IAAA,MAAMrU,OAAO,GAAG,MAAMjD,cAAc,CAACR,UAAQ,CAAC;IAE9C1I,EAAE,CAACmC,QAAQ,CAACnC,EAAE,CAACkZ,QAAQ,CAAE,CAACzC,WAAW,GACnCtK,OAAO,CAACxN,IAAI,CAACqB,EAAE,CAACmC,QAAQ,CAACnC,EAAE,CAACkZ,QAAQ,CAAE,CAACrY,KAAK,CAAE,CAAC+f,cAAc;IAE/D,OAAOzgB,EAAE,CAACH,EAAE,CAAC;EACf,CAAC;AAAA;;AClCH,eAAeqlB,QAAQA,CAACjkB,IAA2B,EAAmB;EACpE,MAAMof,IAAI,GAAG,MAAM9O,aAAM,EAAE,CAACxK,GAAG,CAAC,gBAAgB,CAAC;AACjD,EAAA,MAAMoZ,MAAW,GAAG,MAAM5O,aAAM,CAACwT,KAAK,CACpC,CAAC,eAAe,EAAE,UAAU,CAAC,EAC7BC,kBACF,CAAC;AAEDrkB,EAAAA,uBAAS,CACPwf,MAAM,EACN,CAAA,gEAAA,EAAmE,kGAAkG,EACvK,CAAC;AAED,EAAA,IAAItgB,EAAE;AACNA,EAAAA,EAAE,GAAG,MAAM0G,IAAI,CAAC5H,eAAe,EAAE,EAAE,CAAC6J,QAAQ,EAAE,CAAC,CAAC;AAChD3I,EAAAA,EAAE,GAAG,MAAMsgB,MAAM,CAACtgB,EAAE,EAAE;IAAC0I,QAAQ;YAAEuM,UAAM;AAAEjV,IAAAA,EAAE,EAAEugB;AAAQ,GAAC,EAAE;AAACC,IAAAA;AAAI,GAAC,CAAC;AAC/DxgB,EAAAA,EAAE,GAAG,MAAMkJ,cAAc,CAAClJ,EAAE,CAAC;EAC7B,OAAOA,EAAE,CAACuM,EAAE;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS+Y,iBAAiBA,CAAClkB,IAA2B,EAAE;EAC7D,OAAO,MAAOpB,EAAO,IAAK;IACxB,IAAI,CAAC+E,aAAa,CAAC/E,EAAE,CAAC,EAAE,OAAOG,EAAE,CAACH,EAAE,CAAC;IACrC,IAAIA,EAAE,CAACb,OAAO,CAACoX,QAAQ,EAAE,OAAOpW,EAAE,CAACH,EAAE,CAAC;IAEtCA,EAAE,CAACb,OAAO,CAACoX,QAAQ,GAAG,MAAM8O,QAAQ,CAAK,CAAC;IAE1C,OAAOllB,EAAE,CAACH,EAAE,CAAC;EACf,CAAC;AACH;;AC9CO,SAASulB,mBAAmBA,CAACvlB,EAAE,EAAoB;AAAA,EAAA,IAAlBwlB,YAAY,GAAAnkB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC;AACtD;EACAP,uBAAS,CAACd,EAAE,CAAC2B,OAAO,EAAE,kDAAkD,EAAE3B,EAAE,CAAC;AAC7E;EACAc,uBAAS,CAAEd,EAAE,CAAC2B,OAAO,CAACmH,IAAI,EAAE,uDAAuD,EAAE9I,EAAE,CAAC;AAExF,EAAA,MAAM2T,OAAO,GAAG3T,EAAE,CAAC2B,OAAO,CAACmH,IAAI;EAE/B,OAAO;AACLnH,IAAAA,OAAO,EAAE;AACPmH,MAAAA,IAAI,EAAE6K,OAAO;AACbhV,MAAAA,IAAI,EAAEgB,KAAK,CAACuV,IAAI,CAAC;AAAC5T,QAAAA,MAAM,EAAEkkB;AAAY,OAAC,EAAE,CAACC,CAAC,EAAExa,CAAC,MAAM;AAClDoN,QAAAA,KAAK,EAAEpN,CAAC;AACR2V,QAAAA,cAAc,EAAE;AAClB,OAAC,CAAC;AACJ;GACD;AACH;AAEO,SAAS8E,oBAAoBA,CAAC1lB,EAAE,EAAE;EACvC,OAAO;AACLU,IAAAA,GAAG,EAAE,WAAW;AAChBuH,IAAAA,KAAK,EAAE;AACLsE,MAAAA,EAAE,EAAE;AACN;GACD;AACH;AAEA,MAAMvF,QAAQ,GAAGC,CAAC,IAAIA,CAAC;AAEhB,SAAS0e,QAAQA,GAAsB;AAAA,EAAA,IAArBxe,QAAQ,GAAA9F,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG2F,QAAQ;AAC1C,EAAA,OAAO,eAAe4e,QAAQA,CAAC5lB,EAAE,EAAE;IACjCA,EAAE,GAAG,MAAMA,EAAE;AACb,IAAA,QAAQ,IAAI;MACV,KAAKkF,YAAY,CAAClF,EAAE,CAAC;QACnB,OAAOulB,mBAAmB,CAACvlB,EAAE,CAAC;MAEhC,KAAKqF,UAAU,CAACrF,EAAE,CAAC;QACjB,OAAO0lB,oBAAoB,CAAG,CAAC;AAEjC,MAAA;QACE,OAAOve,QAAQ,CAACnH,EAAE,CAAC;AACvB;EACF,CAAC;AACH;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMka,IAAI,GAAItZ,IAAwB,IAC3C,GAAGgT,sBAAU,CAAChT,IAAI,CAACkI,IAAI,CAAC,CAAA,CAAA,EAAIlI,IAAI,CAACC,KAAK,CAAA,CAAE;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACO,SAASoW,GAAGA,CAAC7V,IAAiC,EAAE;AACrD,EAAA,OAAO,CAAC,WAAW,EAAEA,IAAI,CAAC0H,IAAI,EAAE1H,IAAI,CAACP,KAAK,CAAC,CAAC8O,IAAI,CAAC,GAAG,CAAC;AACvD;AAMA;AACA;AACA;AACA;AACA;AACA;AACO,SAASkW,OAAOA,GAAwB;AAAA,EAAA,IAAvBzkB,IAAgB,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;EAC3C,OAAO,UAAUM,OAAoC,EAAE;AACrD,IAAA,MAAMf,IAAiC,GAAG;AACxC,MAAA,GAAGe,OAAO;AACV,MAAA,GAAGP,IAAI;AACPS,MAAAA,OAAO,EAAE,IAAI;MACb0d,eAAe,EACbne,IAAI,CAACme,eAAe,IACpB5d,OAAO,CAAC4d,eAAe,IACvBuG;KACH;AAED,IAAA,OAAOllB,IAAI;IAEX,SAASklB,uBAAuBA,CAACC,SAAc,EAAE;MAC/C,OAAO;QACLjd,IAAI,EAAElI,IAAI,CAACkI,IAAI;QACfjI,KAAK,EAAED,IAAI,CAACC,KAAK;QACjBiV,SAAS,EAAEmB,GAAG,CAACrW,IAAI;OACpB;AACH,IAAA;EACF,CAAC;AACH;AAMA;AACA;AACA;AACA;AACA;AACA;AACO,SAASolB,YAAYA,GAA+B;AAAA,EAAA,IAA9B5kB,IAAuB,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;EACvD,OAAO,UAAUM,OAA2B,EAAE;IAC5C,MAAM;MAACF,MAAM;MAAE,GAAGM;AAAI,KAAC,GAAGX,IAAI;IAC9B,OAAO;AACL,MAAA,GAAGO,OAAO;MACVF,MAAM,EAAEA,MAAM,IAAI,cAAc;MAChCI,OAAO,EAAEgkB,OAAO,CAAC9jB,IAAI;KACtB;EACH,CAAC;AACH;AAEA,MAAMkkB,IAAI,GAAG;AAAC/M,EAAAA,QAAQ,EAAE,KAAK;AAAEvC,EAAAA,UAAU,EAAE,KAAK;AAAElU,EAAAA,KAAK,EAAE;AAAK,CAAC;AAU/D;AACA;AACA;AACA;AACA;AACA;AACO,SAASyjB,gBAAgBA,GAE9B;EAAA,IADA9kB,IAAuB,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG;AAACiB,IAAAA,cAAc,EAAE;GAAG;EAE9C,OAAO,UAAUX,OAA2B,EAAsB;AAChE,IAAA,MAAMF,MAAM,GAAGL,IAAI,CAACK,MAAM,IAAI,oBAAoB;IAClD,OAAO;AACL,MAAA,GAAGE,OAAO;MACVF,MAAM;AACNI,MAAAA,OAAO,EAAEA,MACP,CACET,IAAI,CAAC8X,QAAQ,IACX2M,OAAO,CAACzkB,IAAI,CAAC8X,QAAQ,CAAC,CAAC;AAAC1X,QAAAA,IAAI,EAAE;AAAC,UAAA,GAAGykB,IAAI;AAAE/M,UAAAA,QAAQ,EAAE;AAAI;AAAC,OAAC,CAAC,EAC3D,GAAG9X,IAAI,CAACkB,cAAc,CACnByH,GAAG,CAAC8b,OAAO,CAAC,CACZ9b,GAAG,CAACtK,CAAC,IAAIA,CAAC,CAAC;AAAC+B,QAAAA,IAAI,EAAE;AAAC,UAAA,GAAGykB,IAAI;AAAEtP,UAAAA,UAAU,EAAE;AAAI;AAAC,OAAC,CAAC,CAAC,EACnDvV,IAAI,CAACqB,KAAK,IAAIojB,OAAO,CAACzkB,IAAI,CAACqB,KAAK,CAAC,CAAC;AAACjB,QAAAA,IAAI,EAAE;AAAC,UAAA,GAAGykB,IAAI;AAAExjB,UAAAA,KAAK,EAAE;AAAI;AAAC,OAAC,CAAC,CAClE,CAACkH,MAAM,CAACsU,OAAO;KACnB;EACH,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASkI,oBAAoBA,GAGlC;EAAA,IAFA/kB,IAAuB,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG;AAACiB,IAAAA,cAAc,EAAE;GAAG;AAAA,EAAA,IAC9C2R,KAAK,GAAA5S,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC;EAET,OAAO,UAAUM,OAA2B,EAAsB;AAChE,IAAA,MAAMF,MAAM,GAAGL,IAAI,CAACK,MAAM,IAAI,yBAAyB;IACvD,OAAO;AACL,MAAA,GAAGE,OAAO;MACVF,MAAM;MACNI,OAAO,EACLoS,KAAK,GAAG,CAAC,GACLkS,oBAAoB,CAAC/kB,IAAI,EAAE6S,KAAK,GAAG,CAAC,CAAC,CAACtS,OAAO,CAAC,CAACE,OAAO,GACtDqkB,gBAAgB,CAAC9kB,IAAI,CAAC,CAACO,OAAO,CAAC,CAACE;KACvC;EACH,CAAC;AACH;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAM8I,GAAG,GAAG,YAAA;AAAA,EAAA,IACjBrE,GAAmE,GAAAjF,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AAAA,EAAA,OACrEmG,KAAK,CAAC,CAAC8c,GAAG,CAAC,KAAK,CAAC,EAAE,GAAGhe,GAAG,CAAC,CAAC,CAACma,IAAI,CAAC5e,OAAO,CAAC;AAAA,CAAA;;;;;;;;;;;;;;AC5CvC,MAAMukB,OAAe,GAAG;;ACFxB,MAAMC,WAAoC,GAAG;AAClD,EAAA,cAAc,EAAE,SAAS;AACzB,EAAA,gBAAgB,EAAE,iCAAiC;AACnD,EAAA,kBAAkB,EAAE;AACtB;AAEO,MAAMC,WAAoC,GAAG;AAClD,EAAA,cAAc,EAAE,SAAS;AACzB,EAAA,gBAAgB,EAAE,iCAAiC;AACnD,EAAA,kBAAkB,EAAE;AACtB;AAEO,MAAMC,YAAqC,GAAG;AACnD,EAAA,cAAc,EAAE,OAAO;AACvB,EAAA,gBAAgB,EAAE,uBAAuB;AACzC,EAAA,kBAAkB,EAAE;AACtB;;ACdA;AACA;AACA;;AAgDA;AACA;AACA;AACO,SAASC,aAAaA,CAAApc,IAAA,EAOI;EAAA,IAPH;IAC5BuH,aAAa;IACbN,SAAS;IACTO,YAAY;IACZC,cAAc;IACd1I,cAAc,GAAG,EAAE;AACnB8I,IAAAA,SAAS,GAAG;AACI,GAAC,GAAA7H,IAAA;EACjB,IAAI,CAACiH,SAAS,EAAE;AACd,IAAA,MAAM,IAAIjL,KAAK,CAAC,kDAAkD,CAAC;AACrE,EAAA;;AAEA;AACA,EAAA,IAAI,OAAOiL,SAAS,CAACF,IAAI,KAAK,UAAU,EAAE;AACxC,IAAA,MAAM,IAAI/K,KAAK,CAAC,wDAAwD,CAAC;AAC3E,EAAA;AAEA,EAAA,IAAI,OAAOiL,SAAS,CAACD,SAAS,KAAK,UAAU,EAAE;AAC7C,IAAA,MAAM,IAAIhL,KAAK,CACb,6DACF,CAAC;AACH,EAAA;EAEA,IAAI,CAACuL,aAAa,EAAE;AAClB,IAAA,MAAM,IAAIvL,KAAK,CAAC,oDAAoD,CAAC;AACvE,EAAA;AAEA,EAAA,IAAI,OAAOuL,aAAa,KAAK,QAAQ,EAAE;AACrC,IAAA,MAAM,IAAIvL,KAAK,CAAC,kCAAkC,CAAC;AACrD,EAAA;EAEA,IAAI,OAAOwL,YAAY,KAAK,QAAQ,IAAIA,YAAY,IAAI,CAAC,EAAE;AACzD,IAAA,MAAM,IAAIxL,KAAK,CAAC,yCAAyC,CAAC;AAC5D,EAAA;EAEA,OAAO;IACLiL,SAAS;IACTM,aAAa;IACbC,YAAY;IACZC,cAAc;IACd1I,cAAc;IACdiJ,KAAK,EAAE,EAAE;IACTH,SAAS;AACTK,IAAAA,yBAAyB,EAAE;GAC5B;AACH;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASmU,eAAeA,CAACC,OAAyB,EAAE;AACzD,EAAA,MAAMhU,OAAO,GAAG8T,aAAa,CAACE,OAAO,CAAC;EAEtC,OAAO;AACLvV,IAAAA,IAAI,EAAE0P,UAAU,CAACnO,OAAO,CAAC;AACzBtB,IAAAA,SAAS,EAAEuQ,eAAe,CAACjP,OAAO,CAAC;AACnCuO,IAAAA,YAAY,EAAEO,kBAAkB,CAAC9O,OAAO,CAAC;AACzC/Q,IAAAA,OAAO,EAAEqhB,aAAa,CAACtQ,OAAO,CAAC;AAC/BzK,IAAAA,KAAK,EAAEgb,WAAW,CAACvQ,OAAO,CAAC;AAC3B7Q,IAAAA,OAAO,EAAEqe,aAAa,CAACxN,OAAO,CAAC;IAC/B9C,MAAM,EAAEgS,YAAY,CAAClP,OAAO;GAC7B;AACH;;AC6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMiU,MAAM,GAAIA,MAAa,IAClC9S,iBAAM,CAAC7U,GAAG,CAACC,SAAS,CAAC;AACnBC,EAAAA,GAAG,EAAE,SAAS;AACdC,EAAAA,OAAO,EAAE,CAAA,6DAAA,CAA+D;AACxEC,EAAAA,UAAU,EACR,qGAAqG;AACvGC,EAAAA,KAAK,EAAEwU,iBAAM,CAACvU,MAAM,CAACic;AACvB,CAAC;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMkB,KAAK,GAAIkK,MAAa,IACjC9S,iBAAM,CAAC7U,GAAG,CAACC,SAAS,CAAC;AACnBC,EAAAA,GAAG,EAAE,SAAS;AACdC,EAAAA,OAAO,EAAE,CAAA,4DAAA,CAA8D;AACvEC,EAAAA,UAAU,EACR,qGAAqG;AACvGC,EAAAA,KAAK,EAAEwU,iBAAM,CAACvU,MAAM,CAACic;AACvB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}